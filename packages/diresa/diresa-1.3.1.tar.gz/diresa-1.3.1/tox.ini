#
# Author:  Geert De Paepe
# Email:   geert.de.paepe@vub.be
# License: MIT License
# Purpose: tox.ini: tox configuration file
# Usage:   tox [-e <env_name>] in directory with tox.ini file
#

[tox]
env_list=
    py3{8,9,10,11,12,13}-tf2{12,13,14,15,16,17,18}
    lint
skip_missing_interpreters = True
	
[testenv]
deps=
  tf212: tensorflow>=2.12,<2.13
  tf213: tensorflow>=2.13,<2.14
  tf214: tensorflow>=2.14,<2.15
  tf215: tensorflow>=2.15,<2.16
  tf216: tensorflow>=2.16,<2.17
  tf217: tensorflow>=2.17,<2.18
  tf218: tensorflow>=2.18,<2.19
  pytest>=7
commands=pytest {posargs:tests}

[testenv:lint]
skip_install=true
deps=flake8>=7
commands=flake8 --extend-ignore E501,E701,W291,W293,W391 {posargs:src}

[testenv:docs]
skip_install=true
deps=
    sphinx
    sphinx-rtd-theme
    sphinx-copybutton
commands=sphinx-build -M html docs docs/_build/html

[testenv:build]
skip_install=true
deps=build
commands=python -m build

[testenv:pubtest]
skip_install=true
deps=twine
commands=python -m twine upload --repository testpypi dist/*

[testenv:publish]
skip_install=true
deps=twine
commands=python -m twine upload dist/*