from sympy import python
from sympy.parsing.mathematica import parse_mathematica
import os

files = [f for f in os.listdir('./mathematica') if f.endswith('.m')]

for f in files:
    with open('./mathematica/' +f, 'rt') as fin:
        inp = fin.read()

    with open('./mathematica/' + f[:-1]+'py', 'wt') as fout:
        fout.write("# This file is generated by translate_mathematica.py\n")
        fout.write("# Do not edit this file directly\n")
        fout.write("# Instead, edit amps_mathematica.m and run translate_mathematica.py\n")
        fout.write("# to regenerate this file\n")
        fout.write("#\n")
        fout.write("# This file contains the translation of Mathematica code to Python\n")
        fout.write("# using the sympy library\n")
        fout.write("#\n")

        fout.write(python(parse_mathematica(inp)))