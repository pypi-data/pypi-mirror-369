[package]
name = "batss"
# supposedly maturin uses the version from pyproject.toml when publishing to PyPi, 
# so it should not matter what this is, but I try to remember to keep it in sync.
version = "1.0.0"
edition = "2021"
readme = "README.md"

[lib]
name = "batss_rust"
crate-type = ["cdylib", "rlib"]

[[bin]]
name = "main"
path = "src/main.rs"
required-features = ["rebop-dep"]

[[bin]]
name = "rebop"
path = "src/generate_rebop_samples.rs"
required-features = ["rebop-dep"]

[[bin]]
name = "time_rebop"
path = "src/rebop_runtime_sampling.rs"
required-features = ["rebop-dep"]

[features]
default = ["rebop-dep"]
flm = ["flame"]  # Enable flame profiling to be switched on/off
rebop-dep = ["rebop"]  # Make rebop optional to fix macOS builds


[dependencies]
# rug = { version = "1", default-features = false, features = ["float"] }
# gmp-mpfr-sys = {version = "1.6", features = ["use-system-libs"]}
num-format = "0.4"
pyo3 = { version = "0.24", features = ["extension-module"] }
numpy = "0.24"
ndarray = "0.16"
rand = { version = "0.9", features = ["small_rng"] } # need version 0.8 of rand to use it with statrs, fails with version 0.9
nalgebra = "0.33"
flame = { version = "0.2", optional = true }  # Make flame optional so we can turn it on/off
special = "0.11"
rand_distr = "0.5"
num-integer = "0.1"
num-bigint = "0.4"
lazy_static = "1"
stybulate = "1"
itertools = "0.14.0"
compensated-summation = "0.3.1"
rebop = { version = "0.9", optional = true }
serde_json = "1.0"
tqdm = "0.8"
