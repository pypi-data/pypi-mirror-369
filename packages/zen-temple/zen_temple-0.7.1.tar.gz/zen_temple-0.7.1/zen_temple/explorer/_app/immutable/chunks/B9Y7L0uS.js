import{w as it,av as Xe,z as st,T as at,a_ as ot,y as lt,V as ut,F as ft,a$ as ct,b0 as dt,d as ht,b1 as _t,W as $e,b2 as pt,A as gt,n as ce,b3 as vt,b4 as mt,a1 as et,e as de,m as re,r as Y,h as Pe,v as me,a as fe,p as bt,b as Ce,s as xe,j as ne,g as y,l as Ne,f as yt,i as wt}from"./C2qtcxMB.js";import{c as kt,s as je,o as Et}from"./BIHB8bOP.js";import"./DsnmJJEf.js";import{p as be,i as Ze}from"./CUUZcSt3.js";import{a as Oe,g as Me,u as Ot,e as Ue,i as ze}from"./C1XT8suU.js";import{s as ye}from"./yfEWpjCL.js";import{d as Rt}from"./DxGKLc-D.js";import{s as Ke}from"./BIZCZdcV.js";function tt(r,n,u=!1){if(r.multiple){if(n==null)return;if(!at(n))return ot();for(var s of r.options)s.selected=n.includes(Ie(s));return}for(s of r.options){var l=Ie(s);if(lt(l,n)){s.selected=!0;return}}(!u||n!==void 0)&&(r.selectedIndex=-1)}function St(r){var n=new MutationObserver(()=>{tt(r,r.__value)});n.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),st(()=>{n.disconnect()})}function qe(r,n,u=n){var s=!0;it(r,"change",l=>{var c=l?"[selected]":":checked",d;if(r.multiple)d=[].map.call(r.querySelectorAll(c),Ie);else{var g=r.querySelector(c)??r.querySelector("option:not([disabled])");d=g&&Ie(g)}u(d)}),Xe(()=>{var l=n();if(tt(r,l,s),s&&l===void 0){var c=r.querySelector(":checked");c!==null&&(l=Ie(c),u(l))}r.__value=l,s=!1}),St(r)}function Ie(r){return"__value"in r?r.__value:r.value}const Ct=()=>performance.now(),pe={tick:r=>requestAnimationFrame(r),now:()=>Ct(),tasks:new Set};function rt(){const r=pe.now();pe.tasks.forEach(n=>{n.c(r)||(pe.tasks.delete(n),n.f())}),pe.tasks.size!==0&&pe.tick(rt)}function xt(r){let n;return pe.tasks.size===0&&pe.tick(rt),{promise:new Promise(u=>{pe.tasks.add(n={c:r,f:u})}),abort(){pe.tasks.delete(n)}}}function Ae(r,n){$e(()=>{r.dispatchEvent(new CustomEvent(n))})}function Lt(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const n=r.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(u=>u[0].toUpperCase()+u.slice(1)).join("")}function Ye(r){const n={},u=r.split(";");for(const s of u){const[l,c]=s.split(":");if(!l||c===void 0)break;const d=Lt(l.trim());n[d]=c.trim()}return n}const Tt=r=>r;function or(r,n,u,s){var l=(r&vt)!==0,c=(r&mt)!==0,d=l&&c,g=(r&_t)!==0,j=d?"both":l?"in":"out",a,_=n.inert,E=n.style.overflow,C,I;function A(){return $e(()=>a??=u()(n,s?.()??{},{direction:j}))}var U={is_global:g,in(){if(n.inert=_,!l){I?.abort(),I?.reset?.();return}c||C?.abort(),Ae(n,"introstart"),C=We(n,A(),I,1,()=>{Ae(n,"introend"),C?.abort(),C=a=void 0,n.style.overflow=E})},out(se){if(!c){se?.(),a=void 0;return}n.inert=!0,Ae(n,"outrostart"),I=We(n,A(),C,0,()=>{Ae(n,"outroend"),se?.()})},stop:()=>{C?.abort(),I?.abort()}},K=ut;if((K.transitions??=[]).push(U),l&&kt){var $=g;if(!$){for(var J=K.parent;J&&(J.f&ft)!==0;)for(;(J=J.parent)&&(J.f&ct)===0;);$=!J||(J.f&dt)!==0}$&&Xe(()=>{ht(()=>U.in())})}}function We(r,n,u,s,l){var c=s===1;if(pt(n)){var d,g=!1;return gt(()=>{if(!g){var K=n({direction:c?"in":"out"});d=We(r,K,u,s,l)}}),{abort:()=>{g=!0,d?.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(u?.deactivate(),!n?.duration)return l(),{abort:ce,deactivate:ce,reset:ce,t:()=>s};const{delay:j=0,css:a,tick:_,easing:E=Tt}=n;var C=[];if(c&&u===void 0&&(_&&_(0,1),a)){var I=Ye(a(0,1));C.push(I,I)}var A=()=>1-s,U=r.animate(C,{duration:j,fill:"forwards"});return U.onfinish=()=>{U.cancel();var K=u?.t()??1-s;u?.abort();var $=s-K,J=n.duration*Math.abs($),se=[];if(J>0){var ge=!1;if(a)for(var he=Math.ceil(J/16.666666666666668),ee=0;ee<=he;ee+=1){var x=K+$*E(ee/he),t=Ye(a(x,1-x));se.push(t),ge||=t.overflow==="hidden"}ge&&(r.style.overflow="hidden"),A=()=>{var e=U.currentTime;return K+$*E(e/J)},_&&xt(()=>{if(U.playState!=="running")return!1;var e=A();return _(e,1-e),!0})}U=r.animate(se,{duration:J,fill:"forwards"}),U.onfinish=()=>{A=()=>s,_?.(s,1-s),l()}},{abort:()=>{U&&(U.cancel(),U.effect=null,U.onfinish=ce)},deactivate:()=>{l=ce},reset:()=>{s===0&&_?.(1,0)},t:()=>A()}}function jt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var It=Fe.exports,Ve;function At(){return Ve||(Ve=1,(function(r,n){((u,s)=>{r.exports=s()})(It,function u(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},l,c=!s.document&&!!s.postMessage,d=s.IS_PAPA_WORKER||!1,g={},j=0,a={};function _(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var i=he(e);i.chunkSize=parseInt(i.chunkSize),e.step||e.chunk||(i.chunkSize=null),this._handle=new U(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(e,i){var f=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<f){let h=this._config.newline;h||(o=this._config.quoteChar||'"',h=this._handle.guessLineEndings(e,o)),e=[...e.split(h).slice(f)].join(h)}this.isFirstChunk&&x(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(e))!==void 0&&(e=o),this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+e,o=(this._partialLine="",this._handle.parse(f,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=o.meta.cursor,f=(this._finished||(this._partialLine=f.substring(e-this._baseIndex),this._baseIndex=e),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),d)s.postMessage({results:o,workerId:a.WORKER_ID,finished:f});else if(x(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!f||!x(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),f||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):d&&this._config.error&&s.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function E(t){var e;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),_.call(this,t),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),c||(e.onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var i,f=this._config.downloadRequestHeaders;for(i in f)e.setRequestHeader(i,f[i])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,e.setRequestHeader("Range","bytes="+this._start+"-"+o));try{e.send(this._config.downloadRequestBody)}catch(h){this._chunkError(h.message)}c&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize||e.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(e),this.parseChunk(e.responseText)))},this._chunkError=function(i){i=e.statusText||i,this._sendError(new Error(i))}}function C(t){(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),_.call(this,t);var e,i,f=typeof FileReader<"u";this.stream=function(o){this._input=o,i=o.slice||o.webkitSlice||o.mozSlice,f?((e=new FileReader).onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,h=(this._config.chunkSize&&(h=Math.min(this._start+this._config.chunkSize,this._input.size),o=i.call(o,this._start,h)),e.readAsText(o,this._config.encoding));f||this._chunkLoaded({target:{result:h}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(e.error)}}function I(t){var e;_.call(this,t=t||{}),this.stream=function(i){return e=i,this._nextChunk()},this._nextChunk=function(){var i,f;if(!this._finished)return i=this._config.chunkSize,e=i?(f=e.substring(0,i),e.substring(i)):(f=e,""),this._finished=!e,this.parseChunk(f)}}function A(t){_.call(this,t=t||{});var e=[],i=!0,f=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):i=!0},this._streamData=ee(function(o){try{e.push(typeof o=="string"?o:o.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(h){this._streamError(h)}},this),this._streamError=ee(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=ee(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function U(t){var e,i,f,o,h=Math.pow(2,53),L=-h,D=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,N=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,F=0,v=0,V=!1,w=!1,O=[],p={data:[],errors:[],meta:{}};function H(R){return t.skipEmptyLines==="greedy"?R.join("").trim()==="":R.length===1&&R[0].length===0}function W(){if(p&&f&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),f=!1),t.skipEmptyLines&&(p.data=p.data.filter(function(m){return!H(m)})),Z()){let m=function(B,Q){x(t.transformHeader)&&(B=t.transformHeader(B,Q)),O.push(B)};if(p)if(Array.isArray(p.data[0])){for(var R=0;Z()&&R<p.data.length;R++)p.data[R].forEach(m);p.data.splice(0,1)}else p.data.forEach(m)}function T(m,B){for(var Q=t.header?{}:[],P=0;P<m.length;P++){var M=P,S=m[P],S=((ae,k)=>(z=>(t.dynamicTypingFunction&&t.dynamicTyping[z]===void 0&&(t.dynamicTyping[z]=t.dynamicTypingFunction(z)),(t.dynamicTyping[z]||t.dynamicTyping)===!0))(ae)?k==="true"||k==="TRUE"||k!=="false"&&k!=="FALSE"&&((z=>{if(D.test(z)&&(z=parseFloat(z),L<z&&z<h))return 1})(k)?parseFloat(k):N.test(k)?new Date(k):k===""?null:k):k)(M=t.header?P>=O.length?"__parsed_extra":O[P]:M,S=t.transform?t.transform(S,M):S);M==="__parsed_extra"?(Q[M]=Q[M]||[],Q[M].push(S)):Q[M]=S}return t.header&&(P>O.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+P,v+B):P<O.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+P,v+B)),Q}var q;p&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(T),q=p.data.length):p.data=T(p.data,0),t.header&&p.meta&&(p.meta.fields=O),v+=q)}function Z(){return t.header&&O.length===0}function ie(R,T,q,m){R={type:R,code:T,message:q},m!==void 0&&(R.row=m),p.errors.push(R)}x(t.step)&&(o=t.step,t.step=function(R){p=R,Z()?W():(W(),p.data.length!==0&&(F+=R.data.length,t.preview&&F>t.preview?i.abort():(p.data=p.data[0],o(p,b))))}),this.parse=function(R,T,q){var m=t.quoteChar||'"',m=(t.newline||(t.newline=this.guessLineEndings(R,m)),f=!1,t.delimiter?x(t.delimiter)&&(t.delimiter=t.delimiter(R),p.meta.delimiter=t.delimiter):((m=((B,Q,P,M,S)=>{var ae,k,z,ve;S=S||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var we=0;we<S.length;we++){for(var oe,Re=S[we],X=0,le=0,G=0,te=(z=void 0,new $({comments:M,delimiter:Re,newline:Q,preview:10}).parse(B)),_e=0;_e<te.data.length;_e++)P&&H(te.data[_e])?G++:(oe=te.data[_e].length,le+=oe,z===void 0?z=oe:0<oe&&(X+=Math.abs(oe-z),z=oe));0<te.data.length&&(le/=te.data.length-G),(k===void 0||X<=k)&&(ve===void 0||ve<le)&&1.99<le&&(k=X,ae=Re,ve=le)}return{successful:!!(t.delimiter=ae),bestDelimiter:ae}})(R,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=m.bestDelimiter:(f=!0,t.delimiter=a.DefaultDelimiter),p.meta.delimiter=t.delimiter),he(t));return t.preview&&t.header&&m.preview++,e=R,i=new $(m),p=i.parse(e,T,q),W(),V?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,i.abort(),e=x(t.chunk)?"":e.substring(i.getCharIndex())},this.resume=function(){b.streamer._halted?(V=!1,b.streamer.parseChunk(e,!0)):setTimeout(b.resume,3)},this.aborted=function(){return w},this.abort=function(){w=!0,i.abort(),p.meta.aborted=!0,x(t.complete)&&t.complete(p),e=""},this.guessLineEndings=function(B,m){B=B.substring(0,1048576);var m=new RegExp(K(m)+"([^]*?)"+K(m),"gm"),q=(B=B.replace(m,"")).split("\r"),m=B.split(`
`),B=1<m.length&&m[0].length<q[0].length;if(q.length===1||B)return`
`;for(var Q=0,P=0;P<q.length;P++)q[P][0]===`
`&&Q++;return Q>=q.length/2?`\r
`:"\r"}}function K(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $(t){var e=(t=t||{}).delimiter,i=t.newline,f=t.comments,o=t.step,h=t.preview,L=t.fastMode,D=null,N=!1,b=t.quoteChar==null?'"':t.quoteChar,F=b;if(t.escapeChar!==void 0&&(F=t.escapeChar),(typeof e!="string"||-1<a.BAD_DELIMITERS.indexOf(e))&&(e=","),f===e)throw new Error("Comment character same as delimiter");f===!0?f="#":(typeof f!="string"||-1<a.BAD_DELIMITERS.indexOf(f))&&(f=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var v=0,V=!1;this.parse=function(w,O,p){if(typeof w!="string")throw new Error("Input must be a string");var H=w.length,W=e.length,Z=i.length,ie=f.length,R=x(o),T=[],q=[],m=[],B=v=0;if(!w)return X();if(L||L!==!1&&w.indexOf(b)===-1){for(var Q=w.split(i),P=0;P<Q.length;P++){if(m=Q[P],v+=m.length,P!==Q.length-1)v+=i.length;else if(p)return X();if(!f||m.substring(0,ie)!==f){if(R){if(T=[],ve(m.split(e)),le(),V)return X()}else ve(m.split(e));if(h&&h<=P)return T=T.slice(0,h),X(!0)}}return X()}for(var M=w.indexOf(e,v),S=w.indexOf(i,v),ae=new RegExp(K(F)+K(b),"g"),k=w.indexOf(b,v);;)if(w[v]===b)for(k=v,v++;;){if((k=w.indexOf(b,k+1))===-1)return p||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:v}),oe();if(k===H-1)return oe(w.substring(v,k).replace(ae,b));if(b===F&&w[k+1]===F)k++;else if(b===F||k===0||w[k-1]!==F){M!==-1&&M<k+1&&(M=w.indexOf(e,k+1));var z=we((S=S!==-1&&S<k+1?w.indexOf(i,k+1):S)===-1?M:Math.min(M,S));if(w.substr(k+1+z,W)===e){m.push(w.substring(v,k).replace(ae,b)),w[v=k+1+z+W]!==b&&(k=w.indexOf(b,v)),M=w.indexOf(e,v),S=w.indexOf(i,v);break}if(z=we(S),w.substring(k+1+z,k+1+z+Z)===i){if(m.push(w.substring(v,k).replace(ae,b)),Re(k+1+z+Z),M=w.indexOf(e,v),k=w.indexOf(b,v),R&&(le(),V))return X();if(h&&T.length>=h)return X(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:v}),k++}}else if(f&&m.length===0&&w.substring(v,v+ie)===f){if(S===-1)return X();v=S+Z,S=w.indexOf(i,v),M=w.indexOf(e,v)}else if(M!==-1&&(M<S||S===-1))m.push(w.substring(v,M)),v=M+W,M=w.indexOf(e,v);else{if(S===-1)break;if(m.push(w.substring(v,S)),Re(S+Z),R&&(le(),V))return X();if(h&&T.length>=h)return X(!0)}return oe();function ve(G){T.push(G),B=v}function we(G){var te=0;return te=G!==-1&&(G=w.substring(k+1,G))&&G.trim()===""?G.length:te}function oe(G){return p||(G===void 0&&(G=w.substring(v)),m.push(G),v=H,ve(m),R&&le()),X()}function Re(G){v=G,ve(m),m=[],S=w.indexOf(i,v)}function X(G){if(t.header&&!O&&T.length&&!N){var te=T[0],_e=Object.create(null),De=new Set(te);let Je=!1;for(let ke=0;ke<te.length;ke++){let ue=te[ke];if(_e[ue=x(t.transformHeader)?t.transformHeader(ue,ke):ue]){let Se,Ge=_e[ue];for(;Se=ue+"_"+Ge,Ge++,De.has(Se););De.add(Se),te[ke]=Se,_e[ue]++,Je=!0,(D=D===null?{}:D)[Se]=ue}else _e[ue]=1,te[ke]=ue;De.add(ue)}Je&&console.warn("Duplicate headers found and renamed."),N=!0}return{data:T,errors:q,meta:{delimiter:e,linebreak:i,aborted:V,truncated:!!G,cursor:B+(O||0),renamedHeaders:D}}}function le(){o(X()),T=[],q=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return v}}function J(t){var e=t.data,i=g[e.workerId],f=!1;if(e.error)i.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){f=!0,se(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ge,resume:ge};if(x(i.userStep)){for(var h=0;h<e.results.data.length&&(i.userStep({data:e.results.data[h],errors:e.results.errors,meta:e.results.meta},o),!f);h++);delete e.results}else x(i.userChunk)&&(i.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!f&&se(e.workerId,e.results)}function se(t,e){var i=g[t];x(i.userComplete)&&i.userComplete(e),i.terminate(),delete g[t]}function ge(){throw new Error("Not implemented.")}function he(t){if(typeof t!="object"||t===null)return t;var e,i=Array.isArray(t)?[]:{};for(e in t)i[e]=he(t[e]);return i}function ee(t,e){return function(){t.apply(e,arguments)}}function x(t){return typeof t=="function"}return a.parse=function(t,e){var i=(e=e||{}).dynamicTyping||!1;if(x(i)&&(e.dynamicTypingFunction=i,i={}),e.dynamicTyping=i,e.transform=!!x(e.transform)&&e.transform,!e.worker||!a.WORKERS_SUPPORTED)return i=null,a.NODE_STREAM_INPUT,typeof t=="string"?(t=(f=>f.charCodeAt(0)!==65279?f:f.slice(1))(t),i=new(e.download?E:I)(e)):t.readable===!0&&x(t.read)&&x(t.on)?i=new A(e):(s.File&&t instanceof File||t instanceof Object)&&(i=new C(e)),i.stream(t);(i=(()=>{var f;return!!a.WORKERS_SUPPORTED&&(f=(()=>{var o=s.URL||s.webkitURL||null,h=u.toString();return a.BLOB_URL||(a.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",h,")();"],{type:"text/javascript"})))})(),(f=new s.Worker(f)).onmessage=J,f.id=j++,g[f.id]=f)})()).userStep=e.step,i.userChunk=e.chunk,i.userComplete=e.complete,i.userError=e.error,e.step=x(e.step),e.chunk=x(e.chunk),e.complete=x(e.complete),e.error=x(e.error),delete e.worker,i.postMessage({input:t,config:e,workerId:i.id})},a.unparse=function(t,e){var i=!1,f=!0,o=",",h=`\r
`,L='"',D=L+L,N=!1,b=null,F=!1,v=((()=>{if(typeof e=="object"){if(typeof e.delimiter!="string"||a.BAD_DELIMITERS.filter(function(O){return e.delimiter.indexOf(O)!==-1}).length||(o=e.delimiter),typeof e.quotes!="boolean"&&typeof e.quotes!="function"&&!Array.isArray(e.quotes)||(i=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(N=e.skipEmptyLines),typeof e.newline=="string"&&(h=e.newline),typeof e.quoteChar=="string"&&(L=e.quoteChar),typeof e.header=="boolean"&&(f=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");b=e.columns}e.escapeChar!==void 0&&(D=e.escapeChar+L),e.escapeFormulae instanceof RegExp?F=e.escapeFormulae:typeof e.escapeFormulae=="boolean"&&e.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp(K(L),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return V(null,t,N);if(typeof t[0]=="object")return V(b||Object.keys(t[0]),t,N)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||b),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),V(t.fields||[],t.data||[],N);throw new Error("Unable to serialize unrecognized input");function V(O,p,H){var W="",Z=(typeof O=="string"&&(O=JSON.parse(O)),typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(O)&&0<O.length),ie=!Array.isArray(p[0]);if(Z&&f){for(var R=0;R<O.length;R++)0<R&&(W+=o),W+=w(O[R],R);0<p.length&&(W+=h)}for(var T=0;T<p.length;T++){var q=(Z?O:p[T]).length,m=!1,B=Z?Object.keys(p[T]).length===0:p[T].length===0;if(H&&!Z&&(m=H==="greedy"?p[T].join("").trim()==="":p[T].length===1&&p[T][0].length===0),H==="greedy"&&Z){for(var Q=[],P=0;P<q;P++){var M=ie?O[P]:P;Q.push(p[T][M])}m=Q.join("").trim()===""}if(!m){for(var S=0;S<q;S++){0<S&&!B&&(W+=o);var ae=Z&&ie?O[S]:S;W+=w(p[T][ae],S)}T<p.length-1&&(!H||0<q&&!B)&&(W+=h)}}return W}function w(O,p){var H,W;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(W=!1,F&&typeof O=="string"&&F.test(O)&&(O="'"+O,W=!0),H=O.toString().replace(v,D),(W=W||i===!0||typeof i=="function"&&i(O,p)||Array.isArray(i)&&i[p]||((Z,ie)=>{for(var R=0;R<ie.length;R++)if(-1<Z.indexOf(ie[R]))return!0;return!1})(H,a.BAD_DELIMITERS)||-1<H.indexOf(o)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?L+H+L:H)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!c&&!!s.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=$,a.ParserHandle=U,a.NetworkStreamer=E,a.FileStreamer=C,a.StringStreamer=I,a.ReadableStreamStreamer=A,s.jQuery&&((l=s.jQuery).fn.parse=function(t){var e=t.config||{},i=[];return this.each(function(h){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)i.push({file:this.files[L],inputElem:this,instanceConfig:l.extend({},e)})}),f(),this;function f(){if(i.length===0)x(t.complete)&&t.complete();else{var h,L,D,N,b=i[0];if(x(t.before)){var F=t.before(b.file,b.inputElem);if(typeof F=="object"){if(F.action==="abort")return h="AbortError",L=b.file,D=b.inputElem,N=F.reason,void(x(t.error)&&t.error({name:h},L,D,N));if(F.action==="skip")return void o();typeof F.config=="object"&&(b.instanceConfig=l.extend(b.instanceConfig,F.config))}else if(F==="skip")return void o()}var v=b.instanceConfig.complete;b.instanceConfig.complete=function(V){x(v)&&v(V,b.file,b.inputElem),o()},a.parse(b.file,b.instanceConfig)}}function o(){i.splice(0,1),f()}}),d&&(s.onmessage=function(t){t=t.data,a.WORKER_ID===void 0&&t&&(a.WORKER_ID=t.workerId),typeof t.input=="string"?s.postMessage({workerId:a.WORKER_ID,results:a.parse(t.input,t.config),finished:!0}):(s.File&&t.input instanceof File||t.input instanceof Object)&&(t=a.parse(t.input,t.config))&&s.postMessage({workerId:a.WORKER_ID,results:t,finished:!0})}),(E.prototype=Object.create(_.prototype)).constructor=E,(C.prototype=Object.create(_.prototype)).constructor=C,(I.prototype=Object.create(I.prototype)).constructor=I,(A.prototype=Object.create(_.prototype)).constructor=A,a})})(Fe)),Fe.exports}var Ft=At();const nt=jt(Ft);async function Pt(){let r=Oe.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(r,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+r),[];let u=await n.json();return u.sort((s,l)=>s.name<l.name?-1:s.name>l.name?1:0),u}async function Dt(r){const n=Oe.PUBLIC_TEMPLE_URL+`solutions/get_detail/${r}`;let u=await fetch(n,{cache:"no-store"});if(!u.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await u.json()}async function lr(r,n,u,s="",l=0,c=1){const d=new URL(Oe.PUBLIC_TEMPLE_URL+"solutions/get_full_ts");d.searchParams.set("solution_name",r),d.searchParams.set("components",n.join(",")),d.searchParams.set("unit_component",s),d.searchParams.set("scenario",u),d.searchParams.set("year",l.toString()),d.searchParams.set("rolling_average_size",c.toString());const g=d.toString();let j=await fetch(g,{cache:"no-store"});if(!j.ok)throw alert("Error when fetching "+g),new Error("Error when fetching "+g);let a=await j.json();for(const _ in a)_=="unit"||a[_]===void 0||(a[_]=He(a[_]));return a.unit=Qe(a.unit||""),a}async function ur(r,n,u,s=""){let l=new URL(Oe.PUBLIC_TEMPLE_URL+"solutions/get_total");l.searchParams.set("solution_name",r),l.searchParams.set("components",n.join(",")),l.searchParams.set("scenario",u),l.searchParams.set("unit_component",s);const c=l.toString();let d=await fetch(c,{cache:"no-store"});if(!d.ok)throw alert("Error when fetching "+c),new Error("Error when fetching "+c);let g=await d.json();for(const j in g)j=="unit"||g[j]===void 0||(g[j]=Nt(He(g[j])));return g.unit=Qe(g.unit||""),g}async function fr(r,n,u){let s=await(await fetch(Oe.PUBLIC_TEMPLE_URL+`solutions/get_unit/${r}/${n}?scenario=${u}`,{cache:"no-store"})).json();return Qe(s)}async function cr(r,n,u,s,l,c){const d=Oe.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${r}/${n}/${u}?scenario=${s}&year=${l}&rolling_average_size=${c}`;let g=await fetch(d,{cache:"no-store"});if(!g.ok)throw alert("Could not fetch "+d),new Error("Could not fetch "+d);let j=await g.json(),a=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output"],_={};for(const E of a)j[E]!==void 0&&(_[E]=He(j[E]));return _}function He(r){if(r.slice(0,r.indexOf(`
`)).split(",").length==2){let l=r.split(`
`),c="",d="";for(const g of l.slice(1,l.length)){if(g=="")continue;let j=g.split(",");c+=j[0]+",",d+=j[1]+","}r=c.substring(0,c.length-1)+`
`+d.substring(0,d.length-1)}return r.slice(-1)==`
`&&(r=r.slice(0,-1)),nt.parse(r,{delimiter:",",header:!0,newline:`
`})}function Qe(r){return r.slice(-1)==`
`&&(r=r.slice(0,r.length-1)),nt.parse(r,{delimiter:",",header:!0,newline:`
`})}function Nt(r){return r.data=r.data.filter(n=>Object.keys(n).some(u=>!Number.isNaN(Number(u))&&!Number.isNaN(n[u])&&Math.abs(n[u])>0)),r}const Ee=[["rgb(122, 157, 207)","rgb(8, 64, 126)","rgb(166, 190, 223)","rgb(33, 92, 175)","rgb(211, 222, 239)","rgb(77, 125, 191)"],["rgb(212, 134, 129)","rgb(150, 39, 45)","rgb(226, 174, 171)","rgb(183, 53, 45)","rgb(241, 215, 213)","rgb(197, 93, 87)"],["rgb(102, 175, 192)","rgb(0, 89, 109)","rgb(153, 202, 213)","rgb(0, 120, 148)","rgb(204, 228, 234)","rgb(51, 149, 171)"],["rgb(202, 108, 174)","rgb(140, 10, 89)","rgb(220, 158, 201)","rgb(167, 17, 122)","rgb(239, 208, 227)","rgb(183, 59, 146)"],["rgb(161, 171, 113)","rgb(54, 82, 19)","rgb(192, 199, 161)","rgb(98, 115, 19)","rgb(224, 227, 208)","rgb(129, 143, 66)"],["rgb(187, 164, 113)","rgb(112, 79, 18)","rgb(210, 194, 161)","rgb(142, 103, 19)","rgb(232, 225, 208)","rgb(165, 133, 66)"]];let Le=0,Te=0;function dr(){Le=0,Te=0}function Mt(){Le>=Ee.length&&(Le=0,Te++,Te>=Ee[0].length&&(Te=0));const r=Ee[Le][Te];return Le++,r}function Ut(r,n=.8){return r.replace("rgb","rgba").replace(")",`, ${n})`)}function hr(){let r=[];for(let n=0;n<Ee.length;n++)for(let u=0;u<Ee[0].length;u++)r.push(Ee[u][n]);return r}function _r(r,n,u,s=[],l=!1,c="bar",d=""){if(r.length==0)return[];let g=Object.keys(r[0]).filter(_=>!isNaN(Number(_))&&!s.includes(Number(_))),j=Object.keys(n),a={};for(const _ of r){let E=!1;for(let A in n)if(!n[A].includes(_[A])){E=!0;break}if(E)continue;for(let A of Object.keys(u))if(!u[A].includes(_[A])){E=!0;break}if(E)continue;let C=[];for(let A of j)C.push(_[A]);let I=C.join("_")+d;I in a||(a[I]=Object.fromEntries(g.map(A=>[A,0])));for(let A of g){let U=Number(_[A]);_[A]=="inf"&&(U=1/0),a[I][A]+=U}}if(l){let _=Object.fromEntries(g.map(E=>[E,0]));for(let E of g)for(let C in a)_[E]+=a[C][E];for(let E of g)for(let C in a)_[E]==0?a[C][E]=0:a[C][E]*=1/_[E]}return Object.entries(a).filter(([,_])=>!Object.values(_).includes(NaN)).map(([_,E])=>{let C=Mt();return{label:_,data:Object.values(E),type:c,borderColor:C,backgroundColor:Ut(C)}})}function zt(r){return Array.from(new Set(r))}function pr(r){return r.map(n=>({value:n,label:n}))}function gr(r){let n={};r.forEach(s=>{Object.entries(s.data).forEach(([l,c])=>{!c||c<=0||(n[l]=(n[l]||0)+c)})});let u={};return r.forEach(s=>{Object.entries(s.data).forEach(([l,c])=>{!c||c>=0||(u[l]=(u[l]||0)-c)})}),r.map(s=>({...s,data:Object.values(Object.entries(s.data).reduce((l,[c,d])=>(d&&n[c]>0?l[c]=d/n[c]:d&&u[c]>0?l[c]=d/u[c]:l[c]=0,l),{}))}))}var qt=de('<div class="row mb-2"><div class="col-sm-3"><label class="fw-medium fs-4"> </label></div> <div class="col-sm-9"><!></div></div>');function Be(r,n){const u=et();var s=qt(),l=re(s),c=re(l),d=re(c,!0);Y(c),Y(l);var g=Pe(l,2),j=re(g);Ke(j,()=>n.content,()=>u),Y(g),Y(s),me(()=>{ye(c,"for",u),je(d,n.label)}),fe(r,s)}function Bt(r,n,u,s,l){ne(n,""),ne(u,""),ne(s,null),l()}function Wt(r,n,u){ne(n,""),u()}var Kt=de("<option> </option>"),Ht=de('<select class="form-select"></select>'),Qt=de("<option> </option>"),Jt=de('<select class="form-select"></select>'),Gt=de("<option> </option>"),Zt=de('<select class="form-select"></select>'),Yt=de("<!> <!> <!>",1);function vr(r,n){bt(n,!0);let u=be(n,"carriers",31,()=>Ce([])),s=be(n,"nodes",31,()=>Ce([])),l=be(n,"edges",31,()=>Ce([])),c=be(n,"years",31,()=>Ce([])),d=be(n,"selected_solution",15),g=be(n,"loading",15,!1),j=be(n,"disabled",3,!0),a=xe(Ce([])),_=xe(null),E=xe(""),C=xe(""),I=xe(""),A=Ne(()=>zt(y(a).map(e=>e.name.split(".")[0]))),U=Ne(()=>y(a).filter(e=>e.name.startsWith(y(E))).map(e=>e.name.split(".")[1]||null).filter(e=>e!=null)),K=Ne(()=>y(U).length==0?y(E)||null:y(C)?y(E)+"."+y(C):null);Et(async function(){ne(a,await Pt(),!0),ne(E,Me("solution")?.split(".")[0]||"",!0),ne(C,Me("solution")?.split(".")[1]||"",!0),ne(I,Me("scenario")||"",!0),$()});async function $(){if(y(K)==null){d(null);return}g(!0),ne(_,await Dt(y(K)),!0),Object.keys(y(_).scenarios).length==1?(ne(I,Object.keys(y(_).scenarios)[0],!0),J()):y(I)!=""&&y(I)in y(_).scenarios?J():d(null),g(!1)}function J(){y(_)==null||y(K)==null||(d({solution_name:y(K),scenario_name:y(I),detail:y(_).scenarios[y(I)],version:y(_).version}),Ot({solution:d().solution_name,scenario:Object.keys(y(_).scenarios).length>1?d().scenario_name:null}),u(d().detail.system.set_carriers.slice()),s(d().detail.system.set_nodes),l(Object.keys(d().detail.edges)),c([...Array(d().detail.system.optimized_years).keys()].map(e=>e*d().detail.system.interval_between_years+d().detail.system.reference_year)),n.solution_selected?.(d()))}var se=Yt(),ge=yt(se);Be(ge,{label:"Solution",content:(i,f=ce)=>{var o=Ht();o.__change=[Bt,C,I,_,$],Ue(o,21,()=>y(A),ze,(h,L)=>{var D=Kt(),N=re(D,!0);Y(D);var b={};me(()=>{je(N,y(L)),b!==(b=y(L))&&(D.value=(D.__value=y(L))??"")}),fe(h,D)}),Y(o),me(()=>{ye(o,"id",f()),o.disabled=j()}),qe(o,()=>y(E),h=>ne(E,h)),fe(i,o)}});var he=Pe(ge,2);{var ee=e=>{Be(e,{label:"Subsolution",content:(f,o=ce)=>{var h=Jt();h.__change=[Wt,I,$],Ue(h,21,()=>y(U),ze,(L,D)=>{var N=Qt(),b=re(N,!0);Y(N);var F={};me(()=>{je(b,y(D)),F!==(F=y(D))&&(N.value=(N.__value=y(D))??"")}),fe(L,N)}),Y(h),me(()=>{ye(h,"id",o()),h.disabled=j()}),qe(h,()=>y(C),L=>ne(C,L)),fe(f,h)}})};Ze(he,e=>{y(U).length>0&&e(ee)})}var x=Pe(he,2);{var t=e=>{Be(e,{label:"Scenario",content:(f,o=ce)=>{var h=Zt();h.__change=J,Ue(h,21,()=>Object.keys(y(_)?.scenarios||[]),ze,(L,D)=>{var N=Gt(),b=re(N,!0);Y(N);var F={};me(()=>{je(b,y(D)),F!==(F=y(D))&&(N.value=(N.__value=y(D))??"")}),fe(L,N)}),Y(h),me(()=>{ye(h,"id",o()),h.disabled=j()}),qe(h,()=>y(I),L=>ne(I,L)),fe(f,h)}})};Ze(x,e=>{y(_)&&Object.keys(y(_).scenarios).length>1&&e(t)})}fe(r,se),wt()}Rt(["change"]);var Vt=de('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function mr(r,n){var u=Vt(),s=re(u),l=re(s);Ke(l,()=>n.children??ce),Y(s),Y(u),fe(r,u)}var Xt=de('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function br(r,n){const u=et();var s=Xt(),l=re(s),c=re(l),d=re(c,!0);Y(c),Y(l);var g=Pe(l,2),j=re(g),a=re(j);Ke(a,()=>n.children??ce),Y(j),Y(g),Y(s),me(()=>{ye(c,"data-bs-target","#collapse"+u),ye(c,"aria-controls","collapse"+u),je(d,n.title),ye(g,"id","collapse"+u)}),fe(r,s)}export{mr as F,vr as S,fr as a,br as b,Be as c,lr as d,zt as e,_r as f,cr as g,ur as h,gr as i,qe as j,jt as k,or as l,hr as m,Mt as n,dr as r,pr as t};
