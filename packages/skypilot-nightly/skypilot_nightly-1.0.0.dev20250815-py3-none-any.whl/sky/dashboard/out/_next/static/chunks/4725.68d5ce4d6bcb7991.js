"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4725],{1812:function(e,s,r){r.d(s,{X:function(){return l}});var n=r(85893),t=r(67294);let a=e=>{if(!(null==e?void 0:e.message))return"An unexpected error occurred.";let s=e.message;return s.includes("failed:")&&(s=s.split("failed:")[1].trim()),s},l=e=>{let{error:s,title:r="Error",onDismiss:l}=e,[c,i]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{s&&i(!1)},[s]),!s||c)return null;let o="string"==typeof s?s:a(s);return(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3 mb-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,n.jsx)("div",{className:"ml-3",children:(0,n.jsxs)("div",{className:"text-sm text-red-800",children:[(0,n.jsxs)("strong",{children:[r,":"]})," ",o]})})]}),(0,n.jsx)("button",{onClick:()=>{i(!0),l&&l()},className:"flex-shrink-0 ml-4 text-red-400 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-red-50 rounded","aria-label":"Dismiss error",children:(0,n.jsx)("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}},99307:function(e,s,r){r.d(s,{Cl:function(){return c},OE:function(){return d}});var n=r(85893);r(67294);var t=r(55739),a=r(36989),l=r(53850);let c=e=>{switch(e){case"LAUNCHING":return"bg-blue-100 text-sky-blue";case"RUNNING":case"IN_USE":case"READY":return"bg-green-50 text-green-700";case"STOPPED":return"bg-yellow-100 text-yellow-800";case"TERMINATED":case"PENDING":case"UNKNOWN":default:return"bg-gray-100 text-gray-800";case"SUCCEEDED":case"PROVISIONING":case"CONTROLLER_INIT":case"REPLICA_INIT":return"bg-blue-50 text-blue-700";case"FAILED":case"FAILED_PRECHECKS":case"FAILED_NO_RESOURCE":case"FAILED_CONTROLLER":case"FAILED_INITIAL_DELAY":case"FAILED_PROBING":case"FAILED_PROVISION":case"FAILED_CLEANUP":case"CONTROLLER_FAILED":return"bg-red-50 text-red-700";case"CANCELLED":case"CANCELLING":case"NOT_READY":return"bg-yellow-50 text-yellow-700";case"RECOVERING":case"SHUTTING_DOWN":return"bg-orange-50 text-orange-700";case"SUBMITTED":return"bg-indigo-50 text-indigo-700";case"STARTING":return"bg-cyan-50 text-cyan-700";case"FAILED_SETUP":return"bg-pink-50 text-pink-700";case"PREEMPTED":case"NO_REPLICA":return"bg-purple-50 text-purple-700"}},i=e=>{switch(e){case"LAUNCHING":case"STARTING":case"PROVISIONING":case"SHUTTING_DOWN":return(0,n.jsx)(t.Z,{size:12,className:"w-3 h-3 mr-1"});case"RUNNING":case"IN_USE":default:return(0,n.jsx)(l.W2,{className:"w-3 h-3 mr-1"});case"STOPPED":case"PREEMPTED":return(0,n.jsx)(l.fp,{className:"w-3 h-3 mr-1"});case"TERMINATED":case"FAILED":case"CANCELLED":case"FAILED_INITIAL_DELAY":case"FAILED_PROBING":case"FAILED_PROVISION":case"FAILED_CLEANUP":case"CONTROLLER_FAILED":case"UNKNOWN":return(0,n.jsx)(l.Ps,{className:"w-3 h-3 mr-1"});case"SUCCEEDED":return(0,n.jsx)(l.Ye,{className:"w-3 h-3 mr-1"});case"PENDING":case"RECOVERING":case"SUBMITTED":case"CANCELLING":case"FAILED_SETUP":case"FAILED_PRECHECKS":case"FAILED_NO_RESOURCE":case"FAILED_CONTROLLER":case"READY":case"NOT_READY":case"CONTROLLER_INIT":case"REPLICA_INIT":case"NO_REPLICA":return(0,n.jsx)(l.J$,{className:"w-3 h-3 mr-1"})}},o=e=>{let s=c(e),r=i(e);return(0,n.jsxs)("span",{className:"".concat("inline-flex items-center px-2 py-1 rounded-full text-sm"," ").concat(s),children:[r,e]})},d=e=>{let{status:s}=e;return(0,n.jsx)(a.WH,{content:s,className:"text-muted-foreground text-sm",children:(0,n.jsx)("span",{children:o(s)})})}},54725:function(e,s,r){r.r(s),r.d(s,{Volumes:function(){return C}});var n=r(85893),t=r(67294),a=r(45697),l=r.n(a),c=r(55739),i=r(65168),o=r(30803),d=r(68764),u=r(19238),h=r(51214),x=r(94545),m=r(13626),N=r(47603),j=r(23001),p=r(37673),g=r(50326),f=r(1812),E=r(41664),v=r.n(E),I=r(36989),w=r(99307),y=r(6378),L=r(36856);let b=h.nb.REFRESH_INTERVAL;function C(){let[e,s]=(0,t.useState)(!1),r=(0,t.useRef)(null),a=(0,j.X)(),[l,i]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),[x,N]=(0,t.useState)(null),[p,E]=(0,t.useState)(!1),I=()=>{y.default.invalidate(u.C),r.current&&r.current()},w=async()=>{if(d){E(!0),N(null);try{let e=await (0,u.w)(d.name);if(!e.success)throw Error(e.msg);i(!1),h(null),I()}catch(e){N(e)}finally{E(!1)}}},C=()=>{i(!1),h(null),N(null)};return(0,t.useEffect)(()=>{L.ZP.preloadForPage("volumes")},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4 h-5",children:[(0,n.jsx)("div",{className:"text-base",children:(0,n.jsx)(v(),{href:"/volumes",className:"text-sky-blue hover:underline leading-none",children:"Volumes"})}),(0,n.jsxs)("div",{className:"flex items-center",children:[e&&(0,n.jsxs)("div",{className:"flex items-center mr-2",children:[(0,n.jsx)(c.Z,{size:15,className:"mt-0"}),(0,n.jsx)("span",{className:"ml-2 text-gray-500 text-sm",children:"Loading..."})]}),(0,n.jsxs)("button",{onClick:I,disabled:e,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 mr-1.5"}),!a&&(0,n.jsx)("span",{children:"Refresh"})]})]})]}),(0,n.jsx)(R,{refreshInterval:b,setLoading:s,refreshDataRef:r,onDeleteVolume:e=>{h(e),i(!0),N(null)}},"volumes"),(0,n.jsx)(g.Vq,{open:l,onOpenChange:C,children:(0,n.jsxs)(g.cZ,{className:"sm:max-w-md",children:[(0,n.jsxs)(g.fK,{children:[(0,n.jsx)(g.$N,{children:"Delete Volume"}),(0,n.jsxs)(g.Be,{children:['Are you sure you want to delete volume "',(null==d?void 0:d.name)||"this volume",'"? This action cannot be undone.']})]}),(0,n.jsx)(f.X,{error:x,title:"Deletion Failed",onDismiss:()=>N(null)}),(0,n.jsxs)(g.cN,{children:[(0,n.jsx)(o.z,{variant:"outline",onClick:C,disabled:p,children:"Cancel"}),(0,n.jsx)(o.z,{variant:"destructive",onClick:w,disabled:p,children:p?"Deleting...":"Delete"})]})]})})]})}function R(e){let{refreshInterval:s,setLoading:r,refreshDataRef:a,onDeleteVolume:l}=e,[i,h]=(0,t.useState)([]),[m,j]=(0,t.useState)({key:null,direction:"ascending"}),[g,f]=(0,t.useState)(!1),[E,v]=(0,t.useState)(!0),[L,b]=(0,t.useState)(1),[C,R]=(0,t.useState)(10),D=(0,t.useCallback)(async()=>{r(!0),f(!0);try{let e=await y.default.get(u.C);h(e)}catch(e){console.error("Failed to fetch volumes:",e),h([])}finally{r(!1),f(!1),v(!1)}},[r]),_=(0,t.useMemo)(()=>(0,x.R0)(i,m.key,m.direction),[i,m]);(0,t.useEffect)(()=>{a&&(a.current=D)},[a,D]),(0,t.useEffect)(()=>{h([]);let e=!0;D();let r=setInterval(()=>{e&&D()},s);return()=>{e=!1,clearInterval(r)}},[s,D]),(0,t.useEffect)(()=>{b(1)},[i.length]);let k=e=>{let s="ascending";m.key===e&&"ascending"===m.direction&&(s="descending"),j({key:e,direction:s})},S=e=>m.key===e?"ascending"===m.direction?" ↑":" ↓":"",O=Math.ceil(_.length/C),T=(L-1)*C,P=T+C,F=_.slice(T,P),U=e=>e||"-",z=e=>{if(!e)return"N/A";try{let s=new Date(1e3*e);return(0,n.jsx)(I.Zg,{date:s})}catch(e){return"Invalid Date"}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(p.Zb,{children:(0,n.jsx)("div",{className:"overflow-x-auto rounded-lg",children:(0,n.jsxs)(d.iA,{className:"min-w-full",children:[(0,n.jsx)(d.xD,{children:(0,n.jsxs)(d.SC,{children:[(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("name"),children:["Name",S("name")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("infra"),children:["Infra",S("infra")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("status"),children:["Status",S("status")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("size"),children:["Size",S("size")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("user_name"),children:["User",S("user_name")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("last_attached_at"),children:["Last Use",S("last_attached_at")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("type"),children:["Type",S("type")]}),(0,n.jsxs)(d.ss,{className:"sortable whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>k("usedby_clusters"),children:["Used By",S("usedby_clusters")]}),(0,n.jsx)(d.ss,{children:"Actions"})]})}),(0,n.jsx)(d.RM,{children:g&&E?(0,n.jsx)(d.SC,{children:(0,n.jsx)(d.pj,{colSpan:11,className:"text-center py-6 text-gray-500",children:(0,n.jsxs)("div",{className:"flex justify-center items-center",children:[(0,n.jsx)(c.Z,{size:20,className:"mr-2"}),(0,n.jsx)("span",{children:"Loading..."})]})})}):F.length>0?F.map(e=>(0,n.jsxs)(d.SC,{children:[(0,n.jsx)(d.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(d.pj,{children:e.infra||"N/A"}),(0,n.jsx)(d.pj,{children:(0,n.jsx)(w.OE,{status:e.status})}),(0,n.jsx)(d.pj,{children:U(e.size)}),(0,n.jsx)(d.pj,{children:e.user_name||"N/A"}),(0,n.jsx)(d.pj,{children:z(e.last_attached_at)}),(0,n.jsx)(d.pj,{children:e.type||"N/A"}),(0,n.jsx)(d.pj,{children:(0,n.jsx)(A,{clusters:e.usedby_clusters,pods:e.usedby_pods})}),(0,n.jsx)(d.pj,{children:(0,n.jsx)(o.z,{variant:"ghost",size:"sm",onClick:()=>l(e),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete volume",children:(0,n.jsx)(N.Z,{className:"w-4 h-4"})})})]},e.name)):(0,n.jsx)(d.SC,{children:(0,n.jsx)(d.pj,{colSpan:11,className:"text-center py-6 text-gray-500",children:"No volumes found"})})})]})})}),i.length>0&&(0,n.jsx)("div",{className:"flex justify-end items-center py-2 px-4 text-sm text-gray-700",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-2",children:"Rows per page:"}),(0,n.jsxs)("div",{className:"relative inline-block",children:[(0,n.jsxs)("select",{value:C,onChange:e=>{R(parseInt(e.target.value,10)),b(1)},className:"py-1 pl-2 pr-6 appearance-none outline-none cursor-pointer border-none bg-transparent",style:{minWidth:"40px"},children:[(0,n.jsx)("option",{value:10,children:"10"}),(0,n.jsx)("option",{value:30,children:"30"}),(0,n.jsx)("option",{value:50,children:"50"}),(0,n.jsx)("option",{value:100,children:"100"}),(0,n.jsx)("option",{value:200,children:"200"})]}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500 absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,n.jsxs)("div",{children:[T+1," – ",Math.min(P,i.length)," of"," ",i.length]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>{b(e=>Math.max(e-1,1))},disabled:1===L,className:"text-gray-500 h-8 w-8 p-0",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-left",children:(0,n.jsx)("path",{d:"M15 18l-6-6 6-6"})})}),(0,n.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>{b(e=>Math.min(e+1,O))},disabled:L===O||0===O,className:"text-gray-500 h-8 w-8 p-0",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-right",children:(0,n.jsx)("path",{d:"M9 18l6-6-6-6"})})})]})]})})]})}function A(e){let{clusters:s,pods:r}=e,[a,l]=(0,t.useState)(null),c=Array.isArray(s)&&s.length>0?s:Array.isArray(r)&&r.length>0?r:[],o=Array.isArray(s)&&s.length>0;if(!c||0===c.length)return"N/A";let d=c.slice(0,2),u=c.slice(2);return(0,n.jsxs)(n.Fragment,{children:[d.map((e,s)=>(0,n.jsxs)("span",{children:[o?(0,n.jsx)(v(),{href:"/clusters/".concat(encodeURIComponent(e)),className:"text-sky-blue hover:underline",children:e}):(0,n.jsx)("span",{children:e}),s<d.length-1?", ":""]},e)),u.length>0&&(0,n.jsxs)(n.Fragment,{children:[","," ",(0,n.jsxs)("span",{className:"text-sky-blue cursor-pointer underline",onClick:e=>{l(e.currentTarget)},style:{userSelect:"none"},children:["+",u.length," more"]}),(0,n.jsx)(i.ZP,{open:!!a,anchorEl:a,onClose:()=>{l(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,n.jsx)("div",{style:{padding:12,maxWidth:300},children:u.map(e=>(0,n.jsx)("div",{style:{marginBottom:4},children:o?(0,n.jsx)(v(),{href:"/clusters/".concat(encodeURIComponent(e)),className:"text-sky-blue hover:underline",children:e}):(0,n.jsx)("span",{children:e})},e))})})]})]})}R.propTypes={refreshInterval:l().number.isRequired,setLoading:l().func.isRequired,refreshDataRef:l().shape({current:l().func}).isRequired,onDeleteVolume:l().func.isRequired}},23001:function(e,s,r){r.d(s,{X:function(){return t}});var n=r(67294);function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768,[s,r]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let s=()=>{r(window.innerWidth<e)};return s(),window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[e]),s}}}]);