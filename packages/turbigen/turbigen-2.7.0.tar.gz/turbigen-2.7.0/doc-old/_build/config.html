<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Configuration file format &#8212; turbigen 1.10.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=a66d8bb5" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <script src="_static/documentation_options.js?v=b95c35c0"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>window.MathJax = {"tex": {"macros": {"Ma": "{M\\kern-.1ema}", "Rey": "{R\\kern-.1eme}", "htr": "{\\mathit{HTR}}", "inn": "{\\mathrm{in}}", "out": "{\\mathrm{out}}", "rel": "{\\mathrm{rel}}", "Chi": "{\\hat{\\chi}}", "TE": "{\\mathrm{TE}}", "LE": "{\\mathrm{LE}}", "dee": "\\mathrm{d}", "RR": "{\\mathit{RR}}", "VmR": "{\\mathit{VR}}"}}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fluids" href="fluid.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" />

  <link rel="stylesheet" href="_static/custom.css" type="text/css" />





  </head><body>
  <div class="document">

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">turbigen</a></h1>



<p class="blurb">Version 1.10.1</p>






<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="nomenclature.html">Nomenclature</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Command-line options</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration file format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#workdir">workdir</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inlet">inlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mean-line">mean_line</a></li>
<li class="toctree-l2"><a class="reference internal" href="#annulus">annulus</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blades">blades</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mesh">mesh</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solver">solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operating-point">operating_point</a></li>
<li class="toctree-l2"><a class="reference internal" href="#iterate">iterate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#job">job</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fluid.html">Fluids</a></li>
<li class="toctree-l1"><a class="reference internal" href="meanline.html">Mean-line</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh.html">Meshing</a></li>
<li class="toctree-l1"><a class="reference internal" href="solver.html">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="post.html">Post-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="tutorial.html" title="previous chapter">Tutorial</a></li>
      <li>Next: <a href="fluid.html" title="next chapter">Fluids</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">


          <div class="body" role="main">

  <section id="configuration-file-format">
<h1>Configuration file format<a class="headerlink" href="#configuration-file-format" title="Link to this heading">¶</a></h1>
<p>The working example below illustrates the general layout of a <strong class="program">turbigen</strong> configuration file. More specimens are available in the <code class="file docutils literal notranslate"><span class="pre">examples</span></code> directory.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Annotated minimal example configuration to run a turbine cascade</span>
<span class="c1">#</span>

<span class="c1"># All files relating to the case are held in a working directory</span>
<span class="nt">workdir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">runs/turbine_cascade_ts4</span>

<span class="c1"># Perfect gas inlet state</span>
<span class="nt">inlet</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Po</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e5</span><span class="w">  </span><span class="c1"># Stagnation pressure [Pa]</span>
<span class="w">  </span><span class="nt">To</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300.</span><span class="w">  </span><span class="c1"># Stagnation temperature [K]</span>
<span class="w">  </span><span class="nt">cp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1005.</span><span class="w">  </span><span class="c1"># Specific heat capacity at constant pressure [J/kg/K]</span>
<span class="w">  </span><span class="nt">mu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.8e-5</span><span class="w">  </span><span class="c1"># Working fluid dynamic viscosity [kg/m/s]</span>
<span class="w">  </span><span class="nt">gamma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.4</span><span class="w">  </span><span class="c1"># Working fluid ratio of specific heats [-]</span>

<span class="c1"># Mean-line design</span>
<span class="nt">mean_line</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">turbine_cascade</span><span class="w">  </span><span class="c1"># Choose turbomachine from turbigen.meanline</span>
<span class="w">  </span><span class="c1"># Aerodynamic parameters required for mean-line design</span>
<span class="w">  </span><span class="nt">span</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">Alpha</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">40.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-65.</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">Ma2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="w">  </span><span class="nt">Yh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">  </span><span class="nt">htr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>

<span class="c1"># Annulus shape using meridional aspect ratios</span>
<span class="nt">annulus</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AR_gap</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.8</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.9</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Span to inlet/exit boundary distance</span>
<span class="w">  </span><span class="nt">AR_chord</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.6</span><span class="w">  </span><span class="c1"># Span to chord</span>

<span class="c1"># Blade shapes</span>
<span class="nt">blades</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># List of rows</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Co</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span><span class="w">  </span><span class="c1"># Set number of blades using circulation coeff</span>
<span class="w">    </span><span class="nt">sections</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># List of sections for this row</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Span fraction</span>
<span class="w">        </span><span class="c1"># Vector of thickness parameters</span>
<span class="w">        </span><span class="nt">q_thick</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.05</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.18</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="c1"># Vector of camber parameters</span>
<span class="w">        </span><span class="nt">qstar_camber</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="c1"># - ...</span>
<span class="w">  </span><span class="c1"># - ...</span>

<span class="c1"># Computational mesh generation</span>
<span class="nt">mesh</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">h</span><span class="w">  </span><span class="c1"># Mesh topology</span>
<span class="w">  </span><span class="nt">yplus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span><span class="w">  </span><span class="c1"># Non-dimensional wall distance</span>
<span class="w">  </span><span class="nt">resolution_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Double grid spacing in each direction</span>

<span class="c1"># CFD solver</span>
<span class="nt">solver</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ts3</span><span class="w">  </span><span class="c1"># Which solver</span>
<span class="w">  </span><span class="nt">nstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">  </span><span class="nt">nstep_avg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="nt">rtol_mdot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.02</span>

<span class="c1">## CFD solver</span>
<span class="c1">#solver:</span>
<span class="c1">#  type: ts4  # Which solver</span>
<span class="c1">#  nstep: 2000</span>
<span class="c1">#  nstep_avg: 200</span>
<span class="c1">#  # rtol_mdot: 0.02</span>
<span class="c1">#  # # ...</span>
<span class="c1">#  #</span>



<span class="nt">post_process</span><span class="p">:</span>
<span class="w">  </span><span class="nt">plot_convergence</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rtol_loss</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.04</span>
</pre></div>
</div>
<p>Input data is specified in a text-based <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a> format. Comments are prefixed with <cite>#</cite>,
and indentation is significant. A configuration file
may contain the following top-level keys:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#cnf-workdir"><span class="std std-ref">workdir</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-inlet"><span class="std std-ref">inlet</span></a></p></li>
<li><p><a class="reference internal" href="#ml-conf"><span class="std std-ref">mean_line</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-annulus"><span class="std std-ref">annulus</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-blades"><span class="std std-ref">blades</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-mesh"><span class="std std-ref">mesh</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-solver"><span class="std std-ref">solver</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-operating-point"><span class="std std-ref">operating_point</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-iterate"><span class="std std-ref">iterate</span></a></p></li>
<li><p><a class="reference internal" href="#cnf-job"><span class="std std-ref">job</span></a></p></li>
</ul>
<p>The following sections give more detail on each of the keys.</p>
<section id="workdir">
<span id="cnf-workdir"></span><h2>workdir<a class="headerlink" href="#workdir" title="Link to this heading">¶</a></h2>
<p>Specifies relative or absolute path to a working directory for the run. If
present, <cite>*</cite> is replaced with a new numbered directory on each invocation of
the program. Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">workdir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">runs/axial_turbine</span>

<span class="nt">workdir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/home/james/turbigen/runs/radial</span>

<span class="nt">workdir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">design_*</span>
<span class="c1"># produces design_0000, design_0001, ... each time turbigen is run</span>
</pre></div>
</div>
</section>
<section id="inlet">
<span id="cnf-inlet"></span><h2>inlet<a class="headerlink" href="#inlet" title="Link to this heading">¶</a></h2>
<p>The thermodynamic state at inlet to the turbomachine is set by fixing stagnation pressure,
<cite>Po</cite>, and stagnation temperature <cite>To</cite>. For perfect gases, the fluid properties <cite>cp</cite>, <cite>mu</cite>,
and <cite>gamma</cite> can be directly prescribed. For real gases, only the name of the
working fluid in <a class="reference external" href="http://www.coolprop.org/fluid_properties/PurePseudoPure.html#list-of-fluids">CoolProp nomenclature</a>
is required, and the fluid properties are obtained from tabulations. Examples:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Perfect gas</span>
<span class="nt">inlet</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Po</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e5</span><span class="w">  </span><span class="c1"># Stagnation pressure [Pa]</span>
<span class="w">  </span><span class="nt">To</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300.</span><span class="w">  </span><span class="c1"># Stagnation temperature [K]</span>
<span class="w">  </span><span class="nt">cp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1005.</span><span class="w">  </span><span class="c1"># Specific heat capacity at constant pressure [J/kg/K]</span>
<span class="w">  </span><span class="nt">mu</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.8e-5</span><span class="w">  </span><span class="c1"># Working fluid dynamic viscosity [kg/m/s]</span>
<span class="w">  </span><span class="nt">gamma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.4</span><span class="w">  </span><span class="c1"># Working fluid ratio of specific heats [-]</span>

<span class="c1"># Real gas</span>
<span class="nt">inlet</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Po</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1e5</span><span class="w">  </span><span class="c1"># Stagnation pressure [Pa]</span>
<span class="w">  </span><span class="nt">To</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">400.</span><span class="w">  </span><span class="c1"># Stagnation temperature [K]</span>
<span class="w">  </span><span class="nt">fluid_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">water</span><span class="w">  </span><span class="c1"># Name of working fluid</span>
</pre></div>
</div>
<p>For more information on how <strong class="program">turbigen</strong> abstracts the working fluid, see <a class="reference internal" href="fluid.html#module-turbigen.fluid" title="turbigen.fluid"><code class="xref py py-mod docutils literal notranslate"><span class="pre">turbigen.fluid</span></code></a></p>
</section>
<section id="mean-line">
<span id="ml-conf"></span><h2>mean_line<a class="headerlink" href="#mean-line" title="Link to this heading">¶</a></h2>
<p>Under the <cite>mean_line</cite> key, a <cite>type</cite> key is required to specify the architecture
or topology of turbomachine to design. This can either be: one the built-in
mean-lines listed in in <code class="xref py py-mod docutils literal notranslate"><span class="pre">turbigen.meanline</span></code>, or a file path to a
user-written mean-line module that provides the correct functions. Also
specified are the aerodynamic or geometric parameters needed to solve for the
flow along the mean-line for the current turbomachine type. The design
variables are fed directly into the <cite>forward</cite> mean-line design functions in
<code class="xref py py-mod docutils literal notranslate"><span class="pre">turbigen.meanline</span></code> (see the <a class="reference internal" href="meanline.html#ml"><span class="std std-ref">Mean line page</span></a> for more
detail) The configuration file might look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mean_line</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">axial_turbine</span><span class="w">  </span><span class="c1"># Single-stage axial turbine</span>
<span class="w">  </span><span class="nt">Alpha1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.</span><span class="w">  </span><span class="c1"># Inlet yaw angle [deg]</span>
<span class="w">  </span><span class="nt">phi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span><span class="w">  </span><span class="c1"># Flow coefficient</span>
<span class="w">  </span><span class="nt">psi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.6</span><span class="w">  </span><span class="c1"># Stage loading coefficient</span>
<span class="w">  </span><span class="nt">Lam</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Degree of reaction</span>
<span class="w">  </span><span class="nt">Ma2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span><span class="w">  </span><span class="c1"># Vane exit Mach number</span>
<span class="w">  </span><span class="nt">eta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.92</span><span class="w">  </span><span class="c1"># Guess of polytropic efficiency</span>
<span class="w">  </span><span class="nt">loss_split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span><span class="w">  </span><span class="c1"># Fraction of entropy rise in stator</span>
<span class="w">  </span><span class="nt">htr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span><span class="w">  </span><span class="c1"># Hub-to-tip radius ratio</span>
<span class="w">  </span><span class="nt">Omega</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">314.159</span><span class="w">  </span><span class="c1"># Shaft angular velocity [rad/s]</span>


<span class="nt">mean_line</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">radial_impeller</span><span class="w">  </span><span class="c1"># Radial compressor with vaneless diffuser</span>
<span class="w">  </span><span class="nt">Alpha1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span><span class="w">  </span><span class="c1"># Inlet yaw angle [deg]</span>
<span class="w">  </span><span class="nt">Alpharel2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-50.0</span><span class="w">  </span><span class="c1"># Rotor exit yaw angle [deg]</span>
<span class="w">  </span><span class="nt">DHdiff</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.75</span><span class="w">  </span><span class="c1"># Diffuser de Haller</span>
<span class="w">  </span><span class="nt">DHimp</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span><span class="w">  </span><span class="c1"># Rotor de Haller</span>
<span class="w">  </span><span class="nt">Marel1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span><span class="w">  </span><span class="c1"># Inlet relative Mach number</span>
<span class="w">  </span><span class="nt">PR_tt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span><span class="w">  </span><span class="c1"># Total-to-total pressure ratio</span>
<span class="w">  </span><span class="nt">eta_tt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.91</span><span class="w">  </span><span class="c1"># Total-to-total isentropic efficiency</span>
<span class="w">  </span><span class="nt">htr1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Inlet hub-to-tip radius ratio</span>
<span class="w">  </span><span class="nt">loss_split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span><span class="w">  </span><span class="c1"># Fraction of entropy rise in rotor</span>
<span class="w">  </span><span class="nt">mdot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">  </span><span class="c1"># Mass flow rate [kg/s]</span>
<span class="w">  </span><span class="nt">phi1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span><span class="w">  </span><span class="c1"># Inlet flow coefficient</span>
</pre></div>
</div>
</section>
<section id="annulus">
<span id="cnf-annulus"></span><h2>annulus<a class="headerlink" href="#annulus" title="Link to this heading">¶</a></h2>
<p>With mean radii and areas fixed by the mean-line design, meridional aspect
ratios set the length of the machine. For a turbomachine with <cite>N</cite> rows: there
are <cite>N+1</cite> aspect ratios defining the spacing between rows and the inlet and
exit boundaries set in <cite>AR_gap</cite>;  and <cite>N</cite> aspect ratios defining the blade
chords in <cite>AR_chord</cite>. <strong class="program">turbigen</strong> generates a smooth curvature
continuous annulus between these defining points.
For example, in a single-stage axial cases:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">annulus</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AR_gap</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.7</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">AR_chord</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1.6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.6</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>There are two special values that the meridional aspect ratios can take. For
fully radial flow with a pitch angle of <span class="math notranslate nohighlight">\(\beta=\pm 90 ^\circ\)</span>, blade
chords are already fixed by the inlet and exit radii from mean-line design, so
must be set to <cite>.nan</cite> in the configuration file. To optimise axial length to
minimise integrated curvature over the hub and casing, set a negative aspect
ratio.</p>
<p>For a radial compressor, we want to optimise the rotor length to minimise
curvature, but the radial extent of the stator and vaneless space is already
determined by the mean-line design. This would be specified as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">annulus</span><span class="p">:</span>
<span class="w">  </span><span class="nt">AR_chord</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">.nan</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">AR_gap</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w">  </span><span class="nv">.nan</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="blades">
<span id="cnf-blades"></span><h2>blades<a class="headerlink" href="#blades" title="Link to this heading">¶</a></h2>
<p>Under the <cite>blades</cite> key is a list of data for each blade row, then a <cite>section</cite>
key specifies geometry for each section. The section data requires a span
fraction <cite>spf</cite> and vectors of thickness and camber parameters, <cite>q_thick</cite> and
<cite>qstar_camber</cite>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Span fraction for this section</span>
<span class="nt">spf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="c1"># Vector of thickness parameters</span>
<span class="nt">q_thick</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.05</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.18</span><span class="p p-Indicator">]</span>
<span class="c1"># Vector of camber parameters</span>
<span class="nt">qstar_camber</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<dl class="simple">
<dt><cite>q_thick</cite> is a vector with 6 elements:</dt><dd><ul class="simple">
<li><p>Leading-edge radius</p></li>
<li><p>Maximum thickness</p></li>
<li><p>Location of maximum thickness</p></li>
<li><p>Curvature at maximum thickness</p></li>
<li><p>Trailing edge thickness</p></li>
<li><p>Trailing edge wedge angle tangent</p></li>
</ul>
</dd>
<dt><cite>qstar_camber</cite> is a vector with 5 elements:</dt><dd><ul class="simple">
<li><p>Leading-edge recamber with respect to flow angle</p></li>
<li><p>Trailing-edge recamber with respect to flow angle</p></li>
<li><p>Camber line slope at leading edge</p></li>
<li><p>Camber line slope at trailing edge</p></li>
<li><p>Camber line curvature at mid-chord</p></li>
</ul>
</dd>
</dl>
<p>All lengths are normalised by the meridional chord.</p>
<p>The number of blades can be set via three choices: directly using <cite>Nb</cite>, a
non-dimensional circulation using <cite>Co</cite>, or the Lieblein diffusion factor <cite>DFL</cite>.
Thickness and camber vectors are interpolated between each of the specified
span fractions.</p>
<p>Tip gaps can be modelled by adding a <cite>tip</cite> key to the row configuration. The
gap is normalised by the mean of the inlet and exit span.</p>
<p>A complete specification of the blade geometry is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">blades</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># First row</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Nb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">65</span><span class="w">   </span><span class="c1"># Set number of blades directly</span>
<span class="w">    </span><span class="c1"># Set blade geometry on two sections</span>
<span class="w">    </span><span class="nt">sections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span><span class="w">  </span><span class="c1"># Hub section</span>
<span class="w">        </span><span class="nt">q_thick</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.05</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.18</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">qstar_camber</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span><span class="w">  </span><span class="c1"># Tip section</span>
<span class="w">        </span><span class="nt">q_thick</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.05</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.18</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">qstar_camber</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="c1"># Second row</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">Co</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.7</span><span class="w">  </span><span class="c1"># Set number of blades using circulation coeff</span>
<span class="w">    </span><span class="nt">tip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span><span class="w">  </span><span class="c1"># 1% of span tip gap</span>
<span class="w">    </span><span class="c1"># Prismatic blade section</span>
<span class="w">    </span><span class="nt">sections</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">spf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Midspan</span>
<span class="w">        </span><span class="nt">q_thick</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.05</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.02</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.18</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">qstar_camber</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="mesh">
<span id="cnf-mesh"></span><h2>mesh<a class="headerlink" href="#mesh" title="Link to this heading">¶</a></h2>
<p>To generate a computational mesh, the topology must be specified in a <cite>type</cite>
key; currently <cite>h</cite> and <cite>oh</cite> are the only supported values. Following the type,
settings to control, for example, mesh resolution and clustering can optionally
be specified. The possible settings and their default values are listed in
<a class="reference internal" href="mesh.html#meshing"><span class="std std-ref">Meshing</span></a>.</p>
<p>H-meshing requires less configuration and is more robust to consistently
automate across a design space. With some extra settings, this could look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mesh</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">h</span>
<span class="w">  </span><span class="nt">yplus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">  </span><span class="c1"># Optional settings</span>
<span class="w">  </span><span class="nt">dm_LE</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0001</span>
<span class="w">  </span><span class="nt">nchord_relax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">  </span><span class="nt">resolution_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">  </span><span class="c1"># ...</span>
</pre></div>
</div>
<p>OH-meshing, at present, requires SSH access to the proprietary AutoGrid software on
a remote machine, and is more complicated to set up and debug. More information
is given in <a class="reference internal" href="mesh.html#oh-meshing"><span class="std std-ref">OH-meshing</span></a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mesh</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oh</span>
<span class="w">  </span><span class="nt">yplus</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60.0</span>
<span class="w">  </span><span class="nt">remote_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gp-111</span><span class="w"> </span><span class="c1"># Hostname of AutoGrid machine</span>
<span class="w">  </span><span class="c1"># Optional settings</span>
<span class="w">  </span><span class="nt">nk_omesh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">33</span>
<span class="w">  </span><span class="nt">untwist_outlet</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="c1"># ...</span>
</pre></div>
</div>
</section>
<section id="solver">
<span id="cnf-solver"></span><h2>solver<a class="headerlink" href="#solver" title="Link to this heading">¶</a></h2>
<p>The <cite>solver</cite> key can be omitted entirely to skip running CFD, and just
post-process the initial guess solution, which can facilitate debugging.
If present, the <cite>solver</cite> section requires a <cite>type</cite> key to indicate
which CFD code to use, and then solver-specific configurations settings may be
given, with default values used otherwise. <a class="reference internal" href="solver.html#solvers"><span class="std std-ref">Solvers</span></a> gives more detail.
Sample configurations for Turbostream 3 and 4 are:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Turbostream 3</span>
<span class="nt">solver</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ts3</span>
<span class="w">  </span><span class="nt">nstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">  </span><span class="nt">nstep_avg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<span class="w">  </span><span class="c1"># Optional settings</span>
<span class="w">  </span><span class="nt">dampin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.</span>
<span class="w">  </span><span class="c1"># ...</span>

<span class="c1"># Turbostream 4</span>
<span class="nt">solver</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ts4</span>
<span class="w">  </span><span class="nt">nstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3000</span>
<span class="w">  </span><span class="nt">nstep_avg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="c1"># Optional settings</span>
<span class="w">  </span><span class="nt">cfl_ramp_nstep</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000</span>
<span class="w">  </span><span class="c1"># ...</span>
</pre></div>
</div>
</section>
<section id="operating-point">
<span id="cnf-operating-point"></span><h2>operating_point<a class="headerlink" href="#operating-point" title="Link to this heading">¶</a></h2>
<p>To set the mass flow rate to the design value using a PID controller on exit static pressure, specify the PID constants under an <cite>operating_point</cite> key using:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">operating_point</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mdot_pid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>The constants are non-dimensionalised with the nominal duty, so values of order
one are a good first guess. Smaller values are more robust at the expense of
longer convergence times.</p>
<p>To run the CFD off-design, keys <cite>mass_adjust</cite> and <cite>rpm_adjust</cite> can be added to
change the mass flow rate and shaft speed respectively, relative to the nominal
values. For example, to throttle to 90% of the design mass flow at 110% of the
design shaft speed:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">operating_point</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mdot_pid</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">mass_adjust</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-0.1</span><span class="w">  </span><span class="c1"># 10% below design mass flow</span>
<span class="w">  </span><span class="nt">rpm_adjust</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span><span class="w">  </span><span class="c1"># 10% above design rpm</span>
</pre></div>
</div>
</section>
<section id="iterate">
<span id="cnf-iterate"></span><h2>iterate<a class="headerlink" href="#iterate" title="Link to this heading">¶</a></h2>
<p><strong class="program">turbigen</strong> has the capability to iterate on unknown values of mean-line loss,
deviation, and incidence until they match CFD results. Each of the three can be configured individually under the <cite>iterate</cite> key.</p>
<p>To match mean-line loss to CFD results, include a <cite>mean_line</cite> key.
Under <cite>match_tolerance</cite>, for each design variable that should be
adjusted, is an absolute tolerance on the difference between nominal mean-line
and mixed-out CFD values. Every iteration, the change in the design variables
is multiplied by a <cite>relaxation_factor</cite>, which may be reduced if the iterations
are unstable. If all variables are within tolerance, the iteration terminates.</p>
<p>The example below is for a radial compressor, where mean-line design requires
guesses of total-to-total efficiency, <cite>eta_tt</cite>, and rotor entropy rise
fraction, <cite>loss_split</cite>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">iterate</span><span class="p">:</span>
<span class="w">  </span><span class="nt">mean_line</span><span class="p">:</span>
<span class="w">    </span><span class="nt">match_tolerance</span><span class="p">:</span>
<span class="w">      </span><span class="nt">eta_tt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.005</span><span class="w">  </span><span class="c1"># Efficiency to within 0.5%</span>
<span class="w">      </span><span class="nt">loss_split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span><span class="w">  </span><span class="c1"># Loss fraction to within 5%</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Change is half difference CFD-nominal</span>
</pre></div>
</div>
<p>To match mean-line flow angle to the mixed-out CFD value, include a <cite>deviation</cite> key. The trailing-edge recamber of all rows is iterated simultaneously. An example configuration is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">iterate</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deviation</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">  </span><span class="c1"># Maximum recamber in one step</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span><span class="w">  </span><span class="c1"># Multiplier on changes to metal angle</span>
<span class="w">    </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w">  </span><span class="c1"># Absolute tolerance for termination in degrees</span>
</pre></div>
</div>
<p>To locate the stagnation point on the nose of the blades, include an <cite>incidence</cite> key. This will recamber the leading edges of all blade sections defined for all rows simultaneously. The configuration is:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">iterate</span><span class="p">:</span>
<span class="w">  </span><span class="nt">incidence</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">   </span><span class="c1"># Maximum recamber in one step</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span><span class="w">  </span><span class="c1"># Multiplier on changes to metal angle</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span><span class="w">  </span><span class="c1"># Desired stagnation point angle wrt camber line</span>
<span class="w">    </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">  </span><span class="c1"># Absolute tolerance for termination in degrees</span>
<span class="w">    </span><span class="nt">rtol_mdot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span><span class="w">  </span><span class="c1"># Recamber when mdot this close to nominal</span>
</pre></div>
</div>
<p>In the event of instability, <cite>clip</cite> and <cite>relaxation_factor</cite> can be
reduced for all three adjustments.</p>
<p>A complete iteration configuration looks something like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">iterate</span><span class="p">:</span>
<span class="w">  </span><span class="nt">deviation</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">  </span><span class="nt">incidence</span><span class="p">:</span>
<span class="w">    </span><span class="nt">clip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.0</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="w">    </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">    </span><span class="nt">tolerance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">  </span><span class="nt">mean_line</span><span class="p">:</span>
<span class="w">    </span><span class="nt">match_tolerance</span><span class="p">:</span>
<span class="w">      </span><span class="nt">eta_tt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.005</span>
<span class="w">      </span><span class="nt">loss_split</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
<span class="w">    </span><span class="nt">relaxation_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</pre></div>
</div>
</section>
<section id="job">
<span id="cnf-job"></span><h2>job<a class="headerlink" href="#job" title="Link to this heading">¶</a></h2>
<p>Automations are in place for running <strong class="program">turbigen</strong> as a SLURM queue job
using the <cite>sbatch</cite> command. Some parameters are hardcoded assuming the
University of Cambridge Wilkes3 cluster and may require modifying for different
systems. Submitting jobs requires the following
configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">job</span><span class="p">:</span>
<span class="w">  </span><span class="nt">account</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NAME-SL2-GPU</span><span class="w">   </span><span class="c1"># SLURM account to charge</span>
<span class="w">  </span><span class="nt">hours</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span><span class="w">  </span><span class="c1"># Integer number of hours for job time limit</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w">  </span><span class="c1"># Number of GPUs</span>
</pre></div>
</div>
</section>
</section>


          </div>

        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;2024 James Brind.

      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>

      |
      <a href="_sources/config.rst.txt"
          rel="nofollow">Page source</a>
    </div>




  </body>
</html>
