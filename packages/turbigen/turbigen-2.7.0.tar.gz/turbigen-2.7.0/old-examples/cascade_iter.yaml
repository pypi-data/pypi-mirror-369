# Apply iteration to correct incidence, loss, deviation of a turbine cascade

workdir: runs/cascade_iter

inlet:
  Po: 1e5
  To: 300.
  cp: 1005.
  mu: 1.8e-5
  gamma: 1.4

mean_line:
  type: turbine_cascade
  span: [0.1, 0.12]
  Alpha: [40., -65.]
  Ma2: 0.6
  Yh: 0.06
  htr: 0.9

annulus:
  AR_gap: [0.8, 0.9]
  AR_chord: 1.6

blades:
  - Co: 0.7
    sections:
      - spf: 0.3
        q_thick: [0.05, 0.08, 0.3, 0.02, 0.02, 0.18]
        qstar_camber: [4.0, -2., 1.0, 1.0, 0.0]
      - spf: 0.5
        q_thick: [0.05, 0.08, 0.3, 0.02, 0.02, 0.18]
        qstar_camber: [4.0, -2., 1.0, 1.0, 0.0]
      - spf: 0.7
        q_thick: [0.05, 0.08, 0.3, 0.02, 0.02, 0.18]
        qstar_camber: [4.0, -2., 1.0, 1.0, 0.0]

iterate:
  mean_line:
    relaxation_factor: 0.5
    match_tolerance:
      Yh: 0.01
  deviation:
    clip: 5.0
    relaxation_factor: 1.0
    tolerance: 1.0
  incidence:
    clip: 2.0
    relaxation_factor: 0.5
    target: 0.0
    tolerance: 0.5

mesh:
  type: h
  yplus: 30.0
  resolution_factor: 0.5

solver:
  type: ts3
  nstep: 10000
  nstep_avg: 2000
  rtol_mdot: 0.02

post_process:
  plot_pressure_distributions:
    row_spf: [[0.3, 0.5, 0.7],]
