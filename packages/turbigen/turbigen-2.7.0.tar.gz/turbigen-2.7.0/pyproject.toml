[project]
name = "turbigen"
version = "2.7.0"
requires-python = ">=3.11"
license = {text = "GPL-3.0-or-later"}
authors = [
  {name = "James Brind", email = "jb753@cam.ac.uk"},
]
classifiers = [
  "Programming Language :: Python :: 3",
  "License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)",
  "Operating System :: POSIX :: Linux"
]
dependencies = [
    'CoolProp~=6.7.0',
    'matplotlib~=3.10.0',
    "numpy~=2.2.4",
    'PyYAML~=6.0.0',
    'scipy~=1.15.0',
    'h5py~=3.13.0',
    'numpy-stl~=3.2.0',
    'metis~=0.2a5',
]
description = "Framework for turbomachinery design and computational fluid dynamics simulation"
readme = "README.md"
keywords = ["turbomachinery", "computational fluid dynamics", "compressor", "turbine"]

[project.optional-dependencies]
parallel = [
    'mpi4py~=3.1.6',
]

[project.urls]
Homepage = "https://turbigen.org"
Repository = "https://gitlab.developers.cam.ac.uk/jb753/turbigen"

[project.scripts]
turbigen = "turbigen.main:main"
turbigen-autogrid-server = "turbigen.autogrid.server:main"
turbigen-local-queue= "turbigen.job_server:main"

[build-system]
requires = ["meson-python", "numpy", "ninja", "cibuildwheel"]
build-backend = "mesonpy"

[tool.cibuildwheel]
build = "cp311-* cp312-* cp313-*"
skip = "pp*"
manylinux-x86_64-image = "manylinux2014"
archs = ["x86_64"]

[tool.bumpversion]
current_version = "2.7.0"
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"
serialize = ["{major}.{minor}.{patch}"]
search = "{current_version}"
replace = "{new_version}"
regex = false
ignore_missing_version = false
tag = true
sign_tags = false
tag_name = "v{new_version}"
tag_message = "Bump version: {current_version} → {new_version}"
allow_dirty = false
commit = true
message = "Bump version: {current_version} → {new_version}"
commit_args = ""
[[tool.bumpversion.files ]]
filename = "pyproject.toml"

[dependency-groups]
dev = [
    'sphinx',
    'sphinx-autobuild',
    'sphinx-argparse',
    'sphinxcontrib-programoutput',
    'sphinxcontrib-bibtex',
    'snowballstemmer==2.2.0',
    'autodocsumm',
    'pytest',
    'pre-commit',
    'twine',
    'bump-my-version',
    'meson-python',
    'ninja',
    'pyqt6',
]
