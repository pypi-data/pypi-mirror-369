# AnimeSub

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å—É–±—Ç–∏—Ç—Ä–æ–≤** –∏–∑ –≤–∏–¥–µ–æ- –∏–ª–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤.  
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —è–ø–æ–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞–Ω–∏–º–µ, –∏–Ω—Ç–µ—Ä–≤—å—é –∏ —Ç.–ø.).

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

**–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª ‚Üí —Å—É–±—Ç–∏—Ç—Ä—ã:**
```bash
animesub -i input_file.mp4
```

**YouTube ‚Üí —Å—É–±—Ç–∏—Ç—Ä—ã:**
```bash
animesub -u "https://youtube.com/watch?v=XXXX"
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ò–∑ PyPI:
```bash
pip install animesub
```

üí° –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ CUDA –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å `torch` –∏ `torchaudio` –ø–æ–¥ —Å–≤–æ—é –≤–µ—Ä—Å–∏—é CUDA:
```bash
pip install torch torchaudio --index-url https://download.pytorch.org/whl/cu126
```

–ù–µ –∑–∞–±—É–¥—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `ffmpeg` –∏ `demucs`:
```bash
conda install ffmpeg -c conda-forge
pip install demucs
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
```bash
animesub -i input_file.mp4
```
–°–æ–∑–¥–∞—Å—Ç `input_file.srt` –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ.

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–æ URL (YouTube –∏ –¥—Ä.)
```bash
animesub -u "https://youtube.com/watch?v=XXXX"
```
–°–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `output.srt`.

---

## üîß –ê—Ä–≥—É–º–µ–Ω—Ç—ã CLI

| –ê—Ä–≥—É–º–µ–Ω—Ç               | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------------|----------|
| `-i`, `--input_file`   | –ü—É—Ç—å –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –≤–∏–¥–µ–æ –∏–ª–∏ –∞—É–¥–∏–æ |
| `-u`, `--url`          | URL –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ (YouTube) |
| `-o`, `--output`       | –ü—É—Ç—å –∫ –≤—ã—Ö–æ–¥–Ω–æ–º—É `.srt` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `<–∏–º—è_—Ñ–∞–π–ª–∞>.srt` –∏–ª–∏ `output.srt` –¥–ª—è URL) |
| `-m`, `--model`        | –ú–æ–¥–µ–ª—å ASR: `tiny`, `base`, `small`, `medium`, `large`, `large-v2`, `large-v3`,`kotoba-faster`, `kotoba-whisper`, `kotoba-whisper-v2.2`, `kotoba-faster` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `small`) |
| `-d`, `--device`       | `cpu` –∏–ª–∏ `cuda` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) |
| `--demucs-model`       | –ú–æ–¥–µ–ª—å —Å–µ–ø–∞—Ä–∞—Ü–∏–∏ –≤–æ–∫–∞–ª–∞: `htdemucs` –∏–ª–∏ `mdx_extra_q` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `htdemucs`) |
| `--merge-silence`      | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É VAD-—Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0.6`) |

---

## üìå –ü—Ä–∏–º–µ—Ä—ã

**CPU + base –º–æ–¥–µ–ª—å**
```bash
animesub -i input.mp3 -m base -d cpu
```

**Kotoba-–º–æ–¥–µ–ª—å —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø–∞—É–∑–æ–π**
```bash
animesub -i anime.mkv -m kotoba-whisper-v2.2 --merge-silence 0.8 -d cuda
```

**–° YouTube**
```bash
animesub -u "https://youtube.com/watch?v=XXXX" -m kotoba-faster -d cuda
```

**–° —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –≤—ã–≤–æ–¥–∞**
```bash
animesub -i episode.mp4 -o subs/episode01.srt
```

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–û—Ç–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∫–∞–ª–∞** (Demucs)  
2. **–î–µ—Ç–µ–∫—Ü–∏—è —Ä–µ—á–∏** (Silero VAD)  
3. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è** (Whisper –∏–ª–∏ Kotoba-Whisper)  
4. **–ü—É–Ω–∫—Ç—É–∞—Ü–∏—è** (XLM-RoBERTa —á–µ—Ä–µ–∑ `punctuators`)  
5. **–≠–∫—Å–ø–æ—Ä—Ç –≤ `.srt`** —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
from AnimeSub.main_logic import process_audio

process_audio(
    input_path="video.mp4",
    output_path="subs.srt",
    model_name="kotoba-whisper-v2.2",
    device="cuda",
    merge_silence=0.6
)
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

## üë§ –ê–≤—Ç–æ—Ä

**Ivan Tyumentsev**
üìß [ivanfufa184@gmail.com](mailto:ivanfufa184@gmail.com)
üîó [GitHub](https://github.com/iniquitousworld)

```
