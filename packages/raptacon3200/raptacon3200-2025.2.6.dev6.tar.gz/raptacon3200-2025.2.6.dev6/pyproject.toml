[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[project]
name = "raptacon3200"
version = "2025.2.6-dev.6"
description = "A FRC Raptacon 3200 Robot Common Library"
requires-python = ">= 3.12"
dynamic = ["version", "description", "authors", "readme", "dependencies"]
authors = [
  { name = "Nathan Beasley", email = "nathan@example.com"},
  { name = "Chris Hirsch", email = "chris@base2technology.com"}
]
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3.12",
    "Development Status :: 3 - Alpha"
]

[project.urls]
homepage = "https://github.com/raptacon/raptacon3200"
"Bug Tracker" = "https://github.com/raptacon/raptacon3200/issues"



[tool.poetry]
readme = "README.md"
packages = [{include = "raptacon3200"}]

[tool.poetry.dependencies]
python = "^3.12"
robotpy-rev = "^2025.0.2"

[tool.poetry.group.dev.dependencies]
pytest = "^8.3.4"
pytest-cov = "^6.0"
black = "^25.1"
pylint = "^3.2"
flake8 = "^7.1.1"
python-semantic-release = "^9.0.0"

[tool.semantic_release]
version_toml = [ "pyproject.toml:project.version" ]
tag_format = "v{version}"
upload_to_pypi = true
upload_to_release = true
commit_message = "chore(release): bump version to {version}"
version_source = "commit"
major_on_zero = false
logging_use_named_masks = false
allow_zero_version = true
no_git_verify = false

[tool.semantic_release.branches.main]
match = "(main)"
prerelease = false

[tool.semantic_release.branches.feature]
match = '(feature|feat|develop|bug)\/.*'
prerelease_token = "dev"
prerelease = true


[tool.semantic_release.changelog]
exclude_commit_patterns = []

[tool.semantic_release.changelog.default_templates]
changelog_file = "CHANGELOG.md"

[tool.semantic_release.commit_parser_options]
# minor_tags = ["feat", "feature"]
minor_tags = []
#patch_tags = ["fix", "perf", "patch"]
patch_tags = ["feat", "fix", "perf", "patch", "build", "chore", "ci", "docs", "style", "refactor", "test"]
# Force every commit to be at least a minor bump
#default_bump_level = 1
default_bump_level = 0  # 0 = patch, 1 = minor, 2 = major
allowed_tags = ["feat", "fix", "perf", "build", "chore", "ci", "docs", "style", "refactor", "test"]

[tool.semantic_release.remote]
name = "origin"
type = "github"
ignore_token_for_push = false

[tool.semantic_release.publish]
dist_glob_patterns = ["dist/*"]
upload_to_vcs_release = false
