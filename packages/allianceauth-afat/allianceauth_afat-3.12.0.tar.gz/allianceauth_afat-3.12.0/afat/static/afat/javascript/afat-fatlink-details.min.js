$(document).ready(()=>{const e=afatSettings.dataTable.language,a=$("#fleet-edit-fat-list"),s=(fetchGet({url:afatSettings.url}).then(t=>{a.DataTable({language:e,data:t,columns:[{data:"character_name"},{data:"system"},{data:"ship_type"},{data:"actions"}],columnDefs:[{targets:[3],orderable:!1,createdCell:t=>{$(t).addClass("text-end")}}],order:[[0,"asc"]],createdRow:(t,e)=>{const a=$("#fleet-edit-ship-types"),s=convertStringToSlug(e.ship_type);if($("tr.shiptype-"+s).length){const n=a.find("tr.shiptype-"+s+" td.ship-type-count").html(),o=parseInt(n)+1;a.find("tr.shiptype-"+s+" td.ship-type-count").html(o)}else a.append('<tr class="shiptype-'+s+'"><td class="ship-type">'+e.ship_type+'</td><td class="ship-type-count text-end">1</td></tr>');sortTable(a,"asc")},stateSave:!0,stateDuration:-1})}).catch(t=>{console.error("Error fetching FAT list:",t)}),15e3);let n=Date.now()+s;const o=()=>{const t=Date.now()-n,e=window.location.pathname+window.location.search+window.location.hash;t>s&&(e.startsWith("/")?window.location.replace(e):console.error("Invalid redirect URL")),fetchGet({url:afatSettings.url}).then(t=>{const e=a.DataTable(),o=$("#fleet-edit-ship-types");e.clear().rows.add(t).draw(),o.find("tbody").html(""),$.each(t,(t,e)=>{const a=convertStringToSlug(e.ship_type);if($("tr.shiptype-"+a).length){const s=o.find("tr.shiptype-"+a+" td.ship-type-count").html(),n=parseInt(s)+1;o.find("tr.shiptype-"+a+" td.ship-type-count").html(n)}else o.append('<tr class="shiptype-'+a+'"><td class="ship-type">'+e.ship_type+'</td><td class="ship-type-count text-end">1</td></tr>')}),sortTable(o,"asc")}),n+=s,setTimeout(o,Math.max(0,s-t))},t=(!0===afatSettings.reloadDatatable&&setTimeout(o,s),new ClipboardJS(".copy-btn")),l=(t.on("success",()=>{$(".copy-btn").tooltip("show")}),$(afatSettings.modal.cancelEsiFleetModal.element)),i=(manageModal(l),$(afatSettings.modal.deleteFatModal.element)),d=(manageModal(i),$(afatSettings.modal.reopenFatLinkModal.element));manageModal(d)});
//# sourceMappingURL=afat-fatlink-details.min.js.map