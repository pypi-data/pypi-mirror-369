$(document).ready(()=>{const a=afatSettings.dataTable.language,e=[{data:"fleet_name"},{data:"fleet_type"},{data:"doctrine"},{data:"creator_name"},{data:"fleet_time",render:{display:t=>moment(t.time).utc().format(AFAT_DATETIME_FORMAT),_:"timestamp"}},{data:"fats_number"}],n=[{targets:[5],createdCell:t=>{$(t).addClass("text-end")}}],s=(!0===afatSettings.permissions.addFatLink||!0===afatSettings.permissions.manageAfat?(e.push({data:"actions",render:t=>t}),n.push({targets:[6],orderable:!1,createdCell:t=>{$(t).addClass("text-end")}},{targets:[7,8],visible:!1})):n.push({targets:[6,7],visible:!1}),e.push({data:"via_esi"},{data:"hash"}),$("#link-list")),i=(fetchGet({url:afatSettings.url.linkList}).then(t=>{s.DataTable({language:a,data:t,columns:e,columnDefs:n,order:[[4,"desc"]],filterDropDown:{columns:[{idx:1},{idx:7,title:afatSettings.translation.dataTable.filter.viaEsi}],autoSize:!1,bootstrap:!0,bootstrap_version:5}})}).catch(t=>{console.error("Error fetching link list:",t)}),6e4);let o=Date.now()+i;const l=()=>{const t=Date.now()-o,a=window.location.pathname+window.location.search+window.location.hash;t>i&&(a.startsWith("/")?window.location.replace(a):console.error("Invalid redirect URL")),fetchGet({url:afatSettings.url.linkList}).then(t=>{const a=s.DataTable();a.clear().rows.add(t).draw()}).catch(t=>{console.error("Error fetching updated data:",t)}),o+=i,setTimeout(l,Math.max(0,i-t))},t=(setTimeout(l,i),$(afatSettings.modal.cancelEsiFleetModal.element)),r=(manageModal(t),$(afatSettings.modal.deleteFatLinkModal.element));manageModal(r)});
//# sourceMappingURL=afat-fatlist.min.js.map