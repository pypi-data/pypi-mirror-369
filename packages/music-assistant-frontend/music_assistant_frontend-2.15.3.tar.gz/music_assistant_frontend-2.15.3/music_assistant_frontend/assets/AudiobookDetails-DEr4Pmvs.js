import{I as w,_ as V}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-BP6RnDuu.js";import{U as h,x as b,c as g,a0 as d,F as m,W as p,ab as c,$ as A,Y as l,X as a,I as x,a1 as E,a3 as T,Z as B,a2 as I,br as y,ad as _,au as M,E as C,bp as $,as as N,a6 as D,w as L,o as U,aW as F,b as S}from"./index-BGgfaO08.js";import{C as W}from"./Container-DbIstGeW.js";import{T as H}from"./Toolbar-uC2RZ0mv.js";import"./MediaItemThumb-Cbujilda.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./marquee_text_sync-CrDgiuRx.js";import"./VBtn-Bp792jbq.js";import"./VDialog-9Uz27rL3.js";import"./layout-B5JGIgB6.js";import"./ListItem-BJnG7rcc.js";import"./Button-D4MtJJYV.js";import"./VContainer-DLfYWZki.js";/* empty css              */import"./VToolbar-BRuOCCCG.js";const P={style:{"margin-bottom":"10px"}},X={style:{width:"50px"}},Y={key:0,class:"text-caption"},Z=h({__name:"Chapters",props:{itemDetails:{}},setup(v){const i=v,s=b(!0),e=function(){s.value=!s.value},f=g(()=>[{label:"tooltip.collapse_expand",icon:s.value?"mdi-chevron-up":"mdi-chevron-down",action:e,overflowAllowed:!1}]),n=function(t){!i.itemDetails||!y(i.itemDetails)||D.playMedia(i.itemDetails.uri,void 0,void 0,t.position.toString())};return(t,r)=>(a(),d("section",P,[m(H,{title:t.$t("chapters"),"menu-items":f.value,onTitleClicked:e},null,8,["title","menu-items"]),m(A),s.value?(a(),p(W,{key:0},{default:l(()=>[m(T,null,{default:l(()=>{var u,k;return[(a(!0),d(x,null,E((k=(u=t.itemDetails)==null?void 0:u.metadata)==null?void 0:k.chapters,o=>(a(),p(B,{key:o.position,disabled:!I(y)(t.itemDetails),onClick:j=>n(o)},{prepend:l(()=>[C("div",X,[m($,null,{default:l(()=>[N(_(o.position),1)]),_:2},1024)])]),title:l(()=>[C("div",null,_(o.name),1)]),append:l(()=>[o.end?(a(),d("span",Y,_(I(M)(o.end-o.start)),1)):c("",!0)]),_:2},1032,["disabled","onClick"]))),128))]}),_:1})]),_:1})):c("",!0)]))}}),le=h({__name:"AudiobookDetails",props:{itemId:{},provider:{}},setup(v){const i=v,s=b(!1),e=b(),f=async function(){e.value=await D.getAudiobook(i.itemId,i.provider)};return L(()=>i.itemId,n=>{n&&f()},{immediate:!0}),U(()=>{const n=D.subscribe(F.MEDIA_ITEM_UPDATED,t=>{var u;const r=t.data;((u=e.value)==null?void 0:u.uri)==r.uri&&(s.value=!0)});S(n)}),(n,t)=>{var r;return a(),d(x,null,[m(w,{item:e.value},null,8,["item"]),e.value&&((r=e.value.metadata)!=null&&r.chapters)?(a(),p(Z,{key:0,"item-details":e.value},null,8,["item-details"])):c("",!0),e.value?(a(),p(V,{key:1,"item-details":e.value},null,8,["item-details"])):c("",!0)],64)}}});export{le as default};
