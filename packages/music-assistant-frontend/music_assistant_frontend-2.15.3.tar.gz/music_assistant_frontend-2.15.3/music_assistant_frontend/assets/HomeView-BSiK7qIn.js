import{C as R}from"./Container-DbIstGeW.js";import{U as v,c as C,a6 as _,bf as P,az as k,ak as S,a0 as m,X as i,ah as B,F as u,Y as d,ab as w,E as I,ad as U,ar as E,a2 as $,aq as W,I as b,a1 as M,W as g,a4 as A,x as f,o as N,aW as T,b as D,aa as O,b4 as H,bm as L}from"./index-BGgfaO08.js";import{W as Y}from"./WidgetRow-BIO3oW_f.js";import{a as z}from"./PlayerCard-C0FCMqt1.js";import{V as F}from"./VToolbar-BRuOCCCG.js";import{a as J,b as j}from"./VBtn-Bp792jbq.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as q}from"./Toolbar-uC2RZ0mv.js";import"./VContainer-DLfYWZki.js";/* empty css              */import"./PanelviewItemCompact-C4tWqPtC.js";import"./MediaItemThumb-Cbujilda.js";import"./VCheckbox-BMJoWdIx.js";import"./VCheckboxBtn-CZTCrZpU.js";import"./VAlert-DWZhUScf.js";import"./Button-D4MtJJYV.js";import"./VSlider-DyWLbf0b.js";const x={class:"mr-3"},G={key:0},X=v({__name:"PlayersWidgetRow",props:{settings:{},editMode:{type:Boolean}},emits:["update:settings"],setup(y,{emit:r}){const a=C(()=>Object.values(_.players).filter(e=>P(e)).sort((e,o)=>{var t;return e.display_name.toUpperCase()>((t=o.display_name)==null?void 0:t.toUpperCase())?1:-1}).sort((e,o)=>s(e)-s(o))),p=r;function c(e){A.activePlayerId=e.player_id}function s(e){return e.state==k.PLAYING?0:e.state==k.PAUSED?1:e.current_media&&e.powered?3:e.current_media?4:99}return(e,o)=>{const t=S("swiper-slide"),n=S("swiper");return i(),m("div",{class:B(`widget-row ${e.settings&&!e.settings.enabled?"disabled":""}`)},[u(F,{class:"header",color:"transparent"},{prepend:d(()=>[u(E,{icon:"mdi-speaker"})]),title:d(()=>[I("span",x,U(e.$t("players")),1)]),append:d(()=>[e.editMode?(i(),m("div",G,[u(J,{icon:e.settings.enabled?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",onClick:o[0]||(o[0]=l=>p("update:settings",{...e.settings,enabled:!e.settings.enabled}))},null,8,["icon"])])):w("",!0)]),_:1}),u(n,{"slides-per-view":"auto","space-between":15,"free-mode":!1,navigation:!$(W)({breakpoint:"mobile"}),mousewheel:{forceToAxis:!0,releaseOnEdges:!0}},{default:d(()=>[(i(!0),m(b,null,M(a.value,l=>(i(),g(t,{key:l.player_id},{default:d(()=>[(i(),g(z,{id:l.player_id,key:l.player_id,player:l,"show-volume-control":!1,"show-menu-button":!1,"show-sub-players":!1,"show-sync-controls":!1,style:{width:"305px",height:"70px"},onClick:h=>c(l)},null,8,["id","player","onClick"]))]),_:2},1024))),128))]),_:1},8,["navigation"])],2)}}}),K=V(X,[["__scopeId","data-v-3f674fef"]]),Q=v({__name:"HomeWidgetRows",props:{editMode:{type:Boolean,default:!1}},setup(y){const r=f([]),a=f({}),p=async function(){const s=localStorage.getItem("widgetRowSettings");a.value=s?JSON.parse(s):{players:{position:0,enabled:!0}};const e=await _.getRecommendations(),o=[];let t=0;for(const n of e){t++;const l=a.value[n.uri]||{position:t,enabled:!0},h=n.translation_key?O(`recommendations.${n.translation_key}`,n.name):n.name;o.push({...n,settings:l,title:h}),r.value=o}};N(()=>{p();const s=_.subscribe(T.MEDIA_ITEM_PLAYED,async e=>{e.data&&!e.data.is_playing&&p()});D(s)});const c=function(s,e){for(const o of r.value)if(o.uri===s){o.settings=e;break}a.value[s]=e,localStorage.setItem("widgetRowSettings",JSON.stringify(a.value))};return(s,e)=>{var o;return i(),m(b,null,[(o=a.value.players)!=null&&o.enabled||s.editMode?(i(),g(K,{key:0,settings:a.value.players,"edit-mode":s.editMode,"onUpdate:settings":e[0]||(e[0]=t=>c("players",t))},null,8,["settings","edit-mode"])):w("",!0),(i(!0),m(b,null,M(r.value.filter(t=>t.items.length&&(t.settings.enabled||s.editMode)).sort((t,n)=>t.settings.position-n.settings.position),t=>(i(),m("div",{key:t.uri},[r.value.length?(i(),g(Y,{key:0,"widget-row":t,"edit-mode":s.editMode,"onUpdate:settings":n=>c(t.uri,n)},null,8,["widget-row","edit-mode","onUpdate:settings"])):w("",!0)]))),128))],64)}}}),Z=v({__name:"HomeView",setup(y){const r=f(localStorage.getItem("frontend.settings.hide_settings")=="true"),a=f(!1),p=C(()=>[{label:"settings.settings",icon:"mdi-cog-outline",action:()=>{H.push({path:"settings"})},hide:r.value},{label:a.value?"homescreen_edit_disable":"homescreen_edit_enable",icon:"mdi-pencil",action:()=>{a.value=!a.value}}]);return(c,s)=>(i(),m("div",null,[u(q,{title:"Music Assistant","show-loading":!0,"enforce-overflow-menu":!0,"menu-items":p.value},null,8,["menu-items"]),u(R,{variant:"panel"},{default:d(()=>[(i(),g(L,null,{fallback:d(()=>[u(j,{indeterminate:""})]),default:d(()=>[I("div",null,[u(Q,{"edit-mode":a.value},null,8,["edit-mode"])])]),_:1}))]),_:1})]))}}),we=V(Z,[["__scopeId","data-v-56b2bcc6"]]);export{we as default};
