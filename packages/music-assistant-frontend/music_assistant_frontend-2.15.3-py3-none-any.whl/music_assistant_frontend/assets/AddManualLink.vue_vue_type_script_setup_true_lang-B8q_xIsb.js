import{U as B,bx as C,by as D,x as r,w as V,W as M,Y as m,X as U,F as t,E as y,$ as A,bz as I,as as g,ad as c,a9 as h,a7 as w,a6 as v,bd as N,a4 as _}from"./index-BGgfaO08.js";import{T as x}from"./Toolbar-uC2RZ0mv.js";import{V as F}from"./VDialog-9Uz27rL3.js";import{V as f}from"./VTextField-i_8qeZX7.js";import{V as L}from"./VSpacer-VZkyPce_.js";import{a as T}from"./VBtn-Bp792jbq.js";const R={style:{padding:"15px"}},P=B({__name:"AddManualLink",props:C({type:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const n=D(p,"modelValue"),$=p,u=r(""),s=r(""),d=r(""),i=r(!1),l=r();V(()=>n.value,e=>{e!=null&&(_.dialogActive=e),e==!1&&(u.value="",s.value="",d.value="",l.value=void 0)},{immediate:!0}),V(()=>l.value,e=>{if(e){s.value||(s.value=e.name);for(const a of e.metadata.images||[])if(a.type=="thumb"){d.value=a.path;break}}});const b=()=>{!u.value||!["http","rtsp"].some(e=>u.value.startsWith(e))||(i.value=!0,$.type==w.RADIO?v.getRadio(u.value,"builtin").then(e=>{l.value=e}).catch(e=>{console.error(e),l.value=void 0}).finally(()=>{i.value=!1}):v.getTrack(u.value,"builtin").then(e=>{l.value=e}).catch(e=>{console.error(e),l.value=void 0}).finally(()=>{i.value=!1}))},k=function(){b(),l.value&&(l.value.name=s.value||l.value.name,delete l.value.sort_name,d.value&&(l.value.metadata.images=[{type:N.THUMB,path:d.value,provider:"builtin",remotely_accessible:!0}]),v.addItemToLibrary(l.value,!0).then(()=>{n.value=!1}))};return(e,a)=>(U(),M(F,{modelValue:n.value,"onUpdate:modelValue":a[4]||(a[4]=o=>n.value=o),transition:"dialog-bottom-transition"},{default:m(()=>[t(h,null,{default:m(()=>[t(x,{icon:"mdi-playlist-plus",title:e.$t("add_url_item")},null,8,["title"]),t(A),a[5]||(a[5]=y("br",null,null,-1)),y("div",R,[t(f,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=o=>u.value=o),variant:"outlined",label:e.$t("enter_url"),disabled:i.value,onBlur:b},null,8,["modelValue","label","disabled"]),t(f,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=o=>s.value=o),variant:"outlined",label:e.$t("enter_name"),disabled:i.value},null,8,["modelValue","label","disabled"]),t(f,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=o=>d.value=o),variant:"outlined",label:e.$t("image_url"),disabled:i.value},null,8,["modelValue","label","disabled"]),t(I,null,{default:m(()=>[t(L),t(T,{variant:"outlined",onClick:a[3]||(a[3]=o=>n.value=!1)},{default:m(()=>[g(c(e.$t("cancel")),1)]),_:1}),t(T,{variant:"flat",color:"primary",disabled:i.value,onClick:k},{default:m(()=>[g(c(e.$t("save")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1,__:[5]})]),_:1},8,["modelValue"]))}});export{P as _};
