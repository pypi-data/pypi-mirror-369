import{r as o,Q as Oe,U as we,an as D,aT as Pe,$ as F,aw as Ue,a7 as Ee,a8 as Ie,ab as ze,ae as S,aU as qe,aV as $e,aW as Ne,R as E,C as Qe,aQ as Ye,ar as Ze,i as ye,aX as et,aY as je,s as tt,aZ as nt,a as re,j as i,I as rt,v as ne,B,w as Be,L as it,z as Re,P as at,aA as ot,K as M}from"./index-7AvwSwCy.js";import{L as ee,r as lt}from"./index-3BF_qLpI.js";import{C as J,T as st}from"./index-CS88LIE_.js";import{D as ct,e as dt,a as mt,b as gt,S as ut,F as pt}from"./Table-BNMDHWhP.js";import{P as Me,S as Fe}from"./index-CsxUT7Dl.js";import{b as ft}from"./index-QPqVsVq-.js";import{A as ht}from"./index-C6RIyMkZ.js";import{T as Te}from"./index-CXNer6h3.js";var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},bt=function(t,n){return o.createElement(Oe,we({},t,{ref:n,icon:xt}))},$t=o.forwardRef(bt),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},jt=function(t,n){return o.createElement(Oe,we({},t,{ref:n,icon:yt}))},ve=o.forwardRef(jt);const ie=e=>{let{children:t}=e;const{getPrefixCls:n}=o.useContext(D),r=n("breadcrumb");return o.createElement("li",{className:`${r}-separator`,"aria-hidden":"true"},t===""?t:t||"/")};ie.__ANT_BREADCRUMB_SEPARATOR=!0;var vt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function St(e,t){if(e.title===void 0||e.title===null)return null;const n=Object.keys(t).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${n})`,"g"),(r,a)=>t[a]||r)}function ke(e,t,n,r){if(n==null)return null;const{className:a,onClick:s}=t,l=vt(t,["className","onClick"]),m=Object.assign(Object.assign({},Pe(l,{data:!0,aria:!0})),{onClick:s});return r!==void 0?o.createElement("a",Object.assign({},m,{className:F(`${e}-link`,a),href:r}),n):o.createElement("span",Object.assign({},m,{className:F(`${e}-link`,a)}),n)}function Ct(e,t){return(r,a,s,l,m)=>{if(t)return t(r,a,s,l);const g=St(r,a);return ke(e,r,g,m)}}var fe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Ae=e=>{const{prefixCls:t,separator:n="/",children:r,menu:a,overlay:s,dropdownProps:l,href:m}=e,b=(h=>{if(a||s){const u=Object.assign({},l);if(a){const d=a||{},{items:x}=d,p=fe(d,["items"]);u.menu=Object.assign(Object.assign({},p),{items:x==null?void 0:x.map((f,C)=>{var{key:P,title:c,label:$,path:j}=f,N=fe(f,["key","title","label","path"]);let I=$??c;return j&&(I=o.createElement("a",{href:`${m}${j}`},I)),Object.assign(Object.assign({},N),{key:P??C,label:I})})})}else s&&(u.overlay=s);return o.createElement(ct,Object.assign({placement:"bottom"},u),o.createElement("span",{className:`${t}-overlay-link`},h,o.createElement(Ue,null)))}return h})(r);return b!=null?o.createElement(o.Fragment,null,o.createElement("li",null,b),n&&o.createElement(ie,null,n)):null},Le=e=>{const{prefixCls:t,children:n,href:r}=e,a=fe(e,["prefixCls","children","href"]),{getPrefixCls:s}=o.useContext(D),l=s("breadcrumb",t);return o.createElement(Ae,Object.assign({},a,{prefixCls:l}),ke(l,a,n,r))};Le.__ANT_BREADCRUMB_ITEM=!0;const _t=e=>{const{componentCls:t,iconCls:n,calc:r}=e;return{[t]:Object.assign(Object.assign({},ze(e)),{color:e.itemColor,fontSize:e.fontSize,[n]:{fontSize:e.iconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.linkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${S(e.paddingXXS)}`,borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",marginInline:r(e.marginXXS).mul(-1).equal(),"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover}},qe(e)),"li:last-child":{color:e.lastItemColor},[`${t}-separator`]:{marginInline:e.separatorMargin,color:e.separatorColor},[`${t}-link`]:{[`
          > ${n} + span,
          > ${n} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",padding:`0 ${S(e.paddingXXS)}`,marginInline:r(e.marginXXS).mul(-1).equal(),[`> ${n}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover,a:{color:e.linkHoverColor}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Ot=e=>({itemColor:e.colorTextDescription,lastItemColor:e.colorText,iconFontSize:e.fontSize,linkColor:e.colorTextDescription,linkHoverColor:e.colorText,separatorColor:e.colorTextDescription,separatorMargin:e.marginXS}),wt=Ee("Breadcrumb",e=>{const t=Ie(e,{});return _t(t)},Ot);var Se=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Pt(e){const{breadcrumbName:t,children:n}=e,r=Se(e,["breadcrumbName","children"]),a=Object.assign({title:t},r);return n&&(a.menu={items:n.map(s=>{var{breadcrumbName:l}=s,m=Se(s,["breadcrumbName"]);return Object.assign(Object.assign({},m),{title:l})})}),a}function Et(e,t){return o.useMemo(()=>e||(t?t.map(Pt):null),[e,t])}var It=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const zt=(e,t)=>{if(t===void 0)return t;let n=(t||"").replace(/^\//,"");return Object.keys(e).forEach(r=>{n=n.replace(`:${r}`,e[r])}),n},K=e=>{const{prefixCls:t,separator:n="/",style:r,className:a,rootClassName:s,routes:l,items:m,children:g,itemRender:b,params:h={}}=e,u=It(e,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:d,direction:x,breadcrumb:p}=o.useContext(D);let f;const C=d("breadcrumb",t),[P,c,$]=wt(C),j=Et(m,l),N=Ct(C,b);if(j&&j.length>0){const y=[],w=m||l;f=j.map((T,L)=>{const{path:ae,key:X,type:oe,menu:H,overlay:U,onClick:q,className:le,separator:se,dropdownProps:ce}=T,W=zt(h,ae);W!==void 0&&y.push(W);const _=X??L;if(oe==="separator")return o.createElement(ie,{key:_},se);const G={},de=L===j.length-1;H?G.menu=H:U&&(G.overlay=U);let{href:V}=T;return y.length&&W!==void 0&&(V=`#/${y.join("/")}`),o.createElement(Ae,Object.assign({key:_},G,Pe(T,{data:!0,aria:!0}),{className:le,dropdownProps:ce,href:V,separator:de?"":n,onClick:q,prefixCls:C}),N(T,h,w,y,V))})}else if(g){const y=$e(g).length;f=$e(g).map((w,T)=>{if(!w)return w;const L=T===y-1;return Ne(w,{separator:L?"":n,key:T})})}const I=F(C,p==null?void 0:p.className,{[`${C}-rtl`]:x==="rtl"},a,s,c,$),O=Object.assign(Object.assign({},p==null?void 0:p.style),r);return P(o.createElement("nav",Object.assign({className:I,style:O},u),o.createElement("ol",null,f)))};K.Item=Le;K.Separator=ie;const he=E.createContext({});he.Consumer;var He=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Nt=e=>{var{prefixCls:t,className:n,avatar:r,title:a,description:s}=e,l=He(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:m}=o.useContext(D),g=m("list",t),b=F(`${g}-item-meta`,n),h=E.createElement("div",{className:`${g}-item-meta-content`},a&&E.createElement("h4",{className:`${g}-item-meta-title`},a),s&&E.createElement("div",{className:`${g}-item-meta-description`},s));return E.createElement("div",Object.assign({},l,{className:b}),r&&E.createElement("div",{className:`${g}-item-meta-avatar`},r),(a||s)&&h)},Bt=E.forwardRef((e,t)=>{const{prefixCls:n,children:r,actions:a,extra:s,styles:l,className:m,classNames:g,colStyle:b}=e,h=He(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:u,itemLayout:d}=o.useContext(he),{getPrefixCls:x,list:p}=o.useContext(D),f=O=>{var y,w;return F((w=(y=p==null?void 0:p.item)===null||y===void 0?void 0:y.classNames)===null||w===void 0?void 0:w[O],g==null?void 0:g[O])},C=O=>{var y,w;return Object.assign(Object.assign({},(w=(y=p==null?void 0:p.item)===null||y===void 0?void 0:y.styles)===null||w===void 0?void 0:w[O]),l==null?void 0:l[O])},P=()=>{let O=!1;return o.Children.forEach(r,y=>{typeof y=="string"&&(O=!0)}),O&&o.Children.count(r)>1},c=()=>d==="vertical"?!!s:!P(),$=x("list",n),j=a&&a.length>0&&E.createElement("ul",{className:F(`${$}-item-action`,f("actions")),key:"actions",style:C("actions")},a.map((O,y)=>E.createElement("li",{key:`${$}-item-action-${y}`},O,y!==a.length-1&&E.createElement("em",{className:`${$}-item-action-split`})))),N=u?"div":"li",I=E.createElement(N,Object.assign({},h,u?{}:{ref:t},{className:F(`${$}-item`,{[`${$}-item-no-flex`]:!c()},m)}),d==="vertical"&&s?[E.createElement("div",{className:`${$}-item-main`,key:"content"},r,j),E.createElement("div",{className:F(`${$}-item-extra`,f("extra")),key:"extra",style:C("extra")},s)]:[r,j,Ne(s,{key:"extra"})]);return u?E.createElement(Qe,{ref:t,flex:1,style:b},I):I}),De=Bt;De.Meta=Nt;const Rt=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:a,itemPaddingSM:s,itemPaddingLG:l,marginLG:m,borderRadiusLG:g}=e;return{[t]:{border:`${S(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:g,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${S(a)} ${S(m)}`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:s}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:l}}}},Mt=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:a,marginSM:s,margin:l}=e;return{[`@media screen and (max-width:${r}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:a}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:a}}}},[`@media screen and (max-width: ${n}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:s}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${S(l)}`}}}}}},Ft=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:a,paddingSM:s,marginLG:l,padding:m,itemPadding:g,colorPrimary:b,itemPaddingSM:h,itemPaddingLG:u,paddingXS:d,margin:x,colorText:p,colorTextDescription:f,motionDurationSlow:C,lineWidth:P,headerBg:c,footerBg:$,emptyTextPadding:j,metaMarginBottom:N,avatarMarginRight:I,titleMarginBottom:O,descriptionFontSize:y}=e;return{[t]:Object.assign(Object.assign({},ze(e)),{position:"relative","*":{outline:"none"},[`${t}-header`]:{background:c},[`${t}-footer`]:{background:$},[`${t}-header, ${t}-footer`]:{paddingBlock:s},[`${t}-pagination`]:{marginBlockStart:l,[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:a,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:g,color:p,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:I},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:p},[`${t}-item-meta-title`]:{margin:`0 0 ${S(e.marginXXS)} 0`,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:p,transition:`all ${C}`,"&:hover":{color:b}}},[`${t}-item-meta-description`]:{color:f,fontSize:y,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${S(d)}`,color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:P,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${S(m)} 0`,color:f,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:j,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:x,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:l},[`${t}-item-meta`]:{marginBlockEnd:N,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:O,color:p,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:m,marginInlineStart:"auto","> li":{padding:`0 ${S(m)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:u},[`${t}-sm ${t}-item`]:{padding:h},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Tt=e=>({contentWidth:220,itemPadding:`${S(e.paddingContentVertical)} 0`,itemPaddingSM:`${S(e.paddingContentVerticalSM)} ${S(e.paddingContentHorizontal)}`,itemPaddingLG:`${S(e.paddingContentVerticalLG)} ${S(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),kt=Ee("List",e=>{const t=Ie(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Ft(t),Rt(t),Mt(t)]},Tt);var At=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Lt(e,t){const{pagination:n=!1,prefixCls:r,bordered:a=!1,split:s=!0,className:l,rootClassName:m,style:g,children:b,itemLayout:h,loadMore:u,grid:d,dataSource:x=[],size:p,header:f,footer:C,loading:P=!1,rowKey:c,renderItem:$,locale:j}=e,N=At(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),I=n&&typeof n=="object"?n:{},[O,y]=o.useState(I.defaultCurrent||1),[w,T]=o.useState(I.defaultPageSize||10),{getPrefixCls:L,direction:ae,className:X,style:oe}=Ye("list"),{renderEmpty:H}=o.useContext(D),U={current:1,total:0},q=v=>(z,k)=>{var pe;y(z),T(k),n&&((pe=n==null?void 0:n[v])===null||pe===void 0||pe.call(n,z,k))},le=q("onChange"),se=q("onShowSizeChange"),ce=(v,z)=>{if(!$)return null;let k;return typeof c=="function"?k=c(v):c?k=v[c]:k=v.key,k||(k=`list-item-${z}`),o.createElement(o.Fragment,{key:k},$(v,z))},W=!!(u||n||C),_=L("list",r),[G,de,V]=kt(_);let A=P;typeof A=="boolean"&&(A={spinning:A});const me=!!(A!=null&&A.spinning),Xe=Ze(p);let Q="";switch(Xe){case"large":Q="lg";break;case"small":Q="sm";break}const We=F(_,{[`${_}-vertical`]:h==="vertical",[`${_}-${Q}`]:Q,[`${_}-split`]:s,[`${_}-bordered`]:a,[`${_}-loading`]:me,[`${_}-grid`]:!!d,[`${_}-something-after-last-item`]:W,[`${_}-rtl`]:ae==="rtl"},X,l,m,de,V),R=dt(U,{total:x.length,current:O,pageSize:w},n||{}),Ge=Math.ceil(R.total/R.pageSize);R.current=Math.min(R.current,Ge);const xe=n&&o.createElement("div",{className:F(`${_}-pagination`)},o.createElement(Me,Object.assign({align:"end"},R,{onChange:le,onShowSizeChange:se})));let ge=ye(x);n&&x.length>(R.current-1)*R.pageSize&&(ge=ye(x).splice((R.current-1)*R.pageSize,R.pageSize));const Ve=Object.keys(d||{}).some(v=>["xs","sm","md","lg","xl","xxl"].includes(v)),be=et(Ve),Y=o.useMemo(()=>{for(let v=0;v<je.length;v+=1){const z=je[v];if(be[z])return z}},[be]),Ke=o.useMemo(()=>{if(!d)return;const v=Y&&d[Y]?d[Y]:d.column;if(v)return{width:`${100/v}%`,maxWidth:`${100/v}%`}},[JSON.stringify(d),Y]);let ue=me&&o.createElement("div",{style:{minHeight:53}});if(ge.length>0){const v=ge.map(ce);ue=d?o.createElement(tt,{gutter:d.gutter},o.Children.map(v,z=>o.createElement("div",{key:z==null?void 0:z.key,style:Ke},z))):o.createElement("ul",{className:`${_}-items`},v)}else!b&&!me&&(ue=o.createElement("div",{className:`${_}-empty-text`},(j==null?void 0:j.emptyText)||(H==null?void 0:H("List"))||o.createElement(nt,{componentName:"List"})));const Z=R.position||"bottom",Je=o.useMemo(()=>({grid:d,itemLayout:h}),[JSON.stringify(d),h]);return G(o.createElement(he.Provider,{value:Je},o.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},oe),g),className:We},N),(Z==="top"||Z==="both")&&xe,f&&o.createElement("div",{className:`${_}-header`},f),o.createElement(Fe,Object.assign({},A),ue,b),C&&o.createElement("div",{className:`${_}-footer`},C),u||(Z==="bottom"||Z==="both")&&xe)))}const Ht=o.forwardRef(Lt),te=Ht;te.Item=De;const Dt=async e=>await re.get(`/find-analysis-by-id/${e}`),Xt=async e=>await re.post(`/run-analysis-v2/${e}`),{Search:Wt}=rt,{Text:Ce}=ne,Gt=({path:e,onSelectFile:t})=>{const[n,r]=o.useState([]),[a,s]=o.useState(e),[l,m]=o.useState(""),[g,b]=o.useState(1),[h,u]=o.useState(0),d=10,x=async(c=a,$=l,j=g)=>{const N=await re.get("/file-operation/list-dir-v2",{params:{path:c,keyword:$,page:j,limit:d}});r(N.data.items),u(N.data.total),s(c),b(j)};o.useEffect(()=>{x(e)},[e]);const p=c=>{x(`${a}/${c}`,"",1)},f=c=>{x(a,c,1)},C=c=>{t({path:a+"/"+c.name,file:c.name})},P=a.split("/").filter(Boolean);return i.jsxs(J,{title:"文件浏览器",extra:i.jsxs(ut,{children:[i.jsx(B,{icon:i.jsx(ve,{}),onClick:()=>x(e),size:"small",children:"重置"}),i.jsx(B,{icon:i.jsx(ve,{}),onClick:()=>x(a),size:"small",children:"刷新"})]}),children:[i.jsxs(K,{style:{marginBottom:"1rem"},children:[i.jsx(K.Item,{children:i.jsx("a",{onClick:()=>x("/"),children:"根目录"})}),P.map((c,$)=>i.jsx(K.Item,{children:i.jsx("a",{onClick:()=>{const j="/"+P.slice(0,$+1).join("/");x(j)},children:c})},$))]}),i.jsx(Wt,{placeholder:"搜索文件名",enterButton:"搜索",value:l,onChange:c=>m(c.target.value),onSearch:f,style:{marginBottom:16}}),i.jsx(te,{size:"small",bordered:!0,dataSource:n,locale:{emptyText:"暂无文件"},renderItem:c=>i.jsx(te.Item,{actions:c.is_dir?[i.jsx(B,{size:"small",onClick:()=>p(c.name),children:"进入"})]:[i.jsx(B,{type:"link",size:"small",icon:i.jsx($t,{}),href:`/brave-api/file-operation/download?path=${encodeURIComponent(a+"/"+c.name)}`,target:"_blank",children:"下载"}),i.jsx(B,{type:"link",size:"small",onClick:()=>C(c),children:"选择"})],children:i.jsx(te.Item.Meta,{avatar:c.is_dir?i.jsx(mt,{}):i.jsx(gt,{}),title:i.jsx(Ce,{strong:!0,style:{cursor:c.is_dir?"pointer":"default"},onClick:()=>c.is_dir&&p(c.name),children:c.name}),description:!c.is_dir&&i.jsxs(Ce,{type:"secondary",children:[(c.size/1024).toFixed(1)," KB"]})})})}),i.jsx(Me,{style:{marginTop:"1rem",textAlign:"center"},current:g,total:h,pageSize:d,onChange:c=>x(a,l,c),showSizeChanger:!1})]})},Vt=(e,t)=>re.post(`/fast-api/parse-analysis-result/${e}?save=${t}`),Kt=o.memo(({analysis_id:e,callback:t})=>{const[n,r]=o.useState(),[a,s]=o.useState(!1),{messageApi:l}=Be(),{modal:m,openModal:g,closeModal:b}=it(),h=async(u=!1)=>{s(!0);try{const d=await Vt(e,u);r(d.data),s(!1),t&&u&&t()}catch(d){s(!1),l.error(d.response.data.detail)}};return o.useEffect(()=>{h(!1)},[e]),i.jsxs(i.Fragment,{children:[i.jsx(J,{title:`输出结果 ${e}`,extra:i.jsxs(Re,{gap:"small",align:"center",children:[(n==null?void 0:n.file_format_list)&&i.jsx(i.Fragment,{children:n==null?void 0:n.file_format_list.map(u=>i.jsx(B,{size:"small",color:"cyan",variant:"solid",onClick:()=>g("modalA",{params:{component_id:u.component_id},title:u.name}),children:u.name}))}),i.jsx(at,{title:"确定解析吗？",onConfirm:()=>{h(!0),l.success("解析成功")},children:i.jsx(B,{size:"small",color:"cyan",variant:"solid",children:"解析"})}),i.jsx(B,{size:"small",color:"primary",variant:"solid",onClick:()=>h(!1),children:"刷新"})]}),children:i.jsx(Fe,{spinning:a,children:n&&i.jsx(i.Fragment,{children:n!=null&&n.error?i.jsx(ne,{children:i.jsx("pre",{children:n==null?void 0:n.error})}):i.jsxs(i.Fragment,{children:[i.jsx(pt,{size:"small",pagination:!1,rowKey:"component_id",columns:[{title:"名称",dataIndex:"name",key:"name"},{title:"目录",dataIndex:"dir",key:"dir"},{title:"文件组件ID",dataIndex:"component_id",key:"component_id"},{title:"文件格式",dataIndex:"fileFormat",key:"fileFormat",render:(u,d)=>i.jsx("div",{style:{overflowWrap:"break-word",wordBreak:"break-all"},children:JSON.stringify(d.fileFormat)})},{title:"操作",dataIndex:"component_id",key:"component_id",render:(u,d)=>i.jsx(i.Fragment,{children:i.jsx(B,{color:"cyan",variant:"solid",size:"small",onClick:()=>{g("modalC",{data:{component_id:d.component_id},structure:{component_type:"file",files:n==null?void 0:n.file_dict[d.dir]}})},children:"编辑"})})}],dataSource:n==null?void 0:n.file_format_list}),i.jsx(J,{style:{maxHeight:"20rem",overflow:"auto"},children:i.jsx(ne,{children:i.jsx("pre",{children:JSON.stringify(n,null,2)})})})]})})})}),i.jsx(ft,{callback:h,visible:m.key=="modalC"&&m.visible,onClose:b,params:m.params}),i.jsx(ht,{visible:m.key=="modalA"&&m.visible,params:m.params,onClose:b,analysis:n})]})}),_e=({file_path:e})=>{o.useEffect(()=>{e&&r(e)},[e]);const[t,n]=o.useState([]),r=async(a,s=!1)=>{const l=await lt(a);a.endsWith(".json")?n(JSON.stringify(JSON.parse(l.data),null,2)):n(l.data)};return i.jsx(i.Fragment,{children:i.jsx(J,{title:i.jsxs(Te,{color:"blue",children:["文件: ",e]}),extra:i.jsx(B,{size:"small",color:"cyan",variant:"solid",onClick:()=>{r(e)},children:"刷新日志"}),bodyStyle:{padding:0},children:i.jsx(ne,{children:i.jsx("pre",{style:{margin:0},children:t})})})})},Jt=({output_dir:e,...t})=>(JSON.stringify(t),i.jsx(Gt,{path:e})),Ut={output_dir:Jt,workflow_log_file:ee,executor_log_file:ee,trace_file:ee,command_log_path:ee,params_path:_e,command_path:_e,result_parse:Kt},qt=({fileTabKey:e,analysis:t,contentMap:n,file:r,setContentMap:a,fileKey:s})=>{const l=Ut[s];return l?i.jsx(l,{...t,file_path:r,content:n[s],file:r,setContentMap:a,fileKey:s}):i.jsx(i.Fragment,{children:"no component"})},Qt=o.memo(({analysis:e,callback:t})=>{const[n,r]=o.useState({}),[a,s]=o.useState("command_log_path"),{messageApi:l}=Be(),{eventSourceRef:m,status:g,reconnect:b}=ot(),h=o.useRef(0),u=o.useRef(a);if(!e)return null;const d={workflow_log_file:e.workflow_log_file,executor_log_file:e.executor_log_file,trace_file:e.trace_file,params_path:e.params_path,command_path:e.command_path,command_log_path:e.command_log_path},x=async()=>{await Xt(e==null?void 0:e.analysis_id),l.success("运行成功"),r(f=>({...f,workflow_log_file:{content:[],offset:0},executor_log_file:{content:[],offset:0},trace_file:{content:[],offset:0}})),h.current=0,t&&t()},p=[{key:"command_log_path",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.command_log_path})})}),children:"运行日志"})},{key:"trace_file",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.trace_file})})}),children:"运行进度"})},{key:"workflow_log_file",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.workflow_log_file})})}),children:"工作流日志"})},{key:"executor_log_file",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.executor_log_file})})}),children:"执行器日志"})},{key:"params_path",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.params_path})})}),children:"参数"})},{key:"command_path",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.command_path})})}),children:"命令"})},{key:"output_dir",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"输出文件"})},{key:"result_parse",label:i.jsx(M,{title:i.jsx(i.Fragment,{children:i.jsx("ul",{children:i.jsx("li",{children:e==null?void 0:e.output_dir})})}),children:"结果解析"})}];return i.jsx(i.Fragment,{children:i.jsx(st,{tabBarExtraContent:i.jsxs(Re,{gap:"small",align:"center",children:[i.jsx(Te,{color:"cyan",children:e==null?void 0:e.analysis_status}),i.jsx(M,{title:i.jsx(i.Fragment,{children:d[a]})}),i.jsx(M,{title:i.jsx(i.Fragment,{children:e==null?void 0:e.analysis_id}),children:i.jsx(B,{disabled:e.analysis_status=="running",size:"small",color:"cyan",variant:"solid",onClick:x,children:e.analysis_status=="created"?"运行":"重新运行"})})]}),activeKey:a,onChange:f=>{s(f),u.current=f},size:"small",items:p.map(f=>({key:f.key,label:f.label,children:i.jsx(qt,{file:d[f.key],fileKey:f.key,analysis:e,contentMap:n,setContentMap:r})}))})})}),ln=o.forwardRef(({visible:e,params:t,onClose:n,callback:r},a)=>{const s=async()=>{l(),r&&r()},l=async()=>{const d=(await Dt(b)).data;g(d)},[m,g]=o.useState();if(o.useImperativeHandle(a,()=>({relaod:l})),o.useEffect(()=>{e&&l()},[t==null?void 0:t.analysis_id]),!e)return null;const{analysis_id:b,...h}=t;return i.jsx(i.Fragment,{children:i.jsx(J,{title:`流程监控 ${b}`,extra:i.jsx(i.Fragment,{children:i.jsx(B,{size:"small",onClick:n,color:"cyan",variant:"solid",children:"关闭"})}),children:i.jsx(Qt,{analysis:m,callback:s,loadAnalysis:l})})})});export{Qt as F,ln as P,Dt as f,Xt as r};
