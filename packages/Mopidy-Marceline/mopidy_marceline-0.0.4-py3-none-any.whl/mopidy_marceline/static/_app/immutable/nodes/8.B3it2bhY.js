import{e as E}from"../chunks/Y5PCoc8t.js";import{b as F}from"../chunks/Ddm0HaqK.js";import"../chunks/NZTpNUN0.js";import{p as j,j as G,k as H,t as z,e as J,b as o,h as a,u as y,c as w,g as n,a as m,f as N,n as Q,C as W}from"../chunks/UrJQk2wB.js";import{s as X,r as Y,i as l}from"../chunks/pHb7WOhl.js";import{L as Z,g as K,s as $,I as tt}from"../chunks/BeziK-YA.js";import{A as et}from"../chunks/CvGzV67w.js";import{A as rt}from"../chunks/CYeAbrce.js";import{L as at,V as it}from"../chunks/CHRLkBqO.js";import{P as ot}from"../chunks/BOfVCx2Z.js";import{T as st}from"../chunks/EBMUtFFV.js";import{T as nt}from"../chunks/Bph_h76x.js";const mt=async({params:s,parent:t})=>{const{mopidy:e}=await t(),r=s.directory===""?null:F(s.directory),c=e.getDirectory(r);if(!c)throw E(404,"Directory not found");return await e.requestImages(c.children.map(p=>p.uri)),{directory:c}},At=Object.freeze(Object.defineProperty({__proto__:null,load:mt},Symbol.toStringTag,{value:"Module"}));function lt(s,t){j(t,!0);let e=Y(t,["$$slots","$$events","$$legacy","directory"]);{let r=y(()=>t.directory.uri??void 0);Z(s,X({path:"library",get uri(){return a(r)}},()=>e,{children:(c,p)=>{G();var g=H();z(()=>J(g,t.directory.name)),o(c,g)},$$slots:{default:!0}}))}w()}var ct=N('<img class="aspect-square h-full rounded-full object-cover" alt="Album cover"/>');function ut(s,t){j(t,!0);const e=K();let r=y(()=>t.directory.uri?e.getImage(t.directory.uri):void 0);at(s,{containerClass:"relative",lines:1,leading:g=>{var v=n(),_=m(v);{var b=u=>{var i=ct();z(()=>$(i,"src",a(r))),o(u,i)},I=u=>{tt(u,{icon:"folder"})};l(_,u=>{a(r)?u(b):u(I,!1)})}o(g,v)},labelText:g=>{lt(g,{contained:!1,get directory(){return t.directory}})},$$slots:{leading:!0,labelText:!0}}),w()}function ft(s,t){j(t,!0);const e=K();var r=n(),c=m(r);{var p=v=>{const _=y(()=>e.getDirectory(t.item.uri));var b=n(),I=m(b);{var u=i=>{ut(i,{get directory(){return a(_)}})};l(I,i=>{a(_)&&i(u)})}o(v,b)},g=v=>{var _=n(),b=m(_);{var I=i=>{const h=y(()=>e.getAlbum(t.item.uri));var A=n(),R=m(A);{var q=f=>{et(f,{get album(){return a(h)}})};l(R,f=>{a(h)&&f(q)})}o(i,A)},u=i=>{var h=n(),A=m(h);{var R=f=>{const k=y(()=>e.getArtist(t.item.uri));var D=n(),C=m(D);{var M=d=>{rt(d,{get artist(){return a(k)}})};l(C,d=>{a(k)&&d(M)})}o(f,D)},q=f=>{var k=n(),D=m(k);{var C=d=>{const x=y(()=>e.getTrack(t.item.uri));var P=n(),O=m(P);{var T=L=>{st(L,{get track(){return a(x)}})};l(O,L=>{a(x)&&L(T)})}o(d,P)},M=d=>{var x=n(),P=m(x);{var O=T=>{const L=y(()=>e.getPlaylist(t.item.uri));var V=n(),U=m(V);{var B=S=>{ot(S,{get playlist(){return a(L)}})};l(U,S=>{a(L)&&S(B)})}o(T,V)};l(P,T=>{t.item.type==="playlist"&&T(O)},!0)}o(d,x)};l(D,d=>{t.item.type==="track"?d(C):d(M,!1)},!0)}o(f,k)};l(A,f=>{t.item.type==="artist"?f(R):f(q,!1)},!0)}o(i,h)};l(b,i=>{t.item.type==="album"?i(I):i(u,!1)},!0)}o(v,_)};l(c,v=>{t.item.type==="directory"?v(p):v(g,!1)})}o(s,r),w()}function dt(s,t){it(s,{get data(){return t.items},getKey:r=>r.uri,item:(r,c=Q)=>{ft(r,{get item(){return c()}})},$$slots:{item:!0}})}function Dt(s,t){j(t,!0),W(e=>{{let r=y(()=>t.data.directory.name??"Library");nt(e,{get text(){return a(r)}})}}),dt(s,{get items(){return t.data.directory.children}}),w()}export{Dt as component,At as universal};
