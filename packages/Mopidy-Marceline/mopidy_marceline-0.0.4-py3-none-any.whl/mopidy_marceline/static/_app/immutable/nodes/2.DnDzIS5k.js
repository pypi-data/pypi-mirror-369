import"../chunks/NZTpNUN0.js";import{F as le,aB as de,al as T,D as he,w as fe,an as pe,aC as ve,ah as G,N as me,aD as $,h as a,aa as k,aE as H,u as i,p as C,g as A,a as w,b,c as R,f as q,aF as ge,s as E,o as ee,d as Q,n as j,r as B,aG as ke,t as be,as as ye,i as _e,C as xe,j as we}from"../chunks/UrJQk2wB.js";import{B as Ce}from"../chunks/DFVlHxbj.js";import{t as Re,T as qe}from"../chunks/Bph_h76x.js";import{p as m,i as L,r as X,s as ae,c as De}from"../chunks/pHb7WOhl.js";import{C as ne,f as Se,w as J,E as ze,h as Te,j as Ae,k as Le,l as Pe,n as Ie,o as Ee,p as Qe,d as ie,r as te,a as U,q as je,u as Be,v as x,t as Ne,m as Me,S as Oe,x as Ve,b as Fe,s as Ge,g as oe}from"../chunks/BeziK-YA.js";import{t as re,d as He,f as Ke}from"../chunks/CC-W-nbA.js";import{s as We}from"../chunks/DrCeuVdx.js";import{i as Je}from"../chunks/CFSnNMfQ.js";import{t as Ue}from"../chunks/B5oxSMin.js";import{T as Xe}from"../chunks/EBMUtFFV.js";import{V as Ye}from"../chunks/CHRLkBqO.js";function Ze(t,e,r=e){var n=le(),s=new WeakSet;de(t,"input",u=>{var o=u?t.defaultValue:t.value;if(o=K(t)?W(o):o,r(o),T!==null&&s.add(T),n&&o!==(o=e())){var v=t.selectionStart,h=t.selectionEnd;t.value=o??"",h!==null&&(t.selectionStart=v,t.selectionEnd=Math.min(h,t.value.length))}}),(he&&t.defaultValue!==t.value||fe(e)==null&&t.value)&&(r(K(t)?W(t.value):t.value),T!==null&&s.add(T)),pe(()=>{var u=e();if(t===document.activeElement){var o=ve??T;if(s.has(o))return}K(t)&&u===W(t.value)||t.type==="date"&&!u&&!t.value||u!==t.value&&(t.value=u??"")})}function K(t){var e=t.type;return e==="number"||e==="range"}function W(t){return t===""?null:+t}var $e=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],et=["difference","intersection","symmetricDifference","union"],se=!1;class P extends Set{#r=new Map;#e=G(0);#t=G(0);#a=$||-1;constructor(e){if(super(),e){for(var r of e)super.add(r);this.#t.v=super.size}se||this.#n()}#s(e){return $===this.#a?G(e):me(e)}#n(){se=!0;var e=P.prototype,r=Set.prototype;for(const n of $e)e[n]=function(...s){return a(this.#e),r[n].apply(this,s)};for(const n of et)e[n]=function(...s){a(this.#e);var u=r[n].apply(this,s);return new P(u)}}has(e){var r=super.has(e),n=this.#r,s=n.get(e);if(s===void 0){if(!r)return a(this.#e),!1;s=this.#s(!0),n.set(e,s)}return a(s),r}add(e){return super.has(e)||(super.add(e),k(this.#t,super.size),H(this.#e)),this}delete(e){var r=super.delete(e),n=this.#r,s=n.get(e);return s!==void 0&&(n.delete(e),k(s,!1)),r&&(k(this.#t,super.size),H(this.#e)),r}clear(){if(super.size!==0){super.clear();var e=this.#r;for(var r of e.values())k(r,!1);e.clear(),k(this.#t,0),H(this.#e)}}keys(){return this.values()}values(){return a(this.#e),super.values()}entries(){return a(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return a(this.#t)}}const tt=Qe({component:"checkbox",parts:["root","group","group-label","input"]}),rt=new ne("Checkbox.Group"),ue=new ne("Checkbox.Root");class Y{static create(e,r=null){return ue.set(new Y(e,r))}opts;group;#r=i(()=>this.group&&this.group.opts.name.current?this.group.opts.name.current:this.opts.name.current);get trueName(){return a(this.#r)}set trueName(e){k(this.#r,e)}#e=i(()=>this.group&&this.group.opts.required.current?!0:this.opts.required.current);get trueRequired(){return a(this.#e)}set trueRequired(e){k(this.#e,e)}#t=i(()=>this.group&&this.group.opts.disabled.current?!0:this.opts.disabled.current);get trueDisabled(){return a(this.#t)}set trueDisabled(e){k(this.#t,e)}#a=i(()=>this.group&&this.group.opts.readonly.current?!0:this.opts.readonly.current);get trueReadonly(){return a(this.#a)}set trueReadonly(e){k(this.#a,e)}attachment;constructor(e,r){this.opts=e,this.group=r,this.attachment=Se(this.opts.ref),this.onkeydown=this.onkeydown.bind(this),this.onclick=this.onclick.bind(this),J.pre([()=>We(this.group?.opts.value.current),()=>this.opts.value.current],([n,s])=>{!n||!s||(this.opts.checked.current=n.includes(s))}),J.pre(()=>this.opts.checked.current,n=>{this.group&&(n?this.group?.addValue(this.opts.value.current):this.group?.removeValue(this.opts.value.current))})}onkeydown(e){this.trueDisabled||this.trueReadonly||(e.key===ze&&e.preventDefault(),e.key===Te&&(e.preventDefault(),this.#s()))}#s(){this.opts.indeterminate.current?(this.opts.indeterminate.current=!1,this.opts.checked.current=!0):this.opts.checked.current=!this.opts.checked.current}onclick(e){if(!(this.trueDisabled||this.trueReadonly)){if(this.opts.type.current==="submit"){this.#s();return}e.preventDefault(),this.#s()}}#n=i(()=>({checked:this.opts.checked.current,indeterminate:this.opts.indeterminate.current}));get snippetProps(){return a(this.#n)}set snippetProps(e){k(this.#n,e)}#i=i(()=>({id:this.opts.id.current,role:"checkbox",type:this.opts.type.current,disabled:this.trueDisabled,"aria-checked":Ee(this.opts.checked.current,this.opts.indeterminate.current),"aria-required":Ie(this.trueRequired),"aria-readonly":Pe(this.trueReadonly),"data-disabled":Le(this.trueDisabled),"data-readonly":Ae(this.trueReadonly),"data-state":st(this.opts.checked.current,this.opts.indeterminate.current),[tt.root]:"",onclick:this.onclick,onkeydown:this.onkeydown,...this.attachment}));get props(){return a(this.#i)}set props(e){k(this.#i,e)}}class Z{static create(){return new Z(ue.get())}root;#r=i(()=>this.root.group?!!(this.root.opts.value.current!==void 0&&this.root.group.opts.value.current.includes(this.root.opts.value.current)):this.root.opts.checked.current);get trueChecked(){return a(this.#r)}set trueChecked(e){k(this.#r,e)}#e=i(()=>!!this.root.trueName);get shouldRender(){return a(this.#e)}set shouldRender(e){k(this.#e,e)}constructor(e){this.root=e}#t=i(()=>({type:"checkbox",checked:this.root.opts.checked.current===!0,disabled:this.root.trueDisabled,required:this.root.trueRequired,name:this.root.trueName,value:this.root.opts.value.current,readonly:this.root.trueReadonly}));get props(){return a(this.#t)}set props(e){k(this.#t,e)}}function st(t,e){return e?"indeterminate":t?"checked":"unchecked"}var at=q("<input/>"),nt=q("<input/>");function it(t,e){C(e,!0);let r=m(e,"value",15),n=X(e,["$$slots","$$events","$$legacy","value"]);const s=i(()=>ie(n,{"aria-hidden":"true",tabindex:-1,style:je}));var u=A(),o=w(u);{var v=p=>{var c=at();te(c),U(c,()=>({...a(s),value:r()})),b(p,c)},h=p=>{var c=nt();te(c),U(c,()=>({...a(s)})),Ze(c,r),b(p,c)};L(o,p=>{a(s).type==="checkbox"?p(v):p(h,!1)})}b(t,u),R()}function ot(t,e){C(e,!1);const r=Z.create();Je();var n=A(),s=w(n);{var u=o=>{it(o,ae(()=>r.props))};L(s,o=>{r.shouldRender&&o(u)})}b(t,n),R()}var ut=q("<button><!></button>"),ct=q("<!> <!>",1);function lt(t,e){const r=ge();C(e,!0);let n=m(e,"checked",15,!1),s=m(e,"ref",15,null),u=m(e,"disabled",3,!1),o=m(e,"required",3,!1),v=m(e,"name",3,void 0),h=m(e,"value",3,"on"),p=m(e,"id",19,()=>Be(r)),c=m(e,"indeterminate",15,!1),y=m(e,"type",3,"button"),l=X(e,["$$slots","$$events","$$legacy","checked","ref","onCheckedChange","children","disabled","required","name","value","id","indeterminate","onIndeterminateChange","child","type","readonly"]);const f=rt.getOr(null);f&&h()&&(f.opts.value.current.includes(h())?n(!0):n(!1)),J.pre(()=>h(),()=>{f&&h()&&(f.opts.value.current.includes(h())?n(!0):n(!1))});const g=Y.create({checked:x.with(()=>n(),d=>{n(d),e.onCheckedChange?.(d)}),disabled:x.with(()=>u()??!1),required:x.with(()=>o()),name:x.with(()=>v()),value:x.with(()=>h()),id:x.with(()=>p()),ref:x.with(()=>s(),d=>s(d)),indeterminate:x.with(()=>c(),d=>{c(d),e.onIndeterminateChange?.(d)}),type:x.with(()=>y()),readonly:x.with(()=>!!e.readonly)},f),I=i(()=>ie({...l},g.props));var D=ct(),S=w(D);{var N=d=>{var _=A(),z=w(_);{let V=i(()=>({props:a(I),...g.snippetProps}));ee(z,()=>e.child,()=>a(V))}b(d,_)},M=d=>{var _=ut();U(_,()=>({...a(I)}));var z=Q(_);ee(z,()=>e.children??j,()=>g.snippetProps),B(_),b(d,_)};L(S,d=>{e.child?d(N):d(M,!1)})}var O=E(S,2);ot(O,{}),b(t,D),R()}const dt=Me({slots:{container:"group/state-layer size-4.5 border-outline rounded-xxs not-ui-unchecked:bg-primary not-ui-unchecked:border-primary text-on-surface not-ui-unchecked:text-on-primary disabled:border-on-surface/38 disabled:not-ui-unchecked:bg-on-surface/38 disabled:not-ui-unchecked:border-transparent disabled:text-surface relative inline-flex cursor-pointer items-center justify-center border-2 transition-colors *:absolute disabled:cursor-default",icon:"size-3.5 fill-none stroke-current stroke-2 linecap-butt linejoin-square",stateLayer:"group-not-ui-unchecked/state-layer:text-primary size-10 rounded-full"}}),ht=Ne(dt);var ft=ke('<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg"><path></path></svg>'),pt=q("<!> <!>",1);function ce(t,e){C(e,!0);const r=(c,y=j)=>{var l=ft(),f=Q(l);B(l),be(g=>{Fe(l,0,g),Ge(f,"d",y())},[()=>Ve(a(v).icon({class:e.iconClass}))]),re(1,f,()=>He,()=>({duration:300})),re(2,f,()=>Ke,()=>({duration:300})),b(c,l)};let n=m(e,"checked",15,!1),s=m(e,"indeterminate",15,!1),u=m(e,"ref",15,null),o=X(e,["$$slots","$$events","$$legacy","checked","containerClass","iconClass","indeterminate","ref","stateLayerClass"]),v=i(()=>ht({}));var h=A(),p=w(h);{const c=(l,f)=>{let g=()=>f?.().checked,I=()=>f?.().indeterminate;var D=pt(),S=w(D);{let d=i(()=>a(v).stateLayer({class:e.stateLayerClass}));Oe(S,{get containerClass(){return a(d)},get target(){return u()}})}var N=E(S,2);{var M=d=>{r(d,()=>"M 2 7 H 12")},O=d=>{var _=A(),z=w(_);{var V=F=>{r(F,()=>"M 2.4 7.4 L 5 10 L 11.6 3.4")};L(z,F=>{g()&&F(V)},!0)}b(d,_)};L(N,d=>{I()?d(M):d(O,!1)})}b(l,D)};let y=i(()=>a(v).container({class:e.containerClass}));De(p,()=>lt,(l,f)=>{f(l,ae({get class(){return a(y)}},()=>o,{get ref(){return u()},set ref(g){u(g)},get checked(){return n()},set checked(g){n(g)},get indeterminate(){return s()},set indeterminate(g){s(g)},children:c,$$slots:{default:!0}}))})}b(t,h),R()}const vt=async({parent:t})=>{const{mopidy:e}=await t();return await e.requestImages(e.queue.map(r=>r.track.uri)),{}},It=Object.freeze(Object.defineProperty({__proto__:null,load:vt},Symbol.toStringTag,{value:"Module"})),mt=t=>[{action:()=>t.clearQueue(),icon:"close",label:"Clear"},{action:()=>t.shuffleQueue(),icon:"shuffle",label:"Shuffle"}],gt=(t,e)=>[{action:()=>t.removeFromQueue(e),icon:"close",label:"Remove from Queue"},"divider",...Re(t,e)],kt=(t,e)=>[{action:()=>t.skipToTrack(e),icon:"skip_next",label:"Skip to Track"},{action:()=>t.removeFromQueue(e),icon:"close",label:"Remove from Queue"},"divider",...Ue(t,e.track)];function bt(t,e){C(e,!0);let r=m(e,"selected",15,!1),n=m(e,"selecting",3,!1);const s=oe();let u=i(()=>kt(s,e.track)),o=i(()=>e.track.tlid===s.currentTrack?.tlid),v=i(()=>e.index??s.queue.findIndex(p=>p.tlid===e.track.tlid)+1),h=i(()=>e.maxIndex??s.queue.length+1);{const p=y=>{{let l=i(()=>n()?"":"group-[&:not(:hover)]/list-item:opacity-0");ce(y,{get containerClass(){return`transition-opacity ${a(l)??""}`},stateLayerClass:"z-20",get checked(){return r()},set checked(f){r(f)}})}};let c=i(()=>n()?"opacity-0":"group-hover/list-item:opacity-0");Xe(t,{get actions(){return a(u)},get active(){return a(o)},get index(){return a(v)},get indexClass(){return a(c)},get maxIndex(){return a(h)},get track(){return e.track.track},leading:p,$$slots:{leading:!0}})}R()}function yt(t,e){C(e,!0);let r=m(e,"selected",27,()=>ye(new P)),n=i(()=>r().size>0);Ye(t,{get data(){return e.tracks},getKey:u=>u.tlid,item:(u,o=j,v=j)=>{var h=()=>r().has(o()),p=c=>c?r().add(o()):r().delete(o());{let c=i(()=>v()+1);bt(u,{get index(){return a(c)},get maxIndex(){return e.tracks.length},get selecting(){return a(n)},get track(){return o()},get selected(){return h()},set selected(y){p(y)}})}},$$slots:{item:!0}}),R()}var _t=q('<div class="flex flex-row items-center gap-2 px-4 pt-5 pb-2"><span class="flex shrink-0 grow flex-row items-center gap-2"><!> <h1 class="text-display-l">Queue</h1></span> <!></div> <!>',1);function Et(t,e){C(e,!0);const r=oe();let n=i(()=>mt(r)),s=new P,u=i(()=>gt(r,[...s]));_e(()=>{for(const l of s)r.queue.includes(l)||s.delete(l)});var o=_t();xe(l=>{{let f=i(()=>r.currentTrack?.track.name??"Queue");qe(l,{get text(){return a(f)}})}});var v=w(o),h=Q(v),p=Q(h);{let l=i(()=>s.size==r.queue.length),f=i(()=>s.size==0?"hidden":""),g=i(()=>s.size>0);ce(p,{get checked(){return a(l)},get containerClass(){return a(f)},get indeterminate(){return a(g)}})}we(2),B(h);var c=E(h,2);{let l=i(()=>s.size==0?a(n):a(u));Ce(c,{get actions(){return a(l)}})}B(v);var y=E(v,2);yt(y,{get tracks(){return r.queue},get selected(){return s},set selected(l){s=l}}),b(t,o),R()}export{Et as component,It as universal};
