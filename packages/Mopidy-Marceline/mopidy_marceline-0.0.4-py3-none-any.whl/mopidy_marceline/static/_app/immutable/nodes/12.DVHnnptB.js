import{e as K}from"../chunks/Y5PCoc8t.js";import{b as N}from"../chunks/Ddm0HaqK.js";import"../chunks/NZTpNUN0.js";import{p as B,c as F,h as j,f as d,a as A,s as a,b as o,t as k,e as b,j as H,k as O,u as R,C as Q,d as U,r as M}from"../chunks/UrJQk2wB.js";import{i as T}from"../chunks/pHb7WOhl.js";import{g as V,e as z,i as E}from"../chunks/BeziK-YA.js";import{S as W}from"../chunks/BPuXUJEF.js";import{T as X,f as Y,a as Z}from"../chunks/BeBD-SQy.js";import{t as $}from"../chunks/B5oxSMin.js";import{A as G}from"../chunks/J22P2KdH.js";import{A as S}from"../chunks/DXj5TzyV.js";import{H as tt}from"../chunks/Bf4W-0fO.js";import{I as _}from"../chunks/C9FB0Zgs.js";import{T as rt}from"../chunks/Bph_h76x.js";const at=async({params:h,parent:t})=>{const{mopidy:i}=await t(),n=i.getTrack(N(h.track));n||K(404,"Track not found");const p=await i.requestLyrics(n),x=(await i.requestImages([n.uri]))?.at(0),m=x?await i.requestPalette(x):void 0;return{lyrics:p,palette:m,track:n}},wt=Object.freeze(Object.defineProperty({__proto__:null,load:at},Symbol.toStringTag,{value:"Module"}));var et=d("<!> <!>",1),ot=d("<!> ",1),it=d("<!> <!> <!> <!> <!> <!> <!>",1);function nt(h,t){B(t,!0);const i=V();let n=R(()=>i.getImage(t.track.uri)),p=R(()=>$(i,t.track));tt(h,{get actions(){return j(p)},get image(){return j(n)},title:v=>{X(v,{get track(){return t.track}})},subtitle:v=>{var f=et(),u=A(f);S(u,{get artists(){return t.track.artists}});var s=a(u),g=a(s);G(g,{get album(){return t.track.album}}),k(()=>b(s,` ${W} `)),o(v,f)},info:v=>{var f=it(),u=A(f);_(u,{icon:"album",tooltip:"Album",children:(r,c)=>{var e=ot(),l=A(e);G(l,{get album(){return t.track.album}});var J=a(l);k(()=>b(J,` (#${t.track.track_no??""})`)),o(r,e)}});var s=a(u,2);_(s,{icon:"person",tooltip:"Artists",children:(r,c)=>{S(r,{get artists(){return t.track.artists}})}});var g=a(s,2);{var q=r=>{_(r,{icon:"artist",tooltip:"Performers",children:(c,e)=>{S(c,{get artists(){return t.track.performers}})}})};T(g,r=>{t.track.performers?.length>0&&r(q)})}var L=a(g,2);{var D=r=>{_(r,{icon:"person_edit",tooltip:"Composers",children:(c,e)=>{S(c,{get artists(){return t.track.composers}})}})};T(L,r=>{t.track.composers?.length>0&&r(D)})}var y=a(L,2);{var C=r=>{_(r,{icon:"music_note",tooltip:"Genre",children:(c,e)=>{H();var l=O();k(()=>b(l,t.track.genre)),o(c,l)}})};T(y,r=>{t.track.genre&&r(C)})}var I=a(y,2);_(I,{icon:"calendar_today",tooltip:"Release date",children:(r,c)=>{H();var e=O();k(l=>b(e,l),[()=>Y(new Date(t.track.date))]),o(r,e)}});var P=a(I,2);_(P,{icon:"timer",tooltip:"Duration",children:(r,c)=>{H();var e=O();k(l=>b(e,l),[()=>Z(t.track.length)]),o(r,e)}}),o(v,f)},$$slots:{title:!0,subtitle:!0,info:!0}}),F()}var st=d("<br/>"),ct=d("<!> ",1),lt=d('<p class="mb-4 text-body-l"></p>'),mt=d('<div class="mx-4"><h2 class="mb-4 text-display-m">Lyrics</h2> <!></div>'),dt=d("<!> <!>",1);function Lt(h,t){B(t,!0);var i=dt();Q(m=>{rt(m,{get text(){return t.data.track.name}})});var n=A(i);nt(n,{get track(){return t.data.track}});var p=a(n,2);{var x=m=>{var w=mt(),v=a(U(w),2);z(v,17,()=>t.data.lyrics.plain,E,(f,u)=>{var s=lt();z(s,21,()=>j(u),E,(g,q,L)=>{var D=ct(),y=A(D);{var C=P=>{var r=st();o(P,r)};T(y,P=>{L>0&&P(C)})}var I=a(y);k(()=>b(I,` ${j(q)??""}`)),o(g,D)}),M(s),o(f,s)}),M(w),o(m,w)};T(p,m=>{t.data.lyrics&&t.data.lyrics.plain.length>0&&m(x)})}o(h,i),F()}export{Lt as component,wt as universal};
