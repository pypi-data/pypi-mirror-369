import"./NZTpNUN0.js";import{g as D,a as U,b as W,h as u,p as re,c as ne,u as O,i as de,aA as ge,o as Le,aa as se,ah as ie,as as Re,ag as Ve,v as ce}from"./UrJQk2wB.js";import{s as Oe,r as Te,p as k,b as me,i as pe}from"./pHb7WOhl.js";import{M as Ee,a as Me,L as ke,b as Pe}from"./DrCeuVdx.js";import{e as he,i as Be,d as Ke,c as ve,a as Se}from"./BeziK-YA.js";import{g as Ce}from"./C5oMoppe.js";function qe(e,t){Ee(e,{strategy:"context",get trigger(){return t.trigger},children:(r,i)=>{var o=D(),l=U(o);he(l,17,()=>t.actions,Be,(f,n)=>{Me(f,{get action(){return u(n)}})}),W(r,o)},$$slots:{default:!0}})}function vt(e,t){re(t,!0);let r=Te(t,["$$slots","$$events","$$legacy","actions"]);qe(e,{get actions(){return t.actions},trigger:(o,l)=>{let f=()=>l?.().props;{let n=O(()=>Ke(r,f()));ke(o,Oe(()=>u(n)))}}}),ne()}const be=e=>Object.keys(e).reduce((t,r)=>{const i=e[r];return i==null?t:t+`${r}:${i};`},""),Ae=(e,t)=>"_"+t;function*Je([e,t]){for(let r=e;r<=t;r++)yield r}const J=null,{min:P,max:T,abs:ue,floor:De}=Math,ze=(e,t,r)=>P(r,T(t,e)),Ue=e=>[...e].sort((t,r)=>t-r),We=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},le=e=>{let t;return()=>(e&&(t=e(),e=void 0),t)},B=-1,ee=(e,t,r)=>{const i=r?"unshift":"push";for(let o=0;o<t;o++)e[i](B);return e},te=(e,t)=>{const r=e.t[t];return r===B?e.o:r},Xe=(e,t,r)=>{const i=e.t[t]===B;return e.t[t]=r,e.i=P(t,e.i),i},Q=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let r=e.i,i=e.u[r];for(;r<t;)i+=te(e,r),e.u[++r]=i;return e.i=t,i},M=(e,t,r=0,i=e.l-1)=>{for(;r<=i;){const o=De((r+i)/2),l=Q(e,o);if(l<=t){if(l+te(e,o)>t)return o;r=o+1}else i=o-1}return ze(r,0,e.l-1)},fe=(e,t,r)=>{const i=t-e.l;return e.i=r?-1:P(t-1,e.i),e.l=t,i>0?(ee(e.u,i),ee(e.t,i,r),e.o*i):(e.u.splice(i),(r?e.t.splice(0,-i):e.t.splice(i)).reduce((o,l)=>o-(l===B?e.o:l),0))},Ye=typeof window<"u",ye=()=>document.documentElement,Ge=e=>e.ownerDocument,je=e=>e.defaultView,Ie=le(()=>!!Ye&&getComputedStyle(ye()).direction==="rtl"),we=le(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Fe=le(()=>"scrollBehavior"in ye().style),He=5,Ne=6,Qe=1,Ze=4,et=8,tt=e=>T(e.$getTotalSize(),e.$getViewportSize()),rt=e=>!!e.$getViewportSize(),nt=(e,t=40,r=4,i=0,o,l=!1)=>{let f=!!i,n=1,s=0,a=0,h=0,m=0,d=0,v=0,z=0,V=0,_=f?[0,T(i-1,0)]:J,w=[0,0],R=0;const b=((c,g,L)=>({o:g,t:ee([],c),l:c,i:-1,u:ee([],c)}))(e,t),X=new Set,K=()=>h-a,C=()=>K()+d+m,F=c=>((g,L,E,S)=>{if(S=P(S,g.l-1),Q(g,S)<=L){const I=M(g,L+E,S);return[M(g,L,S,I),I]}{const I=M(g,L,void 0,S);return[I,M(g,L+E,I)]}})(b,c,s,w[0]),Y=()=>(c=>c.l?Q(c,c.l-1)+te(c,c.l-1):0)(b),H=c=>Q(b,c)-d,q=c=>te(b,c),G=c=>{c&&(we()&&z!==0?d+=c:m+=c)};return{$getStateVersion:()=>n,$getCacheSnapshot:()=>(c=>[c.t.slice(),c.o])(b),$getRange:()=>{let c,g;return v?[c,g]=w:([c,g]=w=F(T(0,C())),_&&(c=P(c,_[0]),g=T(g,_[1]))),z!==1&&(c-=T(0,r)),z!==2&&(g+=T(0,r)),[T(c,0),P(g,b.l-1)]},$findStartIndex:()=>M(b,C()),$findEndIndex:()=>M(b,C()+s),$isUnmeasuredItem:c=>b.t[c]===B,$:()=>!!_&&b.t.slice(T(0,_[0]-1),P(b.l-1,_[1]+1)+1).includes(B),$getItemOffset:H,$getItemSize:q,$getItemsLength:()=>b.l,$getScrollOffset:()=>h,$isScrolling:()=>z!==0,$getViewportSize:()=>s,$getStartSpacerSize:()=>a,$getTotalSize:Y,h:()=>(v=m,m=0,[v,V===2||K()+s>=Y()]),$subscribe:(c,g)=>{const L=[c,g];return X.add(L),()=>{X.delete(L)}},$update:(c,g)=>{let L,E,S=0;switch(c){case 1:{const I=v;v=0;const y=g-h,x=ue(y);I&&x<ue(I)+1||V!==0||(z=y<0?2:1),f&&(_=J,f=!1),h=g,S=4;const $=K();$>=-s&&$<=Y()&&(S+=1,E=x>s);break}case 2:S=8,z!==0&&(L=!0,S+=1),z=0,V=0,_=J;break;case 3:{const I=g.filter(([y,x])=>b.t[y]!==x);if(!I.length)break;G(I.reduce((y,[x,$])=>((V===2||(_?!f&&x<_[0]:H(x)+(z===0&&V===0?q(x):0)<K()))&&(y+=$-q(x)),y),0));for(const[y,x]of I){const $=q(y),p=Xe(b,y,x);l&&(R+=p?x:x-$)}l&&s&&R>s&&(G(((y,x)=>{let $=0;const p=[];y.t.forEach((ae,$e)=>{ae!==B&&(p.push(ae),$e<x&&$++)}),y.i=-1;const A=Ue(p),N=A.length,j=N/2|0,xe=N%2==0?(A[j-1]+A[j])/2:A[j],_e=y.o;return((y.o=xe)-_e)*T(x-$,0)})(b,M(b,C()))),l=!1),S=3,E=!0;break}case 4:s!==g&&(s=g,S=3);break;case 5:g[1]?(G(fe(b,g[0],!0)),V=2,S=1):(fe(b,g[0]),S=1);break;case 6:a=g;break;case 7:V=1;break;case 8:_=F(g),S=1}S&&(n=1+(2147483647&n),L&&d&&(m+=d,d=0),X.forEach(([I,y])=>{S&I&&y(E)}))}}},oe=setTimeout,Z=(e,t)=>t&&Ie()?-e:e,st=(e,t,r,i,o,l)=>{const f=Date.now;let n=0,s=!1,a=!1,h=!1,m=!1;const d=(()=>{let w;const R=()=>{w!=J&&clearTimeout(w)},b=()=>{R(),w=oe(()=>{w=J,(()=>{if(s||a)return s=!1,void d();h=!1,e.$update(2)})()},150)};return b.p=R,b})(),v=()=>{n=f(),h&&(m=!0),e.$update(1,i()),d()},z=w=>{if(s||!e.$isScrolling()||w.ctrlKey)return;const R=f()-n;150>R&&50<R&&(r?w.deltaX:w.deltaY)&&(s=!0)},V=()=>{a=!0,h=m=!1},_=()=>{a=!1,we()&&(h=!0)};return t.addEventListener("scroll",v),t.addEventListener("wheel",z,{passive:!0}),t.addEventListener("touchstart",V,{passive:!0}),t.addEventListener("touchend",_,{passive:!0}),{m:()=>{t.removeEventListener("scroll",v),t.removeEventListener("wheel",z),t.removeEventListener("touchstart",V),t.removeEventListener("touchend",_),d.p()},v:()=>{const[w,R]=e.h();w&&(o(Z(w,r),R,m),m=!1,R&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(1,i()))}}},it=(e,t)=>{let r,i,o;const l=t?"scrollLeft":"scrollTop",f=t?"overflowX":"overflowY",n=async(s,a)=>{if(!r)return void We(()=>n(s,a));o&&o();const h=()=>{let m;return[new Promise((d,v)=>{m=d,o=v,rt(e)&&oe(v,150)}),e.$subscribe(2,()=>{m&&m()})]};if(a&&Fe()){for(;e.$update(8,s()),e.$();){const[m,d]=h();try{await m}catch{return}finally{d()}}r.scrollTo({[t?"left":"top"]:Z(s(),t),behavior:"smooth"})}else for(;;){const[m,d]=h();try{r[l]=Z(s(),t),e.$update(7),await m}catch{return}finally{d()}}};return{$observe(s){r=s,i=st(e,s,t,()=>Z(s[l],t),(a,h,m)=>{if(m){const d=s.style,v=d[f];d[f]="hidden",oe(()=>{d[f]=v})}h?(s[l]=e.$getScrollOffset()+a,o&&o()):s[l]+=a})},$dispose(){i&&i.m()},$scrollTo(s){n(()=>s)},$scrollBy(s){s+=e.$getScrollOffset(),n(()=>s)},$scrollToIndex(s,{align:a,smooth:h,offset:m=0}={}){if(s=ze(s,0,e.$getItemsLength()-1),a==="nearest"){const d=e.$getItemOffset(s),v=e.$getScrollOffset();if(d<v)a="start";else{if(!(d+e.$getItemSize(s)>v+e.$getViewportSize()))return;a="end"}}n(()=>m+e.$getStartSpacerSize()+e.$getItemOffset(s)+(a==="end"?e.$getItemSize(s)-e.$getViewportSize():a==="center"?(e.$getItemSize(s)-e.$getViewportSize())/2:0),h)},$fixScrollJump:()=>{i&&i.v()}}},ot=e=>{let t;return{S(r){(t||(t=new(je(Ge(r))).ResizeObserver(e))).observe(r)},I(r){t.unobserve(r)},m(){t&&t.disconnect()}}},lt=(e,t)=>{let r;const i=t?"width":"height",o=new WeakMap,l=ot(f=>{const n=[];for(const{target:s,contentRect:a}of f)if(s.offsetParent)if(s===r)e.$update(4,a[i]);else{const h=o.get(s);h!=J&&n.push([h,a[i]])}n.length&&e.$update(3,n)});return{$observeRoot(f){l.S(r=f)},$observeItem:(f,n)=>(o.set(f,n),l.S(f),()=>{o.delete(f),l.I(f)}),$dispose:l.m}};function at(e,t){re(t,!0);let r=k(t,"as",3,"div"),i,o,l;de(()=>{l!==t.index&&(o&&o(),o=t.resizer(i,l=t.index))}),ge(()=>{o&&o()});let f=O(()=>{const a={position:"absolute",[t.horizontal?"height":"width"]:"100%",[t.horizontal?"top":"left"]:"0px",[t.horizontal?Ie()?"right":"left":"top"]:t.offset+"px",visibility:t.hide?"hidden":"visible"};return t.horizontal&&(a.display="flex"),be(a)});var n=D(),s=U(n);ve(s,r,!1,(a,h)=>{me(a,v=>i=v,()=>i),Se(a,()=>({style:u(f)}));var m=D(),d=U(m);Le(d,()=>t.children,()=>t.item,()=>t.index),W(h,m)}),W(e,n),ne()}function ct(e,t){re(t,!0);let r=k(t,"getKey",3,Ae),i=k(t,"as",3,"div"),o=k(t,"shift",3,!1),l=k(t,"horizontal",3,!1),f=k(t,"startMargin",3,0);const n=nt(t.data.length,t.itemSize,t.overscan,void 0,void 0,!t.itemSize),s=lt(n,l()),a=it(n,l()),h=n.$subscribe(Qe,()=>{se(z,n.$getStateVersion(),!0)}),m=n.$subscribe(Ze,()=>{t.onscroll&&t.onscroll(n.$getScrollOffset())}),d=n.$subscribe(et,()=>{t.onscrollend&&t.onscrollend()});let v=ie(void 0),z=ie(Re(n.$getStateVersion())),V=O(()=>u(z)&&n.$getRange()),_=O(()=>u(z)&&n.$isScrolling()),w=O(()=>u(z)&&n.$getTotalSize());Ve(()=>{const S=I=>{s.$observeRoot(I),a.$observe(I)};t.scrollRef?S(t.scrollRef):S(u(v).parentElement)}),ge(()=>{h(),m(),d(),s.$dispose(),a.$dispose()}),ce(()=>{t.data.length!==n.$getItemsLength()&&n.$update(He,[t.data.length,o()])}),ce(()=>{f()!==n.$getStartSpacerSize()&&n.$update(Ne,f())});let R;de(()=>{R!==u(z)&&(R=u(z),a.$fixScrollJump())});const b=n.$getScrollOffset,X=()=>tt(n),K=n.$getViewportSize,C=n.$findStartIndex,F=n.$findEndIndex,Y=n.$getItemOffset,H=n.$getItemSize,q=a.$scrollToIndex,G=a.$scrollTo,c=a.$scrollBy;let g=O(()=>be({"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:l()?u(w)+"px":"100%",height:l()?"100%":u(w)+"px","pointer-events":u(_)?"none":void 0}));var L=D(),E=U(L);return ve(E,i,!1,(S,I)=>{me(S,$=>se(v,$,!0),()=>u(v)),Se(S,()=>({style:u(g)}));var y=D(),x=U(y);he(x,17,()=>Je(u(V)),$=>r()(t.data[$],$),($,p)=>{const A=O(()=>t.data[u(p)]);{let N=O(()=>u(z)&&n.$getItemOffset(u(p))),j=O(()=>u(z)&&n.$isUnmeasuredItem(u(p)));at($,{get children(){return t.children},get item(){return u(A)},get index(){return u(p)},get as(){return t.item},get offset(){return u(N)},get hide(){return u(j)},get horizontal(){return l()},get resizer(){return s.$observeItem}})}}),W(I,y)}),W(e,L),ne({getScrollOffset:b,getScrollSize:X,getViewportSize:K,findStartIndex:C,findEndIndex:F,getItemOffset:Y,getItemSize:H,scrollToIndex:q,scrollTo:G,scrollBy:c})}function St(e,t){re(t,!0);let r=k(t,"getKey",3,(n,s)=>s),i=ie(null);const o=Ce();let l=O(o),f=O(()=>u(i)&&u(l)?u(i).getBoundingClientRect().top-u(l).getBoundingClientRect().top:0);Pe(e,{get ref(){return u(i)},set ref(n){se(i,n,!0)},children:(n,s)=>{var a=D(),h=U(a);{var m=d=>{ct(d,{get children(){return t.item},get data(){return t.data},get getKey(){return r()},overscan:10,get scrollRef(){return u(l)},get startMargin(){return u(f)}})};pe(h,d=>{u(l)&&d(m)})}W(n,a)},$$slots:{default:!0}}),ne()}export{vt as L,St as V};
