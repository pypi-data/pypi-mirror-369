import"./NZTpNUN0.js";import{D as w,E as va,F as ga,G as ha,H as Q,I as ka,J as pa,K as xa,L as V,U as W,M as O,N as z,O as $,P,Q as ba,R as ya,S as aa,T as ea,V as ta,q as Ta,W as sa,X as U,Y as Ia,p as Aa,h as s,u as m,c as Na,f as G,a as L,d as C,r as R,s as h,o as ra,t as q,b as I,e as B,n as na,g as Sa,Z as Ea,_ as wa}from"./UrJQk2wB.js";import{i as La}from"./pHb7WOhl.js";import{g as Ca,b as D,I as Ra,s as qa}from"./BeziK-YA.js";import{S as Ba}from"./BPuXUJEF.js";import{T as Da,a as Ha}from"./BeBD-SQy.js";import{t as Ga}from"./B5oxSMin.js";import{A as Ma}from"./J22P2KdH.js";import{A as Oa}from"./DXj5TzyV.js";import{L as Pa}from"./CHRLkBqO.js";const j=0,H=1,F=2;function Ua(d,a,u,f,k){w&&va();var r=d,A=ga(),_=Ta,i=W,o,l,p,x=A?z(void 0):$(void 0,!1,!1),N=A?z(void 0):$(void 0,!1,!1),b=!1;function v(e,t){b=!0,t&&(aa(c),ea(c),ta(_));try{e===j&&u&&(o?sa(o):o=P(()=>u(r))),e===H&&f&&(l?sa(l):l=P(()=>f(r,x))),e!==j&&o&&U(o,()=>o=null),e!==H&&l&&U(l,()=>l=null),e!==F&&p&&U(p,()=>p=null)}finally{t&&(ta(null),ea(null),aa(null),Ia())}}var c=ha(()=>{if(i===(i=a()))return;let e=w&&Q(i)===(r.data===ka);if(e&&(r=pa(),xa(r),V(!1),e=!0),Q(i)){var t=i;b=!1,t.then(n=>{t===i&&(O(x,n),v(H,!0))},n=>{if(t===i)throw O(N,n),v(F,!0),N.v}),w?u&&(o=P(()=>u(r))):ba(()=>{b||v(j,!0)})}else O(x,i),v(H,!1);return e&&V(!0),()=>i=W});w&&(r=ya)}const ja=new TextEncoder,Fa=async d=>{const a=ja.encode(d.toString());return await globalThis.crypto.subtle.digest("SHA-256",a)},Xa=async d=>{const a=await Fa(d),u=new Uint8Array(a);let f=BigInt(0);for(const k of u)f<<=BigInt(8),f|=BigInt(k);return Number(f%BigInt(Number.MAX_SAFE_INTEGER))};var Ya=G('<div><img alt="Album cover"/></div>'),Za=G('<span class="inline-grid grid-cols-1 grid-rows-1 justify-items-end *:col-span-full *:row-span-full"><span> </span> <span aria-hidden="true"> </span> <!></span> <!>',1),Ja=G("<!> <!>",1),Ka=G("<!> ",1);function ne(d,a){Aa(a,!0);const u=["mask-shape-sunny","mask-shape-6-sided-cookie","mask-shape-7-sided-cookie","mask-shape-9-sided-cookie","mask-shape-8-leaf-clover"];let f=m(()=>a.index??a.track.track_no),k=m(()=>a.maxIndex??a.track.album.num_tracks);const r=Ca();let A=m(()=>a.actions??Ga(r,a.track)),_=m(()=>a.active??a.track.uri===r.currentTrack?.track.uri),i=m(()=>Xa(a.track.uri).then(l=>u[l%u.length])),o=m(()=>r.getImage(a.track.uri));{const l=c=>{var e=Za(),t=L(e),n=C(t),y=C(n,!0);R(n);var S=h(n,2),ia=C(S,!0);R(S);var oa=h(S,2);ra(oa,()=>a.leading??na),R(t);var la=h(t,2);{var ca=g=>{var X=Sa();const Y=(T,M)=>{let ma=Ea(()=>wa(M?.(),"mask-shape-circle"));var E=Ya();let Z;var J=C(E);let K;R(E),q((da,_a)=>{Z=D(E,1,`h-full mask-contain mask-no-repeat [animation-duration:5s] ${(s(_)?s(ma):"mask-shape-square")??""}`,null,Z,da),K=D(J,1,"aspect-square h-full object-cover [animation-direction:reverse] [animation-duration:5s]",null,K,_a),qa(J,"src",s(o))},[()=>({"[animation-play-state:paused]":r.playbackState!=="playing","animate-spin":s(_)}),()=>({"[animation-play-state:paused]":r.playbackState!=="playing","animate-spin":s(_)})]),I(T,E)};var fa=L(X);Ua(fa,()=>s(i),T=>{Y(T)},(T,M)=>{Y(T,()=>s(M))}),I(g,X)},ua=g=>{Ra(g,{icon:"music_note"})};La(la,g=>{s(o)?g(ca):g(ua,!1)})}q(()=>{D(n,1,`transition-opacity ${a.indexClass??""}`),B(y,s(f)),D(S,1,`pointer-events-none opacity-0 ${a.maxIndexClass??""}`),B(ia,s(k))}),I(c,e)},p=c=>{Da(c,{contained:!1,get track(){return a.track}})},x=c=>{var e=Ja(),t=L(e);Oa(t,{get artists(){return a.track.artists}});var n=h(t),y=h(n);Ma(y,{get album(){return a.track.album}}),q(()=>B(n,` ${Ba} `)),I(c,e)},N=c=>{var e=Ka(),t=L(e);ra(t,()=>a.trailing??na);var n=h(t);q(y=>B(n,` ${y??""}`),[()=>Ha(a.track.length)]),I(c,e)};let b=m(()=>s(_)?"text-primary":""),v=m(()=>s(_)?"text-secondary":"");Pa(d,{get actions(){return s(A)},get labelTextClass(){return s(b)},leadingClass:"inline-flex flex-row items-center gap-4",lines:2,get supportingTextClass(){return s(v)},leading:l,labelText:p,supportingText:x,trailing:N,$$slots:{leading:!0,labelText:!0,supportingText:!0,trailing:!0}})}Na()}export{ne as T};
