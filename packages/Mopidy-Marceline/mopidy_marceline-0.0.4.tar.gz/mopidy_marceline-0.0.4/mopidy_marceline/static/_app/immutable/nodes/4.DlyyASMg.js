import{e as G}from"../chunks/Y5PCoc8t.js";import{b as R}from"../chunks/Ddm0HaqK.js";import"../chunks/NZTpNUN0.js";import{p as M,c as O,h as p,u as H,f as x,a as P,s as c,j as I,t as g,e as h,b as m,k as j,C as B,r as q,d as E}from"../chunks/UrJQk2wB.js";import{i as S}from"../chunks/pHb7WOhl.js";import{g as F,e as J,i as K}from"../chunks/BeziK-YA.js";import{f as N,a as Q}from"../chunks/BeBD-SQy.js";import{t as U,T as V}from"../chunks/Bph_h76x.js";import{A as W}from"../chunks/J22P2KdH.js";import{A as C}from"../chunks/DXj5TzyV.js";import{H as X}from"../chunks/Bf4W-0fO.js";import{I as y}from"../chunks/C9FB0Zgs.js";import{T as Y}from"../chunks/ajK82MF6.js";const Z=async({params:f,parent:t})=>{const{mopidy:s}=await t(),e=s.getAlbum(R(f.album));e||G(404,"Album not found");const l=(await s.requestImages([e.uri,...e.tracks.map(a=>a.uri)]))?.at(0),_=l?await s.requestPalette(l):void 0;return{album:e,palette:_}},ht=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));var $=x(" <!>",1),tt=x("<!> <!> <!> <!>",1);function at(f,t){M(t,!0);const s=F();let e=H(()=>s.getImage(t.album.uri)),l=H(()=>U(s,t.album.tracks));X(f,{get actions(){return p(l)},get image(){return p(e)},title:o=>{W(o,{get album(){return t.album}})},subtitle:o=>{C(o,{get artists(){return t.album.artists}})},info:o=>{var b=tt(),k=P(b);y(k,{icon:"person",tooltip:"Artists",children:(r,D)=>{C(r,{get artists(){return t.album.artists}})}});var A=c(k,2);y(A,{icon:"music_note",tooltip:"Genre",children:(r,D)=>{I();var i=$(),n=P(i),T=c(n);{var z=w=>{var L=j();g(()=>h(L,`, ${t.album.num_discs??""}
                discs`)),m(w,L)};S(T,w=>{t.album.num_discs>1&&w(z)})}g(()=>h(n,`${t.album.num_tracks??""} tracks`)),m(r,i)}});var d=c(A,2);y(d,{icon:"calendar_today",tooltip:"Release date",children:(r,D)=>{I();var i=j();g(n=>h(i,n),[()=>N(new Date(t.album.date))]),m(r,i)}});var v=c(d,2);y(v,{icon:"timer",tooltip:"Duration",children:(r,D)=>{I();var i=j();g(n=>h(i,n),[()=>Q(t.album.tracks.reduce((n,T)=>n+T.length,0))]),m(r,i)}}),m(o,b)},$$slots:{title:!0,subtitle:!0,info:!0}}),O()}var et=x('<h2 class="px-4 text-display-s"> </h2>'),rt=x("<!> <!>",1),st=x('<!> <div class="flex flex-col gap-4"></div>',1);function pt(f,t){M(t,!0);let s=H(()=>t.data.album.tracks.reduce((a,u)=>(a.at(-1)?.at(-1)?.disc_no!==u.disc_no?a.push([u]):a.at(-1)?.push(u),a),[]));var e=st();B(a=>{V(a,{get text(){return t.data.album.name}})});var l=P(e);at(l,{get album(){return t.data.album}});var _=c(l,2);J(_,21,()=>p(s),K,(a,u)=>{var o=rt(),b=P(o);{var k=d=>{var v=et(),r=E(v);q(v),g(()=>h(r,`Disc ${p(u)[0].disc_no??""}`)),m(d,v)};S(b,d=>{t.data.album.num_discs>1&&d(k)})}var A=c(b,2);Y(A,{get tracks(){return p(u)}}),m(a,o)}),q(_),m(f,e),O()}export{pt as component,ht as universal};
