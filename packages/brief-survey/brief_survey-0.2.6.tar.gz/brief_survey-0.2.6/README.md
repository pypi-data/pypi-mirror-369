# –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

## üá∫üá∏ English

- [BriefSurvey Universal Dynamic Survey for Telegram Bots](#briefsurvey-universal-dynamic-survey-for-telegram-bots-with-aiogram-version-3-aiogram_dialog-and-pydantic)
- [Description](#description)
- [Installation](#installation)
  - [From GitHub Repository](#from-github-repository)
  - [Download Locally and Install](#download-locally-and-install)
- [Quick Start](#quick-start)
  - [(case 1) Dynamic create a brief](#case-1-dynamic-crate-a-brief)
  - [(case 2)](#case-2)
    - [1. Define your questions using Pydantic models](#1-define-your-questions-using-pydantic-models)
    - [2. Define a result model](#2-define-a-result-model)
    - [3. Create a function to save results](#3-create-a-function-to-save-results)
    - [4. Initialize and register the survey](#4-initialize-and-register-the-survey)
    - [5. Launch the survey in Telegram with the command](#5-launch-the-survey-in-telegram-with-the-command)
- [Important](#important)
- [Customizing Messages and Buttons in brief_survey](#customizing-messages-and-buttons-in-brief_survey)
  - [What can be customized (English)](#what-can-be-customized-english)
    - [InfoMessages ‚Äî system messages](#infomessages-‚Äî-system-messages)
    - [InfoButtons ‚Äî button labels](#infobuttons-‚Äî-button-labels)
  - [Example usage](#example-usage)

## üá∑üá∫ –†—É—Å—Å–∫–∏–π

- [BriefSurvey](#briefsurvey)
- [–û–ø–∏—Å–∞–Ω–∏–µ](#–æ–ø–∏—Å–∞–Ω–∏–µ)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [Github Repo](#github-repo)
  - [–°–∫–∞—á–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å](#—Å–∫–∞—á–∞—Ç—å-–ª–æ–∫–∞–ª—å–Ω–æ-–∏-—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
  - [(1 –≤–∞—Ä–∏–∞–Ω—Ç) –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤](#1-–≤–∞—Ä–∏–∞–Ω—Ç-–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ-–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–≤–æ–ø—Ä–æ—Å–æ–≤)
  - [(2 –≤–∞—Ä–∏–∞–Ω—Ç)](#2-–≤–∞—Ä–∏–∞–Ω—Ç)
    - [1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–æ–ø—Ä–æ—Å—ã](#1-–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ-–≤–æ–ø—Ä–æ—Å—ã)
    - [2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–æ–¥–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞](#2-–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ-–º–æ–¥–µ–ª—å-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞)
    - [3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#3-—Å–æ–∑–¥–∞–π—Ç–µ-—Ñ—É–Ω–∫—Ü–∏—é-–¥–ª—è-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
    - [4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –æ–ø—Ä–æ—Å–Ω–∏–∫](#4-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ-–∏-–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ-–æ–ø—Ä–æ—Å–Ω–∏–∫)
    - [5. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ Telegram](#5–∑–∞–ø—É—Å–∫–∞–π—Ç–µ-–∫–æ–º–∞–Ω–¥—É-–≤-telegram)
- [–í–∞–∂–Ω–æ](#–≤–∞–∂–Ω–æ)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–Ω–æ–ø–æ–∫ –≤ brief_survey](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Å–æ–æ–±—â–µ–Ω–∏–π-–∏-–∫–Ω–æ–ø–æ–∫-–≤-brief_survey)
  - [–ß—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å](#—á—Ç–æ-–º–æ–∂–Ω–æ-–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å)
    - [InfoMessages ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è](#infomessages-‚Äî-—Å–∏—Å—Ç–µ–º–Ω—ã–µ-—Å–æ–æ–±—â–µ–Ω–∏—è)
    - [InfoButtons ‚Äî —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫](#infobuttons-‚Äî-—Ç–µ–∫—Å—Ç—ã-–∫–Ω–æ–ø–æ–∫)
  - [–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

# üá∫üá∏ English

## BriefSurvey
Universal Dynamic Survey for Telegram Bots with `aiogram` version 3 `aiogram_dialog` and Pydantic
### Description
BriefSurvey is a module for quick and flexible creation of dialog-based surveys in Telegram using aiogram v3 and aiogram_dialog.

- Questions are defined using Pydantic models to enforce strong typing and validation.
- Final answers are automatically serialized back into a Pydantic result model.
- Easy to extend and customize.
- Supports different question types: text, number, single-choice, multiple-choice.
- Simple integration and handler registration.
- Auto-validation questions by names.Questions with names like "age", "weight" validate and send error messages automatically without validator enter.


---
## Installation
### From GitHub Repository

```bash
pip install git+https://github.com/Fugguri/brief_survey.git 
```
### Download Locally and Install

```bash
git clone https://github.com/Fugguri/brief_survey.git
pip install -e brief_survey 
```


## Quick Start
### (case 1) Dynamic crate a brief 
```python
from brief_survey import BriefSurvey
from brief_survey.validators.person import age
async def save_handler(user_id: int, result: any):
    # dynamic access to survey result fields by question name.
    name = result.name
    age = result.age
    gender = result.gender

    return

survey = BriefSurvey(
    save_handler=save_handler,
    start_command='start_brief'  # customizable start command for the survey
)

# Customizable error messages
survey.info_messages.invalid_input = "Invalid data received, please try again."
# Customizable button text at the end of the survey
survey.buttons.finish_text = "Finish survey"

survey.add_question(
    text="What is your name?",
    question_type="text",
    name="name",
    media_path='storage/media/img.png'  # you can send media with text for any question (optional)
)

survey.add_question(
    text="Your age?",
    question_type="number",
    name="age",
    validator=age # You can use validators from validators path of this lib.
)


survey.add_question(
    text="Select your gender",
    question_type="choice",
    name="gender",
    choices=["Male", "Female"],
    next_questions={
        'Male': "favorite_car",
        'Female': "favorite_color",
    }
)

survey.add_question(
    text="Favorite car brand?",
    question_type="choice",
    name="favorite_car",
    choices=["MBW", "Mercedes"],
    next_question='photo'  # mandatory parameter for queries depending on choice. If not set, proceeds to next survey question
)

survey.add_question(
    text="Favorite color?",
    question_type="choice",
    name="favorite_color",
    choices=["White", "Pink", "Black"],
    next_question='photo'  # mandatory parameter for queries depending on choice. If not set, proceeds to next survey question
)

survey.add_question(
    text="Upload your photo",
    question_type="photo",
    name="photo"
)

```
### (case 2) 1. Define your questions using Pydantic models:

```python
from brief_survey import QuestionBase, ChoiceQuestion, MultiChoiceQuestion

questions = [
    QuestionBase(
        name="name",
        text="What is your name?",
        type="text",
        validator=lambda x: bool(x.strip()),
    ),
    ChoiceQuestion(
        name="gender",
        text="Select your gender",
        type="choice",
        choices=[("1", "Male"), ("2", "Female")],
    ),
    MultiChoiceQuestion(
        name="profession",
        text="Select your profession",
        type="multi_choice",
        choices=[
            ("1", "Athlete"),
            ("2", "Entrepreneur"),
            ("3", "Worker"),
        ],
    ),
]

```
### 2. Define a result model:
``` python
from pydantic import BaseModel
from typing import Optional

class SurveyResult(BaseModel):
    name: Optional[str]
    gender: Optional[str]
    profession: Optional[list[str]]
```
### 3. Create a function to save results:
``` python
async def save_handler(user_id: int, result: SurveyResult):
    # Save logic, e.g., store in database
    print(f"User {user_id} survey result: {result}")

```
### 4. Initialize and register the survey:
``` python
from brief_survey import BriefSurvey

survey = BriefSurvey(
    questions=questions,
    save_handler=save_handler,
    result_model=SurveyResult,
)

# In your main bot file with Dispatcher dp
survey.register_handlers(
    dp=dp,
    command_start='start_survey',     # optional
    text='Start survey',               # optional
    callback_data="start_survey"       # optional
)
```
### 5. Launch the survey in Telegram with the command:
 /start_survey



## Important
If you have global handlers in your bot, filter states explicitly using StateFilter to avoid conflicts that can break the survey after the first message:
``` python
from aiogram.filters import StateFilter

dp.message.register(handle, StateFilter(None))          # Only outside states
dp.callback_query.register(handle_callback, StateFilter(None))
```
# Customizing Messages and Buttons in brief_survey

The **brief_survey** library provides `InfoMessages` and `InfoButtons` classes that allow you to easily customize system messages and button texts used in the survey dialogs.

## What can be customized (English)

### InfoMessages ‚Äî system messages

| Field                   | Description                                       | Default example                  |
|-------------------------|-------------------------------------------------|---------------------------------|
| `invalid_input`          | Message shown when user input is invalid         | `"Please enter valid data."`    |
| `save_success`           | Message confirming data saved successfully       | `"Thank you! Data saved successfully."` |
| `save_fail`              | Message shown if saving data failed               | `"An error occurred during saving. Please try again later."` |
| `finish_text`            | Text displayed at survey completion               | `"Data received."`              |
| `question_not_found`     | Message shown if question is not found            | `"Error: question not found."`  |
| `pre_save_message`       | Message shown before saving data                   | `"Saving..."`                   |
| `start_message`          | Message shown at start of survey (optional)       | `None`                         |
| `forced_exit_message`    | Message shown when survey is forcefully exited    | `"Survey exited. Entered data does not allow continuation."` |

### InfoButtons ‚Äî button labels

| Field                  | Description                                      | Default example                 |
|------------------------|-------------------------------------------------|--------------------------------|
| `finish_text`           | Text on the button to finish the survey          | `"Finish"`                    |
| `multi_select_confirm`  | Text for confirming multi-select choice          | `"Confirm selection"`          |
| `start_again`           | Text on the button to restart the survey         | `"Start again"`                |

## Example usage
``` python 
Setting system messages
survey.info_messages.invalid_input = "Invalid data received, please try again."
survey.info_messages.save_success = "Thank you! Your responses have been saved."
survey.info_messages.save_fail = "Saving failed, please try again later."
survey.info_messages.finish_text = "Thank you for participating!"
survey.info_messages.question_not_found = "Question not found."
survey.info_messages.pre_save_message = "Saving data..."
survey.info_messages.start_message = "Let's start the survey!"
survey.info_messages.forced_exit_message = "Survey terminated due to an error."

Setting button texts
survey.buttons.finish_text = "Finish survey"
survey.buttons.multi_select_confirm = "Confirm"
survey.buttons.start_again = "Restart"
```



# üá∑üá∫ –†—É—Å—Å–∫–∏–π

## BriefSurvey

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–æ—Å–Ω–∏–∫ –¥–ª—è Telegram-–±–æ—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ `aiogram_dialog` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Pydantic-–º–æ–¥–µ–ª–µ–π –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

---

## –û–ø–∏—Å–∞–Ω–∏–µ

BriefSurvey ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∏ –≥–∏–±–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–ø—Ä–æ—Å–Ω–∏–∫–æ–≤ –≤ Telegram —Å –ø–æ–º–æ—â—å—é `aiogram` 3-–π –≤–µ—Ä—Å–∏–∏ –∏ `aiogram_dialog`.

- –í–æ–ø—Ä–æ—Å—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è Pydantic-–º–æ–¥–µ–ª—è–º–∏ –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
- –ò—Ç–æ–≥–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ Pydantic-–º–æ–¥–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø—Ä–æ—Å–Ω–∏–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤: —Ç–µ–∫—Å—Ç, —á–∏—Å–ª–æ, –≤—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.
- –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –∏–º–µ–Ω–∏ –≤–æ–ø—Ä–æ—Å–∞. –ü–æ–ª—è —Ç–∏–ø–∞ "age", "weight" –ø—Ä–æ—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –ø—Ä–∏—Å—ã–ª–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤ .

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
### Github Repo
```bash
pip install git+https://github.com/Fugguri/brief_survey.git 
```
### –°–∫–∞—á–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
```bash
git clone https://github.com/Fugguri/brief_survey.git
pip install -e brief_survey 
```


## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### (1 –≤–∞—Ä–∏–∞–Ω—Ç) –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤
```python

from brief_survey import BriefSurvey
async def save_handler(user_id: int, result: any):
    #–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –ø–æ–ª—è–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø—Ä–æ—Å–∞ –ø–æ –∏–º–µ–Ω–∏ –≤–æ–ø—Ä–æ—Å–∞. 
    name = result.mame
    age = result.age
    gender = result.gender 
    return 
survey = BriefSurvey(
    save_handler=save_handler,
    start_command='start_brief' # –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –Ω–∞—á–∞–ª–∞ –æ–ø—Ä–æ—Å–∞
)

#–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
survey.info_messages.invalid_input = "–ü–æ–ª—É—á–µ–Ω—ã –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"

#–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏ –∏ –∫–Ω–æ–ø–∫—É –≤ –∫–æ–Ω—Ü–µ –æ–ø—Ä–æ—Å–∞
survey.info_messages.invalid_input = "–ü–æ–ª—É—á–µ–Ω—ã –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"
survey.buttons.finish_text = "–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–æ—Å" 
# –ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –æ–ø—Ä–æ—Å–∞
survey.info_messages.start_message = '–ü—Ä–æ–π–¥–∏—Ç–µ –Ω–µ–±–æ–ª—å—à–æ–π –æ–ø—Ä–æ—Å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º.'
from brief_survey.validators.person import age  
survey.add_question(
    text="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?",
    question_type="text",
    name="name",
    media_path='storage/media/img.png'# –ú–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤–º–µ—Å—Ç–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º
)
survey.add_question(
    text="–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç?",
    question_type="number",
    name="age",
    validator=age # –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ validators
)
survey.add_question(
    text="–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª",
    question_type="choice",
    name="gender",
    choices=["–ú—É–∂—Å–∫–æ–π", "–ñ–µ–Ω—Å–∫–∏–π"],
    
    next_questions={
    '–ú—É–∂—Å–∫–æ–π': "favorite_car",
    '–ñ–µ–Ω—Å–∫–∏–π': "favorite_color",
    }
    
)
survey.add_question(
    text="–õ—é–±–∏–º–∞—è –º–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è?",
    question_type="choice",
    name="favorite_car",
    choices=["MBW", "Mercedes"],
    next_question='photo' # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –≤—ã–±–æ—Ä–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å, –ø–æ–π–¥–µ—Ç –¥–∞–ª—å—à–µ –ø–æ –æ–ø—Ä–æ—Å—É

)
survey.add_question(
    text="–õ—é–±–∏–º—ã–π —Ü–≤–µ—Ç?",
    question_type="choice",
    name="favorite_car",
    choices=["–ë–µ–ª—ã–π", "–†–æ–∑–æ–≤—ã–π", "–ß–µ—Ä–Ω—ã–π"],
    next_question='photo' # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –≤—ã–±–æ—Ä–∞. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å, –ø–æ–π–¥–µ—Ç –¥–∞–ª—å—à–µ –ø–æ –æ–ø—Ä–æ—Å—É
)

survey.add_question(
    text="–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ —Ñ–æ—Ç–æ",
    question_type="photo",
    name="photo"
)

````

### (2 –≤–∞—Ä–∏–∞–Ω—Ç) 
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–æ–ø—Ä–æ—Å—ã (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª–∏ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–æ–¥—É–ª—è):

```python
from brief_survey import QuestionBase, ChoiceQuestion, MultiChoiceQuestion

questions = [
    QuestionBase(
        name="name",
        text="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç?",
        type="text",
        validator=lambda x: bool(x.strip()),
    ),
    ChoiceQuestion(
        name="gender",
        text="–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª",
        type="choice",
        choices=[("1", "–ú—É–∂—Å–∫–æ–π"), ("2", "–ñ–µ–Ω—Å–∫–∏–π")],
    ),
    MultiChoiceQuestion(
        name="gender",
        text="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏",
        type="multi_choice",
        choices=[("1", "–°–ø–æ—Ä—Ç—Å–º–µ–Ω"), 
                 ("2", "–ü—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å"),
                 ("3", "–ü—Ä–æ—Å—Ç–æ–π —Ä–∞–±–æ—Ç–Ω–∏–∫")
                 ],
    )
]



```
### 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–æ–¥–µ–ª—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
``` python
from pydantic import BaseModel
from typing import Optional


class SurveyResult(BaseModel):
    name: Optional[str]
    gender: Optional[str]
```
### 3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
```python

async def save_handler(user_id: int, result: SurveyResult):
    # –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –±–∞–∑—É
    print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id}: {result}")
```
### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –æ–ø—Ä–æ—Å–Ω–∏–∫:
``` python
from brief_survey import BriefSurvey

survey = BriefSurvey(
    questions=questions,
    save_handler=save_handler,
    result_model=SurveyResult,
)

# –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ñ–∞–π–ª–µ —Å –±–æ—Ç–æ–º (Dispatcher dp) —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Dispatcher
survey.register_handlers(dp=dp,
                         command_start='start_survey', #–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
                         text='–ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å', #–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
                         callback_data="start_survey" #–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
                         )
```
### 5.–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ Telegram:

/start_survey

## –í–∞–∂–Ω–æ

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π handler, —Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ state –≤—Ä—É—á–Ω—É—é, –ø—Ä–∏ –ø–æ–º–æ—â–∏ StateFilter.
–ù–µ—è—Å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.

``` python
from aiogram.filters import StateFilter
dp.message.register(handle,StateFilter(None))  # —Ç–æ–ª—å–∫–æ –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π!
dp.callback_query.register(handle_callback,StateFilter(None))
```
## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–Ω–æ–ø–æ–∫ –≤ brief_survey

–í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ **brief_survey** –¥–æ—Å—Ç—É–ø–Ω—ã –∫–ª–∞—Å—Å—ã `InfoMessages` –∏ `InfoButtons`, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–µ–∫—Å—Ç—ã —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–Ω–æ–ø–æ–∫, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤ –¥–∏–∞–ª–æ–≥–∞—Ö –æ–ø—Ä–æ—Å–Ω–∏–∫–∞.

### –ß—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å

#### InfoMessages ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

| –ü–æ–ª–µ                    | –û–ø–∏—Å–∞–Ω–∏–µ                                             | –ü—Ä–∏–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                  |
|-------------------------|-----------------------------------------------------|-----------------------------------------------------|
| `invalid_input`          | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω–æ–º –≤–≤–æ–¥–µ                         | `"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ."`          |
| `save_success`           | –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏                     | `"–°–ø–∞—Å–∏–±–æ! –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."`              |
| `save_fail`              | –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏                   | `"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."` |
| `finish_text`            | –¢–µ–∫—Å—Ç –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø—Ä–æ—Å–∞                          | `"–î–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω—è—Ç—ã."`                                  |
| `question_not_found`     | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –≤–æ–ø—Ä–æ—Å–∞              | `"–û—à–∏–±–∫–∞: –≤–æ–ø—Ä–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω."`                        |
| `pre_save_message`       | –°–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ       | `"–°–æ—Ö—Ä–∞–Ω—è—é"`                                         |
| `start_message`          | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –æ–ø—Ä–æ—Å–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)            | `None`                                              |
| `forced_exit_message`    | –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–º –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–ø—Ä–æ—Å–∞        | `"–í—ã—Ö–æ–¥ –∏–∑ –æ–ø—Ä–æ—Å–∞.–í–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–ø—Ä–æ—Å"` |

#### InfoButtons ‚Äî —Ç–µ–∫—Å—Ç—ã –∫–Ω–æ–ø–æ–∫

| –ü–æ–ª–µ                   | –û–ø–∏—Å–∞–Ω–∏–µ                                          | –ü—Ä–∏–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é               |
|------------------------|---------------------------------------------------|----------------------------------|
| `finish_text`           | –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø—Ä–æ—Å–∞                | `"–ó–∞–≤–µ—Ä—à–∏—Ç—å"`                    |
| `multi_select_confirm`  | –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä) | `"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä"`            |
| `start_again`           | –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –æ–ø—Ä–æ—Å–∞                 | `"–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞"`               |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
``` python –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–±—ã—Ç–∏–π
survey.info_messages.invalid_input = "–ü–æ–ª—É—á–µ–Ω—ã –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑"
survey.info_messages.save_success = "–°–ø–∞—Å–∏–±–æ! –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã."
survey.info_messages.save_fail = "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
survey.info_messages.finish_text = "–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ!"
survey.info_messages.question_not_found = "–í–æ–ø—Ä–æ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω."
survey.info_messages.pre_save_message = "–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è..."
survey.info_messages.start_message = "–ù–∞—á–∏–Ω–∞–µ–º –æ–ø—Ä–æ—Å!"
survey.info_messages.forced_exit_message = "–û–ø—Ä–æ—Å –ø—Ä–µ—Ä–≤–∞–Ω –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏."

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤ –∫–Ω–æ–ø–æ–∫
survey.buttons.finish_text = "–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–æ—Å"
survey.buttons.multi_select_confirm = "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
survey.buttons.start_again = "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
```



# ToDo
- add media list handler
- check same questions name in list
- add survey database saver. To save complete survey_to database. And call by his id
# for any errors send me a telegram message to [@fugguri](https://t/me/fugguri).
# ‚òïÔ∏èbye me a coffe appreciated 