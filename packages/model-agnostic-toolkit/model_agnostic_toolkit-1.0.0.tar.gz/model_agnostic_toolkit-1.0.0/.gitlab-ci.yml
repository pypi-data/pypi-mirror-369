default:
  image: python:3.10
  tags:
    - "fit"

stages:
  - build

build:
  stage: build
  script:
    - pip install twine
    - export VERSION=$CI_COMMIT_TAG
    - python setup.py sdist bdist_wheel
    - python -m twine upload
      --username $twine_token_id
      --password $twine_token_key
      --repository-url https://git.rwth-aachen.de/api/v4/projects/${CI_PROJECT_ID}/packages/pypi 
      --verbose 
      dist/*
  rules:
    - if: $CI_COMMIT_BRANCH == "global_methods"
