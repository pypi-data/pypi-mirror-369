{% load wagtailcore_tags wagtailimages_tags %}
{% load static %}

<script src="https://kit.fontawesome.com/2e8803d931.js" crossorigin="anonymous"></script>

<div style="background-color: #f8fafc;">
	<nav class="navbar">
		<div class"mobile-ss" style="max-width: 1142px; width: 1142px; margin: auto; display: flex; justify-content: space-between;">
					<!-- Menu Hamburguer + Logo -->
		<div class"wrapper-nav-home" style="display: flex; align-items: center; gap: 20px; width: 100%; justify-content: space-between" >
			<div class="menu-container">
				<!-- √çcone do Menu -->
				<button class="menu-icon" onclick="toggleMenu()">
					<span style="color: #007D7A;" class="material-icons">menu</span>
				</button>
		
				<!-- Dropdown do Menu -->
				<div id="menu-dropdown" class="menu-dropdown hidden">
					{% if navbar.links %}
						{% for link_block in navbar.links %}
							{% if link_block.block_type == 'navbar_link' %}
								<!-- Link normal -->
								<a href="{{ link_block.value.url }}" class="nav-link-nav" target="_blank">
									{{ link_block.value.label }}
								</a>
							{% elif link_block.block_type == 'chooserpage' %}
								<!-- ChooserPage Menu -->
								<div class="chooser-menu-item">
									<div class="chooser-title" onclick="toggleChooserSubmenu(this)">
										<span>{{ link_block.value.title }}</span>
										<i class="material-icons">keyboard_arrow_right</i>
									</div>
									
									<!-- Submenu das p√°ginas -->
									<div class="chooser-submenu">
										<div class="submenu-content-horizontal">
											<div id="childList-{{ forloop.counter0 }}" class="child-pages-container-horizontal">
												<!-- As p√°ginas filhas aparecer√£o automaticamente -->
											</div>
										</div>
										
										<!-- Dados escondidos para o JavaScript -->
										<div style="display: none;" class="hidden-parent-data" data-chooser-id="{{ forloop.counter0 }}">
											{% for parent_item in link_block.value.parent_pages %}
												<div data-page-id="{{ parent_item.page.id }}" data-max-children="{{ link_block.value.max_child_pages|default:10 }}" data-show-descriptions="{{ link_block.value.show_child_descriptions }}">
													{% for child in parent_item.page.get_children.live %}
														<span data-title="{{ child.title|escapejs }}" data-url="{% pageurl child %}" data-description="{% if link_block.value.show_child_descriptions and child.search_description %}{{ child.search_description|escapejs }}{% endif %}"></span>
													{% endfor %}
												</div>
											{% endfor %}
										</div>
									</div>
								</div>
							{% endif %}
						{% endfor %}
					{% else %}
						<span class="text-red-500">‚ö†Ô∏è Nenhum link cadastrado.</span>
					{% endif %}
				</div>
			</div>
		
			<!-- Logo -->
			<div class="logo-enap">
                <a href="www.enap.gov.br" class="navbar-logo-link">
                    {% for block in navbar.logo %}
                        {% if ".svg" in block.value.file.url|lower %}
                            <img src="{{ block.value.file.url }}" alt="logo da enap verde" >
                        {% else %}
                            {% image block.value fill-118x18 format-webp as navbar_logo %}
                            <img src="{{ navbar_logo.url }}" alt="logo da enap verde" class="logo-navbar">
                        {% endif %}
                    {% endfor %}
                </a>
            </div>
	
		<!-- Barra de Pesquisa -->
		<form action="/busca/" method="get" class="search-container">
            <input type="text" id="search-input" name="q" placeholder="O que voc√™ procura ou quer aprender?" value="{{ query_navbar }}">
            <button type="submit">
                <span class="material-icons">search</span>
            </button>
            <button type="button" id="mic-button">
                <span class="material-icons">mic</span>
            </button>
        </form>
	
		<!-- Op√ß√µes √† Direita -->
		<div class="options">
			<!-- Seletor de Idioma -->
            <!-- Vers√£o com bandeiras -->
<!-- Substitua o bot√£o atual por este -->
<div class="language-selector" id="language-selector">
    <div class="current-language" onclick="toggleLanguageDropdown()">
        <span class="language-text">PT</span>
        <span class="material-icons">expand_more</span>
    </div>
    <div class="language-dropdown" id="language-dropdown">
        <div class="language-option" onclick="changeLanguage('pt')">
            <span class="flag-icon">PT - </span>
            <span>Portugu√™s</span>
        </div>
        <div class="language-option" onclick="changeLanguage('en')">
            <span class="flag-icon">EN - </span>
            <span>English</span>
        </div>
        <div class="language-option" onclick="changeLanguage('es')">
            <span class="flag-icon">ES - </span>
            <span>Espa√±ol</span>
        </div>
    </div>
    
    <!-- Google Translate escondido -->
    <div id="google_translate_element" style="display: none;"></div>
</div>
	
			<!-- Bot√£o de Contraste -->
	
			<!-- Bot√£o de Login -->
			{% if aluno %}
				<a href="/area-do-aluno/" class="login-btn">
					<i class="fa-solid fa-circle-user"></i>
					<span>Ol√°, {{ primeiro_nome }}</span>
				</a>
				<a href="/logout" class="logout-btn">Sair</a>
			{% else %}
				<a href="/login-sso" class="login-btn">
					<i class="fa-solid fa-circle-user"></i>
					<span>Entrar</span>
				</a>
			{% endif %}
		</div>
		</div>
	</nav>
</div>

<style>
    /* === LANGUAGE SELECTOR === */
    .language-selector {
        position: relative;
        display: inline-block;
    }
    
    .current-language {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 12px;
        cursor: pointer;
        border-radius: 6px;
        transition: background-color 0.2s;
        color: inherit;
        font-weight: 500;
        font-size: 14px;
        color: #007D7A;
    }
    
    .current-language:hover {
        background-color: rgba(255,255,255,0.1);
    }
    
    .current-language .material-icons {
        font-size: 18px;
        transition: transform 0.2s;
    }
    
    .current-language.active .material-icons {
        transform: rotate(180deg);
    }
    
    /* Dropdown */
    .language-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        min-width: 150px;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.3s ease;
    }
    
    .language-dropdown.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }
    
    .language-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        cursor: pointer;
        color: #333;
        transition: background-color 0.2s;
        border-radius: 6px;
        margin: 4px;
    }
    
    .language-option:hover {
        background-color: #f5f5f5;
    }
    
    .language-option.current {
        background-color: #e3f2fd;
        color: #1976d2;
    }
    
    .flag-icon {
        font-size: 16px;
    }
    
    /* Google Translate escondido */
    .goog-te-banner-frame {
        display: none !important;
    }
    
    body {
        top: 0 !important;
    }
    
    .goog-te-gadget {
        display: none !important;
    }
    
    /* Responsivo */
    @media (max-width: 768px) {
        .language-dropdown {
            right: -10px;
            min-width: 150px;
        }
    }





/* Estilos para o dropdown principal */
.menu-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    background: #025257;
    border-radius: 0px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    min-width: 300px;
    max-width: 350px;
    z-index: 1000;
    transition: all 0.3s ease;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    gap: 0px;
}

.menu-dropdown.dropdown-active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
    display: flex;
	flex-direction: column;
}

/* Estilos base para nav-link */
.nav-link {
    display: block;
    padding: 12px 46px;
    text-decoration: none;
    color: white;
    border-radius: 6px;
    transition: all 0.2s ease;
    font-size: 14px;
}

.nav-link:hover {
    background: #006969;
    color: white;
    text-decoration: none;
}

/* Estilos para o ChooserPage no navbar */
.chooser-menu-item {
    position: relative;
    font-size: 14px;
    font-weight: 400;
}

.chooser-menu-item:last-child {
    border-bottom: none;
}

.chooser-title {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 24px;
    cursor: pointer;
    color: white;
    font-weight: 500;
    transition: all 0.2s ease;
    background: #025257;
    position: relative;
    font-weight: 400;
}

.chooser-title:hover {
    background: #006969;
    color: white;
}

.chooser-title.active {
    background: #024248;
    color: white;
}

.chooser-title .material-icons {
    font-size: 18px;
    transition: transform 0.2s ease;
}

.chooser-title.active .material-icons {
    transform: rotate(0deg); /* Mant√©m a seta para direita quando ativo */
}

/* Submenu lateral para p√°ginas filhas */
.chooser-submenu {
    position: absolute;
    left: 100%;
    top: 0;
    background: #006969;
    border-radius: 0;
    box-shadow: 4px 0 12px rgba(0,0,0,0.1);
    min-width: 300px;
    max-width: 400px;
    z-index: 1001;
    opacity: 0;
    visibility: hidden;
    transform: translateX(-10px);
    transition: all 0.3s ease;
    border-left: 1px solid rgba(255,255,255,0.1);
}

.chooser-submenu.active {
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
}

/* Container para as p√°ginas filhas */
.submenu-content-horizontal {
    padding: 0;
}

.child-pages-container-horizontal {
    max-height: 400px;
    overflow-y: auto;
}

.child-pages-container-horizontal .child-pages-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.child-pages-container-horizontal .child-page-item {
    margin-bottom: 0;
}

.child-pages-container-horizontal .child-page-item:last-child {
    border-bottom: none;
}

.child-pages-container-horizontal .child-page-link {
    display: block;
    padding: 12px 20px;
    text-decoration: none;
    color: white;
    transition: all 0.2s ease;
    font-size: 14px;
    border-radius: 0;
    border-left: 3px solid transparent;
    font-weight: 400;
}

.child-pages-container-horizontal .child-page-link:hover {
    color: white;
    background: #024248;
    text-decoration: none;
}

.child-pages-container-horizontal ul li {
    margin: 0;
    padding: 0;
    color: white;
}

.no-selection {
    color: rgba(255,255,255,0.6);
    font-style: italic;
    text-align: center;
    padding: 30px 20px;
    margin: 0;
    font-size: 13px;
}

/* Scrollbar personalizada */
.child-pages-container-horizontal::-webkit-scrollbar {
    width: 5px;
}

.child-pages-container-horizontal::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
}

.child-pages-container-horizontal::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.3);
    border-radius: 3px;
}

.child-pages-container-horizontal::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.5);
}

/* Responsivo para mobile */
@media (max-width: 768px) {
    .menu-dropdown {
        min-width: 280px;
        max-width: 90vw;
    }
    
    .chooser-submenu {
        position: static;
        transform: none;
        border-radius: 0;
        box-shadow: none;
        border-left: none;
        border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .chooser-submenu.active {
        transform: none;
    }

    .current-language {
        padding: 0;
    }
}

/* Estilos restantes mantidos iguais */
.submenu-content {
    display: flex;
    min-height: 300px;
}

.submenu-left, .submenu-right {
    flex: 1;
    padding: 16px;
}

.submenu-left {
    border-right: 1px solid #e5e7eb;
    background: #f9fafb;
}

.submenu-left h4, .submenu-right h4 {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: #374151;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.parent-pages-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.parent-page-item {
    margin-bottom: 2px;
}

.parent-page-link {
    display: flex;
    align-items: center;
    padding: 12px 14px;
    text-decoration: none;
    color: #374151;
    border-radius: 6px;
    transition: all 0.2s ease;
    gap: 10px;
    font-size: 14px;
    border-left: 3px solid transparent;
}

.parent-page-link:hover, .parent-page-link.active {
    background: #e0f2f1;
    color: #007D7A;
    text-decoration: none;
    border-left-color: #007D7A;
    transform: translateX(2px);
}

.parent-page-link .material-icons:first-child {
    font-size: 18px;
    min-width: 18px;
}

.parent-page-link .arrow {
    margin-left: auto;
    font-size: 16px;
    opacity: 0.6;
}

.child-pages-container {
    max-height: 250px;
    overflow-y: auto;
}

.child-pages-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.child-page-item {
    margin-bottom: 6px;
}

.child-page-link {
    display: block;
    padding: 10px 14px;
    text-decoration: none;
    color: #374151;
    border-radius: 6px;
    transition: all 0.2s ease;
    border-left: 3px solid transparent;
    font-size: 14px;
}

.child-page-link:hover {
    border-left-color: 3px solid #006969;
    text-decoration: none;
    transform: translateX(2px);
}

.child-page-title {
    margin-bottom: 3px;
}

.child-page-description {
    font-size: 12px;
    color: #6b7280;
    line-height: 1.4;
}

.no-selection {
    color: #9ca3af;
    font-style: italic;
    text-align: center;
    padding: 30px 20px;
    margin: 0;
    font-size: 13px;
}

/* Scrollbar personalizada */
.child-pages-container::-webkit-scrollbar {
    width: 5px;
}

.child-pages-container::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 3px;
}

.child-pages-container::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 3px;
}

.child-pages-container::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Responsivo para mobile */
@media (max-width: 768px) {
    .menu-dropdown {
        min-width: 280px;
        max-width: 90vw;
    }
    
    .submenu-content {
        flex-direction: column;
        min-height: auto;
    }
    
    .submenu-left {
        border-right: none;
        border-bottom: 1px solid #e5e7eb;
    }
    
    .chooser-submenu {
        margin: 8px -8px;
    }
    
}

@media (max-width: 600px) {
	.search-container .material-icons {
		font-size: 16px;
	}

    .current-language{
        padding: 0px;
    }
}

.search-container .material-icons {
	font-size: 20px;
}

#mic-button {
    border-radius: 50%;
    padding: 8px;
    cursor: pointer;
    transition: background-color 0.2s, box-shadow 0.2s;
}

/* Estado ouvindo */
#mic-button.listening {
    background-color: #0A7263;
    color: white;
    border-color: #0A7263;
    box-shadow: 0 0 8px rgba(10, 114, 99, 0.6);
}

#mic-button span {
    font-size: 20px;
    pointer-events: none;
}
</style>

<script>
// === LANGUAGE SELECTOR ===
let currentLanguage = 'pt';
let googleTranslateLoaded = false;

// Inicializar Google Translate
function googleTranslateElementInit() {
    new google.translate.TranslateElement({
        pageLanguage: 'pt',
        includedLanguages: 'en,es', // Apenas ingl√™s e espanhol
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        multilanguagePage: true,
        gaTrack: true
    }, 'google_translate_element');
    
    googleTranslateLoaded = true;
    console.log('Google Translate carregado!');
}

// Carregar Google Translate
function loadGoogleTranslate() {
    if (!document.querySelector('script[src*="translate.google.com"]')) {
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = '//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit';
        script.async = true;
        document.head.appendChild(script);
    }
}

// Toggle dropdown
function toggleLanguageDropdown() {
    const dropdown = document.getElementById('language-dropdown');
    const currentLang = document.querySelector('.current-language');
    
    dropdown.classList.toggle('active');
    currentLang.classList.toggle('active');
}

// Mudar idioma
function changeLanguage(langCode) {
    const languages = {
        'pt': { text: 'PT', flag: 'üáßüá∑', name: 'Portugu√™s' },
        'en': { text: 'EN', flag: 'üá∫üá∏', name: 'English' },
        'es': { text: 'ES', flag: 'üá™üá∏', name: 'Espa√±ol' }
    };
    
    // Atualizar interface
    const languageText = document.querySelector('.language-text');
    languageText.textContent = languages[langCode].text;
    
    // Marcar op√ß√£o atual
    document.querySelectorAll('.language-option').forEach(option => {
        option.classList.remove('current');
    });
    event.target.closest('.language-option').classList.add('current');
    
    // Fechar dropdown
    toggleLanguageDropdown();
    
    // Aplicar tradu√ß√£o via Google Translate
    applyGoogleTranslate(langCode);
    
    currentLanguage = langCode;
}

// Aplicar tradu√ß√£o do Google
function applyGoogleTranslate(langCode) {
    if (!googleTranslateLoaded) {
        console.log('Google Translate ainda n√£o carregou...');
        return;
    }
    
    // Aguardar um pouco para garantir que o Google Translate est√° pronto
    setTimeout(() => {
        const selectElement = document.querySelector('.goog-te-combo');
        if (selectElement) {
            selectElement.value = langCode;
            selectElement.dispatchEvent(new Event('change'));
            console.log(`Idioma alterado para: ${langCode}`);
        } else {
            console.log('Elemento do Google Translate n√£o encontrado');
            // M√©todo alternativo
            window.location.hash = '#googtrans(pt|' + langCode + ')';
            window.location.reload();
        }
    }, 500);
}

// Fechar dropdown ao clicar fora
document.addEventListener('click', function(e) {
    if (!e.target.closest('.language-selector')) {
        const dropdown = document.getElementById('language-dropdown');
        const currentLang = document.querySelector('.current-language');
        
        if (dropdown) {
            dropdown.classList.remove('active');
            currentLang.classList.remove('active');
        }
    }
});

// Carregar quando a p√°gina estiver pronta
document.addEventListener('DOMContentLoaded', function() {
    // Pequeno delay para n√£o interferir com outros scripts
    setTimeout(() => {
        loadGoogleTranslate();
    }, 1000);
    
    // Marcar idioma atual
    const currentOption = document.querySelector('.language-option[onclick="changeLanguage(\'pt\')"]');
    if (currentOption) {
        currentOption.classList.add('current');
    }
});








	// Sua fun√ß√£o original do menu - mantida como est√°
	function toggleMenu() {
		const menu = document.getElementById("menu-dropdown");
		menu.classList.toggle("dropdown-active");
	}

	// Fun√ß√£o para mostrar submenu e carregar todas as p√°ginas filhas automaticamente
	function toggleChooserSubmenu(element) {
		const submenu = element.nextElementSibling;
		const isActive = element.classList.contains('active');
		
		// Fecha todos os outros submenus
		document.querySelectorAll('.chooser-title.active').forEach(title => {
			title.classList.remove('active');
			title.nextElementSibling.classList.remove('active');
		});
		
		// Toggle do submenu atual
		if (!isActive) {
			element.classList.add('active');
			submenu.classList.add('active');
			
			// Automaticamente carrega todas as p√°ginas filhas
			setTimeout(() => {
				loadAllChildPages(submenu);
			}, 100);
		}
	}

	// Nova fun√ß√£o para carregar todas as p√°ginas filhas de uma vez
	function loadAllChildPages(submenu) {
		const hiddenData = submenu.querySelector('.hidden-parent-data');
		const chooserId = hiddenData.getAttribute('data-chooser-id');
		const childList = submenu.querySelector(`#childList-${chooserId}`);
		
		let allChildren = [];
		
		// Coleta todas as p√°ginas filhas de todas as p√°ginas m√£e
		hiddenData.querySelectorAll('[data-page-id]').forEach(parentData => {
			const childElements = parentData.querySelectorAll('span[data-title]');
			childElements.forEach(childEl => {
				allChildren.push({
					title: childEl.getAttribute('data-title'),
					url: childEl.getAttribute('data-url'),
					description: childEl.getAttribute('data-description')
				});
			});
		});
		
		// Mostra todas as p√°ginas filhas em layout horizontal
		if (allChildren.length > 0) {
			let html = '<ul class="child-pages-list">';
			allChildren.forEach(function(child) {
				html += `
					<li class="child-page-item">
						<a href="${child.url}" class="child-page-link">
							<div class="child-page-title">${child.title}</div>
							${child.description ? `<div class="child-page-description" style="font-size: 12px; color: rgba(255,255,255,0.7); margin-top: 4px;">${child.description}</div>` : ''}
						</a>
					</li>
				`;
			});
			html += '</ul>';
			childList.innerHTML = html;
		} else {
			childList.innerHTML = '<p class="no-selection">Nenhuma p√°gina encontrada</p>';
		}
	}

	// Dados das p√°ginas filhas para o navbar - agora simplificado
	const navbarChildPagesData = {};

	// Remove a fun√ß√£o showChildPagesInNavbar pois n√£o precisamos mais dela

	// Fecha menu ao clicar fora
	document.addEventListener('click', function(e) {
		if (!e.target.closest('.menu-container')) {
			document.getElementById('menu-dropdown').classList.remove('dropdown-active');
			// Fecha tamb√©m todos os submenus
			document.querySelectorAll('.chooser-title.active').forEach(title => {
				title.classList.remove('active');
				title.nextElementSibling.classList.remove('active');
			});
		}
	});

	// Seus scripts existentes mantidos como est√£o
	window.addEventListener('scroll', function() {
		const navbar = document.querySelector('.navbar');
		
		// Adiciona classe fixa quando rolar mais que a altura inicial da navbar
		if (window.scrollY > navbar.offsetHeight) {
			navbar.classList.add('navbar-fixed');
		} else {
			navbar.classList.remove('navbar-fixed');
		}
	});

	function clearInput() {
        document.getElementById('searchInput').value = '';
        document.getElementById('searchInput').focus();
        toggleClearButton();
    }

    function toggleClearButton() {
        const input = document.getElementById('searchInput');
        const clearButton = document.getElementById('clearButton');
        clearButton.style.display = input.value ? 'block' : 'none';
    }

    // Fun√ß√£o para verificar se √© dispositivo m√≥vel
    function isMobile() {
        return window.innerWidth <= 768; // Defina o breakpoint apropriado para seu site
    }

    // Quando o documento carrega, torna o search container vis√≠vel apenas no desktop
    document.addEventListener('DOMContentLoaded', function() {
        const searchContainer = document.querySelector('.search-container');
        
        if (!isMobile()) {
            // Vers√£o desktop - sempre vis√≠vel
            searchContainer.classList.add('visible');
            searchContainer.classList.add('show');
        }
    });

    // Durante o scroll, comportamento responsivo
    window.addEventListener('scroll', function() {
        const searchContainer = document.querySelector('.search-container');
        const scrollPosition = window.scrollY;
        
        if (isMobile()) {
            // Vers√£o mobile - s√≥ vis√≠vel ap√≥s scroll
            if (scrollPosition > 200) {
                searchContainer.classList.add('show');
            } else {
                searchContainer.classList.remove('show');
            }
        } else {
            // Vers√£o desktop - sempre vis√≠vel
            searchContainer.classList.add('visible');
            searchContainer.classList.add('show');
        }
    });

    // Recalcular quando a janela for redimensionada
    window.addEventListener('resize', function() {
        const searchContainer = document.querySelector('.search-container');
        
        if (!isMobile()) {
            // Vers√£o desktop - sempre vis√≠vel
            searchContainer.classList.add('visible');
            searchContainer.classList.add('show');
        } else {
            // Vers√£o mobile - verificar posi√ß√£o de scroll
            const scrollPosition = window.scrollY;
            if (scrollPosition <= 200) {
                searchContainer.classList.remove('show');
            }
        }
    });

	const micButton = document.getElementById('mic-button');
	const searchInput = document.getElementById('search-input');

	// Verifica suporte do navegador
	const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

	if (SpeechRecognition) {
		const recognition = new SpeechRecognition();
		recognition.lang = 'pt-BR';
		recognition.continuous = false;
		recognition.interimResults = false;

		// Clicou no microfone ‚Üí come√ßa a ouvir
		micButton.addEventListener('click', () => {
			recognition.start();
			micButton.classList.add('listening');
		});

		// Quando captura a voz
		recognition.addEventListener('result', (event) => {
			const transcript = Array.from(event.results)
				.map(result => result[0].transcript)
				.join('');

			searchInput.value = transcript;
		});

		// Quando finaliza (parou de ouvir)
		recognition.addEventListener('end', () => {
			micButton.classList.remove('listening');
		});

		// Se der erro, remove o estado listening
		recognition.addEventListener('error', () => {
			micButton.classList.remove('listening');
		});
	} else {
		// Se n√£o suportar, esconde o bot√£o
		micButton.style.display = 'none';
	}
</script>

