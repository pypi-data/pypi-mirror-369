# generated by datamodel-codegen:
#   filename:  settings.schema.yaml
#   timestamp: 2025-08-13T05:55:20+00:00

from __future__ import annotations

from enum import Enum
from typing import List, Optional

from pydantic import Extra, Field, confloat

from sense_table.utils.models import ImmutableBaseModel


class HeatmapNormalizeColor(Enum):
    none = 'none'
    per_row = 'per_row'
    per_column = 'per_column'


class FolderNavigationShowFileInfo(Enum):
    size = 'size'
    lastModifiedRelative = 'lastModifiedRelative'
    lastModifiedDateTime = 'lastModifiedDateTime'
    none = 'none'


class BoxPlotSortBy(Enum):
    min = 'min'
    max = 'max'
    avg = 'avg'
    q50 = 'q50'
    std = 'std'
    skewness = 'skewness'


class FolderShortcut(ImmutableBaseModel):
    class Config:
        extra = Extra.forbid

    name: str
    path: str


class SenseTableSettings(ImmutableBaseModel):
    enableDebugging: Optional[bool] = Field(False, description='Enable debugging mode')
    licenseKey: Optional[str] = Field(
        'free|trial', description='License key for the application'
    )
    s3PrefixToSaveShareableLink: Optional[str] = Field(
        'none', description='S3 prefix to persist the state files for shareable links'
    )
    baseFontSize: Optional[confloat(ge=10.0, le=20.0)] = Field(
        12, description='Base font size'
    )
    thresholdCategorical: Optional[confloat(ge=10.0, le=1000.0)] = Field(
        100,
        description='Threshold for number of unique values to consider a column as categorical',
    )
    histogramNumberOfBins: Optional[confloat(ge=30.0, le=100.0)] = Field(
        50,
        description='Number of bins for histogram plots. Note that we may slightly adjust the number to make bins look nicely rounded.',
    )
    tableMaxRowHeight: Optional[confloat(ge=48.0, le=200.0)] = Field(
        60, description='Maximum height of a row in the table'
    )
    heightOfColumnDistribution: Optional[confloat(ge=24.0, le=128.0)] = Field(
        32, description='Height of the distribution plot in table column header'
    )
    tableDefaultColumnWidth: Optional[confloat(ge=100.0, le=800.0)] = Field(
        150, description='Default width of the column in the table'
    )
    galleryItemSize: Optional[confloat(ge=100.0, le=600.0)] = Field(
        150, description='Size of the image in the gallery'
    )
    heatmapNormalizeColor: Optional[HeatmapNormalizeColor] = Field(
        'none', description='How do you want to normalize the color of the heatmap?'
    )
    bubblePlotMaxMarkerSize: Optional[confloat(ge=5.0, le=50.0)] = Field(
        20, description='Maximum size of the marker in the bubble plot'
    )
    bubblePlotOpacity: Optional[confloat(ge=0.1, le=1.0)] = Field(
        0.5, description='Opacity of the bubble plot'
    )
    folderNavigationShowFileInfo: Optional[FolderNavigationShowFileInfo] = Field(
        'size',
        description='How do you want to show the file info in the folder navigation?',
    )
    folderBrowserDefaultRootFolder: Optional[str] = Field(
        '~', description='The default root folder to start the folder browser from'
    )
    folderBrowserShowHiddenFiles: Optional[bool] = Field(
        False, description='Show hidden files in the folder browser'
    )
    folderBrowserListLimit: Optional[confloat(ge=10.0, le=1000.0)] = Field(
        100, description='Limit the number of items in the folder browser'
    )
    folderBrowserImageSize: Optional[confloat(ge=50.0, le=600.0)] = Field(
        200, description='Size of the image in the folder browser'
    )
    folderBrowserImageCropSquare: Optional[bool] = Field(
        True, description='Crop the image in the folder browser to a square'
    )
    boxPlotSortBy: Optional[BoxPlotSortBy] = Field(
        'max', description='How do you want to sort the boxplot?'
    )
    folderShortcuts: Optional[List[FolderShortcut]] = Field(
        default_factory=lambda: [
            FolderShortcut.parse_obj(v) for v in [{'name': 'Home', 'path': '~'}]
        ],
        description='Shortcuts for the folder browser, displayed in the bottom left corner.',
    )
