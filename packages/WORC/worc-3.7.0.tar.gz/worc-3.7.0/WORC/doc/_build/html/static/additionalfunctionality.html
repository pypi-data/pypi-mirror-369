<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="FAQ" href="faq.html" /><link rel="prev" title="Radiomics Features" href="features.html" />
        <link rel="prefetch" href="../_static/WORC_Logo.svg" as="image" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Additional functionality - WORC 3.7.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/extra.css?v=a591123b" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">WORC 3.7.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/WORC_Logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">WORC 3.7.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Radiomics Features</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Additional functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="developerdocumentation.html">Developer documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="developerdocumentation.html#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../autogen/WORC.html">WORC Package</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of WORC Package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.IOparser.html">IOparser Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.classification.html">classification Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.detectors.html">detectors Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.exampledata.html">exampledata Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.export.html">export Package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../autogen/WORC.facade.html">facade Package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of facade Package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../autogen/WORC.facade.helpers.html">helpers Package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.fastrconfig.html">fastrconfig Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.featureprocessing.html">featureprocessing Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.plotting.html">plotting Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.processing.html">processing Package</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../autogen/WORC.resources.html">resources Package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of resources Package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../autogen/WORC.resources.fastr_tests.html">fastr_tests Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="../autogen/WORC.resources.fastr_tools.html">fastr_tools Package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.statistics.html">statistics Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.tests.html">tests Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.tools.html">tools Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autogen/WORC.validators.html">validators Package</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/static/additionalfunctionality.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="additional-functionality">
<span id="additonalfunctionality-chapter"></span><h1>Additional functionality<a class="headerlink" href="#additional-functionality" title="Link to this heading">¶</a></h1>
<p>When using <code class="docutils literal notranslate"><span class="pre">SimpleWORC</span></code>, or WORC with similar simple configuration settings, you can
already benefit from the main functionality of WORC, i.e. the automatic algorithm
optimization. However, several additional functionalities are provided, which are discussed in
this chapter.</p>
<p>For a description of the radiomics features, please see
<span class="xref std std-ref">the radiomics features chapter</span>. For a description of
the data mining components, see
<span class="xref std std-ref">the data mining chapter</span>. All other components
are discussed here.</p>
<p>For a comprehensive overview of all functions and parameters, please look at
<a class="reference internal" href="configuration.html#config-chapter"><span class="std std-ref">the config chapter</span></a>.</p>
<section id="image-preprocessing">
<h2>Image Preprocessing<a class="headerlink" href="#image-preprocessing" title="Link to this heading">¶</a></h2>
<p>Preprocessing of the image, and accordingly the mask, is done in respectively
the <a class="reference internal" href="../autogen/WORC.processing.html#module-WORC.processing.preprocessing" title="WORC.processing.preprocessing"><code class="xref py py-mod docutils literal notranslate"><span class="pre">WORC.processing.preprocessing</span></code></a> and the
<a class="reference internal" href="../autogen/WORC.processing.html#module-WORC.processing.segmentix" title="WORC.processing.segmentix"><code class="xref py py-mod docutils literal notranslate"><span class="pre">WORC.processing.segmentix</span></code></a> scripts. Options for preprocessing
the image include, in the following order:</p>
<ol class="arabic simple">
<li><p>N4 Bias field correction, see also <a class="reference external" href="https://simpleitk.readthedocs.io/en/master/link_N4BiasFieldCorrection_docs.html">https://simpleitk.readthedocs.io/en/master/link_N4BiasFieldCorrection_docs.html</a>.</p></li>
<li><p>Checking and optionally correcting the spacing if it’s 1x1x1 and the DICOM metadata says otherwise.</p></li>
<li><p>Clipping of the image intensities above and below a certain value.</p></li>
<li><p>Normalization, see <a class="reference internal" href="../autogen/WORC.processing.html#WORC.processing.preprocessing.normalize_image" title="WORC.processing.preprocessing.normalize_image"><code class="xref py py-mod docutils literal notranslate"><span class="pre">WORC.processing.preprocessing.normalize_image</span></code></a> for all options.</p></li>
<li><p>Transposing the image to another ‘’main’’ orientation, e.g. axial.</p></li>
<li><p>Resampling the image to a different spacing.</p></li>
</ol>
<p>Options for preprocessing the segmentation include:</p>
<ol class="arabic simple">
<li><p>Hole filling. Many feature computations cannot deal with holes.</p></li>
<li><p>Removing small objects. Many feature computations cannot deal with multiple</p></li>
</ol>
<blockquote>
<div><p>objects in a single segmentation.</p>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Extracing the largest blob. Many feature computations cannot deal with</p></li>
</ol>
<blockquote>
<div><p>multiple objects in a single segmentation.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Instead of using the full segmentation, extracting a ring around the border</p></li>
</ol>
<blockquote>
<div><p>of the image to compute the features on. Ring captures both the inner and
outer border.</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Dilating the contour.</p></li>
<li><p>Masking the contour with another contour.</p></li>
<li><p>When assuming the same image and metadata, copy the metadata of the image</p></li>
</ol>
<blockquote>
<div><p>to the segmentation.</p>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Checking and optionally correcting the spacing if it’s 1x1x1 and the</p></li>
</ol>
<blockquote>
<div><p>DICOM metadata says otherwise. Same as image preprocessing step 2.</p>
</div></blockquote>
<ol class="arabic simple" start="9">
<li><p>Transposing the segmentation to another ‘’main’’ orientation, e.g. axial.</p></li>
</ol>
<blockquote>
<div><p>Same as image preprocessing step 5.</p>
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>Resampling the segmentation <strong>and the segmentation</strong> to a different spacing.</p></li>
</ol>
<blockquote>
<div><p>Same as image preprocessing step 10.</p>
</div></blockquote>
</section>
<section id="feature-scaling">
<h2>Feature scaling<a class="headerlink" href="#feature-scaling" title="Link to this heading">¶</a></h2>
<p>The default method for feature scaling in <code class="docutils literal notranslate"><span class="pre">WORC</span></code> is a robust version
of z-scoring. Additional options include:</p>
<ol class="arabic simple">
<li><p>regular z-scoring</p></li>
<li><p>MinMax scaling, i.e., scaling to a range between 0 and 1</p></li>
<li><p>Scaling by centering using the median and IQR</p></li>
<li><p>A combination of z-scoring with a logarithmic transform and a correction
term to better cope with outliers and non-normally distributed features <a class="reference internal" href="#cit1" id="id1"><span>[CIT1]</span></a>.</p></li>
</ol>
</section>
<section id="image-registration">
<h2>Image Registration<a class="headerlink" href="#image-registration" title="Link to this heading">¶</a></h2>
<p>When using multiple modalities or sequences, and there is only a segmentation
on a single image, image registration is applied to spatially align all
sequences and warp the segmentation to the other images through
<code class="docutils literal notranslate"><span class="pre">elastix</span></code> <a class="reference internal" href="#cit2" id="id2"><span>[CIT2]</span></a>. Usage of <code class="docutils literal notranslate"><span class="pre">elastix</span></code> is automatically included in <code class="docutils literal notranslate"><span class="pre">WORC</span></code>
when only a single segmentation and multiple modalities are supplied.
The image on which the segmentation is provided is used as the moving image,
the others as the fixed image, as the segmentations will be moved from the
segmented image to the others.</p>
<p>Registration is by default performed using a
rigid transformation model, based on a mutual information using the adaptive
stochastic gradient descent optimizer. Manual
overrides of these defaults are included in the <code class="docutils literal notranslate"><span class="pre">WORC</span></code> configuration.</p>
<p>When using Elastix, parameter files have to be provided in the
<code class="docutils literal notranslate"><span class="pre">network.Elastix_Para</span></code> object, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">network</span><span class="o">.</span><span class="n">Elastix_Para</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;Parameters_Rigid.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;Parameters_BSpline.txt&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>The outer list defines the parameter files used per modality. If only one
element is provided, the same will be applied for all modalities. Each element
of the list should be a list of its own, including the filenames
of <code class="docutils literal notranslate"><span class="pre">elastix</span></code>. In the example, we provided two files, resulting
in first a rigid registration being performed, followed by a bspline registration.
Examples of <code class="docutils literal notranslate"><span class="pre">elastix</span></code> parameter files can be found at <a class="reference external" href="https://github.com/SuperElastix/ElastixModelZoo/tree/master/models/default">https://github.com/SuperElastix/ElastixModelZoo/tree/master/models/default</a></p>
</section>
<section id="combat">
<h2>ComBat<a class="headerlink" href="#combat" title="Link to this heading">¶</a></h2>
<p>Commonly, radiomics studies include multicenter data,
resulting in heterogeneity in the acquisition protocols. As radiomics features
are generally sensitive to these variations, this limits the repeatability and
reproducibility. To compensate for the differences in acquisition, feature
harmonization techniques may be used, one of the most frequently used
is ComBat. In ComBat, feature distributions are harmonized for variations in
the imaging acquisition, e.g. due to differences in hospitals, manufacturers,
or acquisition parameters. The dataset is divided in groups based on these
differences, and a correction of the error caused by these differences
is estimated using empirical Bayes.</p>
<p>ComBat is included in <code class="docutils literal notranslate"><span class="pre">WORC</span></code> and can be turned on in the configuration,
including options to use empirical Bayes or not, a parametric or
non-parametric approach, and a moderation variable.</p>
<p>ComBat feature harmonization is embedded in WORC. A wrapper around the
original <a class="reference external" href="https://github.com/Jfortin1/ComBatHarmonization/">ComBat code</a>,
compatible with the other tools provided by <code class="docutils literal notranslate"><span class="pre">WORC</span></code>, is included in the
<code class="docutils literal notranslate"><span class="pre">WORC</span></code> installation.</p>
<p>When using ComBat, the following configurations should be done:</p>
<ol class="arabic simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">config['General']['ComBat']</span></code> to <code class="docutils literal notranslate"><span class="pre">'True'</span></code>.</p></li>
<li><p>To change the ComBat parameters (i.e. which batch and moderation variable to use),
change the relevant config fields, see the <a class="reference internal" href="configuration.html#config-chapter"><span class="std std-ref">Config chapter</span></a>.</p></li>
<li><p>WORC extracts the batch and moderation variables from the label file which you also
use to give WORC the actual label you want to predict. The same format therefore applies, see
the <span class="xref std std-ref">User manual</span> for more details..</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In line with current literature, ComBat is applied once on the full dataset
straight after the feature extraction, thus before the actual hyperoptimization.
Hence, to avoid serious overfitting, we advice to <strong>NEVER</strong> use the variable
you are trying to predict as the moderation variable.</p>
</div>
</section>
<section id="bayesian-optimization-with-smac-instead-of-random-search">
<h2>Bayesian optimization with SMAC instead of random search<a class="headerlink" href="#bayesian-optimization-with-smac-instead-of-random-search" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SMAC algorithm only works on Linux, because of its random forest surrogate model
implementation. Make sure to use <code class="docutils literal notranslate"><span class="pre">swig3.0</span></code>. To circumvent <code class="docutils literal notranslate"><span class="pre">pyrfr</span></code> issues
with SMAC, we use a custom fork of the original SMAC package that needs to be installed separately.</p>
</div>
<p>Steps to take in order to use SMAC within WORC:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">remove</span> <span class="pre">swig</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">swig3.0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">/usr/bin/swig3.0</span> <span class="pre">/usr/bin/swig</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pyrfr==0.8.0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/mitchelldeen/SMAC3.git</span></code></p></li>
</ol>
<p>The SMAC algorithm, using Bayesian optimization, can be used for the hyperparameter optimization by
setting the <code class="docutils literal notranslate"><span class="pre">config['SMAC']['use']</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">'True'</span></code>. For details on which SMAC parameters
can be modified, see <a class="reference internal" href="configuration.html#config-chapter"><span class="std std-ref">Config chapter</span></a>.</p>
<p>The core functionality of SMAC within WORC is implemented in
<code class="xref py py-mod docutils literal notranslate"><span class="pre">WORC.resources.fastr_tools.worc.bin.smac_tool</span></code>. The configuration space of SMAC is specified
in <a class="reference internal" href="../autogen/WORC.classification.html#module-WORC.classification.smac" title="WORC.classification.smac"><code class="xref py py-mod docutils literal notranslate"><span class="pre">WORC.classification.smac</span></code></a>, which is also where new methods can be added to the search space.</p>
<p>There is additional output when using SMAC. The final output file <code class="docutils literal notranslate"><span class="pre">smac_results_all_0.json</span></code>
is added along with the regular performance file in the output folder. It contains information on the
optimization procedure for each cross-validation split, with statistics on the performance and all
intermediate best found configurations.The end of the file contains a summary of the average statistics
over all train-test cross-validations.</p>
</section>
<section id="multilabel-classification-and-regression">
<h2>Multilabel classification and regression<a class="headerlink" href="#multilabel-classification-and-regression" title="Link to this heading">¶</a></h2>
<p>While <code class="docutils literal notranslate"><span class="pre">WORC</span></code> was primarily designed for binary classification, as also
demonstrated in the main manuscript, various other types of machine
learning workflows have been included as well.</p>
<p>In multilabel classification, several mutually exclusive classes are
predicted at the same time. This is a special form of multiclass classification,
in which the classes do not have to be mutually exclusive. When using
multilabel classification in <code class="docutils literal notranslate"><span class="pre">WORC</span></code>, the only differences with binary
classification in the workflows is in the machine learning component.
For the other components, e.g. feature selection and resampling, when not
supporting multiclass classification, the methods are performed per
class in a one-vs-rest approach. Some of the binary classifiers naturally
support multilabel classification (i.e., random forest,  AdaBoost,
and extreme gradient boosting) and are thus normally used. Others only
support binary classification (i.e., LDA, QDA, Naive Bayes, SVM, logistic
regression), and are therefore also performed per class in a one-vs-rest
approach and combined in a single multilabel model. In the evaluation,
the same metrics as in the binary classification are evaluated per class.
Additionally, the multiclass AUC <a class="reference internal" href="#cit3" id="id3"><span>[CIT3]</span></a>. and multiclass BCR are computed.</p>
<p>In regression, a continuous label is predicted. As there are no classes,
all class-based feature and sample preprocessing methods
(RELIEF, univariate testing, and all resampling methods) cannot be used.
In the machine learning component, <code class="docutils literal notranslate"><span class="pre">WORC</span></code> includes the following regressors:</p>
<ol class="arabic simple">
<li><p>linear regression;</p></li>
<li><p>support vector machines;</p></li>
<li><p>random forest;</p></li>
<li><p>elastic net;</p></li>
<li><p>LASSO;</p></li>
<li><p>ridge regression;</p></li>
<li><p>AdaBoost;</p></li>
<li><p>extreme gradient boosting (XGBoost).</p></li>
</ol>
<p>The optimization is by default based on the R2-score. Performance metrics
computed are the rw-score, mean squared error, inter-class correlation
coefficient, Pearson coefficient and p-value, and Spearman coefficient
and p-value.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">¶</a></h2>
<div role="list" class="citation-list">
<div class="citation" id="cit1" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">CIT1</a><span class="fn-bracket">]</span></span>
<p>Chen, Jianan, et al. <em>AMINN: Autoencoder-based Multiple Instance
Neural Network for Outcome Prediction of Multifocal Liver Metastases.</em>
arXiv preprint arXiv:2012.06875 (2020).</p>
</div>
<div class="citation" id="cit2" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">CIT2</a><span class="fn-bracket">]</span></span>
<p>Klein, Stefan, et al. <em>Elastix: a toolbox for intensity-based medical
image registration.</em> IEEE transactions on medical imaging 29.1 (2009): 196-205.</p>
</div>
<div class="citation" id="cit3" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">CIT3</a><span class="fn-bracket">]</span></span>
<p>Hand, David J., and Robert J. Till. <em>A simple generalisation
of the area under the ROC curve for multiple class classification problems.</em>
Machine learning 45.2 (2001): 171-186.</p>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="faq.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">FAQ</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="features.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Radiomics Features</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2016 -- 2025, Biomedical Imaging Group Rotterdam, Department of Radiology and Nuclear Medicine, Erasmus University Medical Center, Rotterdam, The Netherlands
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Additional functionality</a><ul>
<li><a class="reference internal" href="#image-preprocessing">Image Preprocessing</a></li>
<li><a class="reference internal" href="#feature-scaling">Feature scaling</a></li>
<li><a class="reference internal" href="#image-registration">Image Registration</a></li>
<li><a class="reference internal" href="#combat">ComBat</a></li>
<li><a class="reference internal" href="#bayesian-optimization-with-smac-instead-of-random-search">Bayesian optimization with SMAC instead of random search</a></li>
<li><a class="reference internal" href="#multilabel-classification-and-regression">Multilabel classification and regression</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=229cbe3b"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>